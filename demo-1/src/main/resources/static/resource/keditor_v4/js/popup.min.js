/* kmslab_editor 3.0.1 */

function each(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c])}var _DOC=document,_WIN=window,_DOC_EL=_DOC.documentElement,_FALSE=!1,_TRUE=!0,_NULL=null,_UNDEFINED;try{var urlParams={};!function(){for(var a,b=/\+/g,c=/([^&=]+)=?([^&]*)/g,d=function(a){return decodeURIComponent(a.replace(b," "))},e=window.location.search.substring(1);a=c.exec(e);)urlParams[d(a[1])]=d(a[2])}(),urlParams.xssDomain&&(document.domain=urlParams.xssDomain)}catch(a){}var $tx={};!function(){Object.extend=function(a,b){for(var c in b)a[c]=b[c];return a},_WIN.Class={create:function(){return function(){this.initialize.apply(this,arguments)}}},_WIN.$break={},Function.prototype.bind||(Function.prototype.bind=function(){var a=this,b=$A(arguments),c=b.shift();return function(){return a.apply(c,b.concat($A(arguments)))}}),Function.prototype.bindAsEventListener=function(){var a=this,b=$A(arguments),c=b.shift();return function(d){return a.apply(c,[d||_WIN.event].concat(b))}};var a=function(a){var b=arguments;if(b.length>1){for(var c=0,d=[],e=b.length;c<e;c++)d.push($tx(b[c]));return d}return"string"==typeof a&&(a=_DOC.getElementById(a)),a};$tx=a;var b=navigator.userAgent.toLowerCase(),c=function(a){return-1!=b.indexOf(a)};Object.extend($tx,{chrome:c("chrome"),safari:c("safari")&&c("chrome")==_FALSE,gecko:c("firefox"),gecko_ver:c("firefox")?parseFloat(b.replace(/.*firefox\/([\d\.]+).*/g,"$1")):0,msie:c("msie")||c("trident"),msie_ver:c("msie")||c("trident")?function(){return c("msie")?parseFloat(b.split("msie")[1]):parseFloat(b.split("rv:")[1])}():0,msie_docmode:_DOC.documentMode||0,webkit:c("applewebkit"),webkit_ver:c("applewebkit")?parseFloat(b.replace(/.*safari\//g,"")):0,opera:c("opera"),presto:c("presto"),os_win:c("win"),os_win7:c("windows nt 6.1"),os_win8:c("windows nt 6.2"),os_win8_1:c("windows nt 6.3"),os_mac:c("mac"),iphone:c("iphone"),ipod:c("ipod"),ipad:c("ipad"),ios:c("like mac os x")&&c("mobile"),ios_ver:c("like mac os x")&&c("mobile")?parseFloat(b.replace(/^.*os (\d+)([_\d]*) .*$/g,"$1.$2").replace(/_/g,"")):0,android:c("android"),android_ver:c("android")?parseFloat(b.replace(/.*android[\s]*([\d\.]+).*/g,"$1")):0,blackberry:c("blackberry"),winphone:c("windows phone os"),wince:c("windows ce")}),Object.extend($tx,{msie_std:$tx.msie&&!_DOC.selection,msie_nonstd:$tx.msie&&!!_DOC.selection,msie6:$tx.msie&&6<=$tx.msie_ver&&$tx.msie_ver<7,msie_quirks:function(){try{return $tx.msie&&"CSS1Compat"!==_WIN.top.document.compatMode}catch(a){try{return"CSS1Compat"!==_DOC.compatMode}catch(a){return _FALSE}}}()}),Object.extend($tx,{extend:Object.extend,browser:function(){return $tx.msie?"msie":$tx.gecko?"firefox":$tx.chrome?"chrome":$tx.webkit?"safari":$tx.opera?"opera":""}()}),_WIN.$must=function(a,b){var c=$tx(a);if(!c)throw new Error("[Exception] "+b+": cannot find element: id='"+a+"'");return c},_WIN.txlib=a}(),function(){$tx.extend($tx,{classNames:function(a){return a.className.split(" ")},hasClassName:function(a,b){if(b&&a.className){return a.className.split(/\s+/).contains(b)}return _FALSE},addClassName:function(a,b){this.hasClassName(a,b)||(a.className+=" "+b)},removeClassName:function(a,b){var c=a.className.split(/\s+/);a.className=c.without(b).compact().join(" ")},visible:function(a){return"none"!=$tx.getStyle(a,"display")},toggle:function(a){return a=$tx(a),$tx[$tx.visible(a)?"hide":"show"](a),a},show:function(a){return $tx(a).style.display="block",a},hide:function(a){return $tx(a).style.display="none",a}})}(),$tx.extend($tx,{getStyle:function(a,b){a=$tx(a),b="float"==b?"cssFloat":b.camelize();var c=a.style[b];if(!c){var d=_DOC.defaultView||_DOC.parentWindow,e=d.getComputedStyle(a,_NULL);c=e?e[b]:_NULL}return"opacity"==b?c?parseFloat(c):1:"auto"==c?_NULL:c},setStyle:function(a,b,c){a=$tx(a);var d=a.style;for(var e in b)b.hasOwnProperty(e)&&("opacity"===e?$tx.setOpacity(a,b[e]):d["float"===e||"cssFloat"===e?d.styleFloat===_UNDEFINED?"cssFloat":"styleFloat":c?e:e.camelize()]=b[e]);return a},setStyleProperty:function(a,b){var c=_TRUE;this.setStyle(a,b,c)},getOpacity:function(a){return $tx(a).getStyle("opacity")},setOpacity:function(a,b){return a=$tx(a),a.style.opacity=1==b||""===b?"":b<1e-5?0:b,a},applyCSSText:function(a,b){var c=a.createElement("style");c.setAttribute("type","text/css"),c.styleSheet?c.styleSheet.cssText=b:c.textContent=b,a.getElementsByTagName("head")[0].appendChild(c)}}),function(){$tx.msie_nonstd&&($tx.getStyle=function(a,b){a=$tx(a),b="float"==b||"cssFloat"==b?"styleFloat":b.camelize();var c=a.style[b];return!c&&a.currentStyle&&(c=a.currentStyle[b]),"opacity"==b?(c=($tx.getStyle(a,"filter")||"").match(/alpha\(opacity=(.*)\)/))&&c[1]?parseFloat(c[1])/100:1:"auto"==c?"width"!=b&&"height"!=b||"none"==$tx.getStyle(a,"display")?_NULL:a["offset"+b.capitalize()]+"px":c}),$tx.msie_nonstd&&($tx.setOpacity=function(a,b){a=$tx(a);var c=$tx.getStyle(a,"filter"),d=a.style;return 1==b||""===b?(d.filter=c.replace(/alpha\([^\)]*\)/gi,""),a):(b<1e-5&&(b=0),d.filter=c.replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity="+100*b+")",a)}),$tx.gecko&&$tx.extend($tx,{setOpacity:function(a,b){return a=$tx(a),a.style.opacity=1==b?.999999:""===b?"":b<1e-5?0:b,a}}),$tx.JSONHelper={encodeURIComponentReplacer:function(b,c){return"string"!=typeof c||a(c)?c:encodeURIComponent(c)},decodeURIComponentReviver:function(b,c){if("string"==typeof c){if(!a(c))return decodeURIComponent(c);try{return JSON.parse(c,arguments.callee)}catch(a){}}return c}};var a=function(a){if("["==a.charAt(0)&&"]"==a.charAt(a.length-1))try{return JSON.parse(a),!0}catch(a){}return!1}}(),function(){$tx.extend($tx,{cumulativeOffset:function(a){var b=0,c=0;do{b+=a.offsetTop||0,c+=a.offsetLeft||0,a=a.offsetParent}while(a);return[c,b]},positionedOffset:function(a){var b=0,c=0;do{if(b+=a.offsetTop||0,c+=a.offsetLeft||0,a=a.offsetParent){if("BODY"==a.tagName)break;var d=$tx.getStyle(a,"position");if("relative"==d||"absolute"==d)break}}while(a);return[c,b]},getDimensions:function(a){var b=$tx.getStyle(a,"display");if("none"!=b&&b!=_NULL)return{width:a.offsetWidth,height:a.offsetHeight};var c=a.style,d=c.visibility,e=c.position,f=c.display;c.visibility="hidden",c.position="absolute",c.display="block";var g=a.clientWidth,h=a.clientHeight;return c.display=f,c.position=e,c.visibility=d,{width:g,height:h}},getCoords:function(a,b){for(var c=b||!1,d=a.offsetWidth,e=a.offsetHeight,f={left:0,top:0,right:0,bottom:0};a;)if(f.left+=a.offsetLeft||0,f.top+=a.offsetTop||0,a=a.offsetParent,c&&a){if("BODY"==a.tagName)break;if("static"!==$tx.getStyle(a,"position"))break}return f.right=f.left+d,f.bottom=f.top+e,f},getCoordsTarget:function(a){return this.getCoords(a,_TRUE)}}),$tx.webkit&&($tx.cumulativeOffset=function(a){var b=0,c=0;do{if(b+=a.offsetTop||0,c+=a.offsetLeft||0,a.offsetParent==_DOC.body&&"absolute"==$tx.getStyle(a,"position"))break;a=a.offsetParent}while(a);return[c,b]})}(),function(){$tx.extend($tx,{KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,element:function(a){return $tx(a.target||a.srcElement)},isLeftClick:function(a){return a.which&&1==a.which||a.button&&1==a.button},pointerX:function(a){var b=$tx.element(a).ownerDocument||_DOC,c=b.documentElement,d=b.body;return a.pageX||a.clientX+(c&&c.scrollLeft||d&&d.scrollLeft||0)-(c&&c.clientLeft||d&&d.clientLeft||0)},pointerY:function(a){var b=$tx.element(a).ownerDocument||_DOC,c=b.documentElement,d=b.body;return a.pageY||a.clientY+(c&&c.scrollTop||d&&d.scrollTop||0)-(c&&c.clientTop||d&&d.clientTop||0)},stop:function(a){a.preventDefault?(a.preventDefault(),a.stopPropagation()):(a.returnValue=_FALSE,a.cancelBubble=_TRUE)},findElement:function(a,b){for(var c=$tx.element(a);c.parentNode&&(!c.tagName||!c.tagName.toUpperCase||c.tagName.toUpperCase()!=b.toUpperCase());)c=c.parentNode;return c},observers:_FALSE,_observeAndCache:function(a,b,c,d){this.observers||(this.observers=[]),a.addEventListener?(this.observers.push([a,b,c,d]),a.addEventListener(b,c,d)):a.attachEvent&&(this.observers.push([a,b,c,d]),a.attachEvent("on"+b,c))},simulateEvent:function(a,b,c){var d=$tx.observers;if(d)for(var e=0,f=d.length;e<f;e++){var g=d[e];g&&g[1]===b&&g[0]===a&&g[2](c)}},unloadCache:function(){if($tx.observers){for(var a=0,b=$tx.observers.length;a<b;a++)$tx.stopObserving.apply(this,$tx.observers[a]),$tx.observers[a][0]=_NULL;$tx.observers=_FALSE}},observe:function(a,b,c,d){a=$tx(a),d=d||_FALSE,"keypress"==b&&(b="keydown"),$tx._observeAndCache(a,b,c,d)},stopObserving:function(a,b,c,d){if(a=$tx(a),d=d||_FALSE,"keypress"==b&&(b="keydown"),a.removeEventListener)a.removeEventListener(b,c,d);else if(a.detachEvent)try{a.detachEvent("on"+b,c)}catch(a){}}}),$tx.msie&&$tx.observe(window,"unload",$tx.unloadCache,_FALSE)}(),function(){$tx.extend(Object,{clone:function(a){return Object.extend({},a)}}),$tx.extend($tx,{isPrimitiveType:function(a){return new $tx.Set("string","number","boolean","date","function").contains(typeof a)},deepcopy:function(a,b){var c=a;if(!b)return c;for(var d in b)switch(typeof b[d]){case"string":case"number":case"boolean":case"date":case"function":c[d]=b[d];break;default:b[d]?b[d].constructor==Array?c[d]=[].concat(b[d]):(c[d]=c[d]||{},this.deepcopy(c[d],b[d])):c[d]=_NULL}return c},defaults:function(a,b){for(var c in b)a[c]===_UNDEFINED&&(a[c]=b[c])}})}(),function(){$tx.extend(String,{interpret:function(a){return a==_NULL?"":String(a)},specialChar:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"}}),$tx.extend(String.prototype,{gsub:function(a,b){var c,d="",e=this;for(b=arguments.callee.prepareReplacement(b);e.length>0;)(c=e.match(a))?(d+=e.slice(0,c.index),d+=String.interpret(b(c)),e=e.slice(c.index+c[0].length)):(d+=e,e="");return d},strip:function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")},stripTags:function(){return this.replace(/<\/?[^>]+>/gi,"")},toQueryParams:function(a){var b=this.strip().match(/([^?#]*)(#.*)?$/);if(!b)return{};var c={},d=_NULL;return b[1].split(a||"&").each(function(a){var b=_NULL,e=_NULL,f=a.match(/([\w_]+)=(.*)/);if(f)d=b=decodeURIComponent(f[1]),f[2]&&(e=decodeURIComponent(f[2]));else{if(!d)return;b=d,e=c[b],e+="&"+decodeURIComponent(a)}b in c?(c[b].constructor!=Array&&(c[b]=[c[b]]),c[b].push(e)):c[b]=e}),c},toArray:function(){return this.split("")},times:function(a){for(var b="",c=0;c<a;c++)b+=this;return b},camelize:function(){var a=this.split("-"),b=a.length;if(1==b)return a[0];for(var c="-"==this.charAt(0)?a[0].charAt(0).toUpperCase()+a[0].substring(1):a[0],d=1;d<b;d++)c+=a[d].charAt(0).toUpperCase()+a[d].substring(1);return c},capitalize:function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()},include:function(a){return this.indexOf(a)>-1},empty:function(){return""==this},blank:function(){return/^\s*$/.test(this)}}),String.prototype.gsub.prepareReplacement=function(a){if("function"==typeof a)return a;var b=new Template(a);return function(a){return b.evaluate(a)}},$tx.extend(String.prototype,{trim:function(){return this.replace(/(^\s*)|(\s*$)/g,"")},getRegExp:function(){return this.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\//g,"\\/").replace(/\?/g,"\\?").replace(/\^/g,"\\^").replace(/\)/g,"\\)").replace(/\(/g,"\\(").replace(/\]/g,"\\]").replace(/\[/g,"\\[").replace(/\$/g,"\\$").replace(/\+/g,"\\+").replace(/\|/g,"\\|").replace(/&/g,"(&|&amp;)")},toNumber:function(){return isNaN(this)?0:parseInt(this,10)},toFloat:function(){return isNaN(this)?0:parseFloat(this)},getRealLength:function(){for(var a=this,b=0,c=0;c<a.length;c++)b+="u"==escape(a.charAt(c)).charAt(1)?2:1;return b},cutRealLength:function(a){for(var b=this,c=0,d=0;d<b.length;d++)if((c+="u"==escape(b.charAt(d)).charAt(1)?2:1)>a)return b.substring(0,d-3).concat("...");return b},getCut:function(a){return this.cutRealLength(a)},parsePx:function(){return this==_NULL||0==this.length?0:this.indexOf("px")>-1?this.substring(0,this.indexOf("px")).toNumber():this.toNumber()},toPx:function(){return this.indexOf("px")>-1?this+"":this+"px"},isPx:function(){var a=this;return""!=a.trim()&&(-1!=a.indexOf("px")&&(a=this.parsePx()),!isNaN(a))},isPercent:function(){var a=this.trim();return parseInt(a,10)+"%"===a},toByteUnit:function(){return this.toNumber().toByteUnit()},toCurrency:function(){for(var a=this,b=0;b<Math.floor((a.length-(1+b))/3);b++)a=a.substring(0,a.length-(4*b+3))+","+a.substring(a.length-(4*b+3));return a},replaceAll:function(a,b){return a=a.replace(new RegExp("(\\W)","g"),"\\$1"),b=b.replace(new RegExp("\\$","g"),"$$$$"),this.replace(new RegExp(a,"gm"),b)},underscore:function(){return this.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/-/g,"_").toLowerCase()}})}(),function(){$tx.extend(Number.prototype,{toPaddedString:function(a,b){var c=this.toString(b||10);return"0".times(a-c.length)+c},toTime:function(){return Math.floor(this/60).toString().toPaddedString(2)+":"+(this%60).toString().toPaddedString(2)},toByteUnit:function(){var a,b=["GB","MB","KB"];if(0==this)return"0"+b[2];for(var c=0;c<b.length;c++)if(!((a=this/Math.pow(1024,3-c))<1))return Math.round(10*a)/10+b[c];return"1"+b[2]},toPx:function(){return this.toString()+"px"},parsePx:function(){return this+0},isPx:function(){return _TRUE},toNumber:function(){return this+0},toCurrency:function(){return this.toString().toCurrency()},getRegExp:function(){return this.toString().getRegExp()}})}(),function(){$tx.extend(Array.prototype,{each:function(a){if(_WIN.DEBUG)for(var b=0,c=this.length;b<c;b++)a(this[b]);else try{for(var b=0,c=this.length;b<c;b++)a(this[b])}catch(a){if(a!=$break)throw a}return this},indexOf:function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return b;return-1},include:function(a){return this.contains(a)},contains:function(a){return this.indexOf(a)>=0},pluck:function(a){var b=[];return this.each(function(c){b.push(c[a])}),b},find:function(a){for(var b=0,c=this.length;b<c;b++){var d=this[b];if(a(d,b))return d}return _NULL},findAll:function(a){for(var b=[],c=0,d=this.length;c<d;c++){var e=this[c];a(e,c)&&b.push(e)}return b},inject:function(a,b){for(var c=0,d=this.length;c<d;c++){a=b(a,this[c],c)}return a},without:function(){var a=$A(arguments);return this.findAll(function(b){return!a.include(b)})},last:function(){return this[this.length-1]},flatten:function(){return this.inject([],function(a,b){return a.concat(b&&b.constructor==Array?b.flatten():[b])})},compact:function(){return this.findAll(function(a){return a!=_NULL&&""!=a})},uniq:function(a){return this.inject([],function(b,c,d){return 0!=d&&(a?b.last()==c:b.contains(c))||b.push(c),b})},toMap:function(a){var b={};return this.each(function(c){b[c[a]]=c}),b}}),Array.prototype.map||(Array.prototype.map=function(a,b){for(var c=[],d=0,e=this.length;d<e;++d)c[d]=b?a.call(b,this[d],d,this):a(this[d],d,this);return c}),Array.prototype.select=Array.prototype.findAll,Array.prototype.detect=Array.prototype.find,_WIN.$A=function(a){if(!a)return[];if("function"==typeof a.toArray)return a.toArray();for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b},$tx.Set=function(){for(var a=arguments,b=0,c=a.length;b<c;b++)this[a[b]]=_TRUE},$tx.Set.prototype.contains=function(a){return a in this},$tx.objectToQueryString=function(a){var b=[];for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];d!==_NULL&&d!==_UNDEFINED||(d=""),b.push(encodeURIComponent(c)+"="+encodeURIComponent(d))}return b.join("&")}}(),function(){if(typeof HTMLElement!=_UNDEFINED+""){var a=HTMLElement.prototype,b=a.__proto__={__proto__:a.__proto__};HTMLElement.prototype.__defineSetter__&&b.__defineSetter__("innerText",function(a){this.textContent=a}),HTMLElement.prototype.__defineGetter__&&b.__defineGetter__("innerText",function(){return this.textContent})}if(typeof XMLDocument!=_UNDEFINED+""){var c=XMLDocument;c.prototype.__defineGetter__&&c.prototype.__defineGetter__("xml",function(){return(new XMLSerializer).serializeToString(this)})}if(typeof Node!=_UNDEFINED+""&&Node.prototype&&Node.prototype.__defineGetter__&&Node.prototype.__defineGetter__("xml",function(){return(new XMLSerializer).serializeToString(this)}),typeof _DOC.implementation!=_UNDEFINED+""&&_DOC.implementation.hasFeature("XPath","3.0")&&(typeof c!=_UNDEFINED+""&&(c.prototype.selectNodes=function(a,b){b||(b=this);for(var c=this.defaultNS,d=this.evaluate(a,b,{normalResolver:this.createNSResolver(this.documentElement),lookupNamespaceURI:function(a){switch(a){case"dflt":return c;default:return this.normalResolver.lookupNamespaceURI(a)}}},XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,_NULL),e=[],f=0;f<d.snapshotLength;f++)e[f]=d.snapshotItem(f);return e},c.prototype.setProperty=function(a,b){"SelectionNamespaces"==a&&0==b.indexOf("xmlns:dflt")&&(this.defaultNS=b.replace(/^.*=\'(.+)\'/,"$1"))},c.prototype.defaultNS,c.prototype.selectSingleNode=function(a,b){b||(b=this);var c=this.selectNodes(a,b);return c.length>0?c[0]:_NULL},c.prototype.createNode=function(a,b,c){return 1==a?this.createElementNS(c,b):_NULL}),typeof Element!=_UNDEFINED+"")){Element.prototype.selectNodes=function(a){if(this.ownerDocument.selectNodes)return this.ownerDocument.selectNodes(a,this);throw"For XML Elements Only"},Element.prototype.selectSingleNode=function(a){if(this.ownerDocument.selectSingleNode)return this.ownerDocument.selectSingleNode(a,this);throw"For XML Elements Only"},Element.prototype.text;var d=Element.prototype,e=d.__proto__={__proto__:d.__proto__};Element.prototype.__defineSetter__&&e.__defineSetter__("text",function(a){this.textContent=a}),Element.prototype.__defineGetter__&&e.__defineGetter__("text",function(){return this.textContent}),_WIN.origElement&&(_WIN.origElement.prototype.selectNodes=Element.prototype.selectNodes,_WIN.origElement.prototype.selectSingleNode=Element.prototype.selectSingleNode)}}(),_WIN.$tx=$tx,_WIN.tx={},_WIN.installHyperscript=function(a,b){each("a big blockquote br b center code dd dl dt div em font form h1 h2 h3 h4 h5 h6 hr img iframe input i li ol option pre p script select small span strike strong style sub sup table tbody td textarea tr ul u".split(" "),function(c){a[c]=function(){var a=b.createElement(c);return each(arguments,function(b){if(b.nodeType)a.appendChild(b);else if("string"==typeof b||"number"==typeof b)"textarea"==c?$tx.msie?a.value+=b:a.text+=b:a.innerHTML+=b;else if("array"==typeof b)for(var d=0;d<b.length;d++)a.appendChild(b[d]);else for(var e in b)if("style"==e)for(var f in b[e])"float"==f||"cssFloat"==f?a[e][a[e].styleFloat===_UNDEFINED?"cssFloat":"styleFloat"]=b[e][f]:a[e][f]=b[e][f];else["more","less","longDesc"].contains(e)?a.setAttribute&&a.setAttribute(e,b[e]):["colSpan","rowSpan","cellPadding","cellSpacing"].contains(e)?a.setAttribute&&a.setAttribute(e,b[e]):b[e]&&(a[e]=b[e])}),a}})},installHyperscript(_WIN.tx,_DOC),function(){function a(b,c){return b?(c.indexOf("{if:")>-1&&(c=c.replace(/#\{if:([_\w]+)([=><!]+)([_'"\-\w]+)\}([\s\S]*?)#\{\/if:\1\}/gm,function(c,d,e,f,g){if(b[d]==_NULL)return c;var h=_FALSE;try{e="="==e?"==":e;var i='"'+(b[d]+"").replace(/['"]/g,"")+'"',j='"'+f.replace(/['"]/g,"")+'"';h=txEval("("+i+e+j+")")}catch(a){h=_FALSE}return h?a(b,g):""})),c.indexOf("{for:")>-1&&(c=c.replace(/#\{for:([_\w]+):?(\d*):?(\d*)\}([\s\S]*?)#\{\/for:\1\}/gm,function(c,d,e,f,g){if(!b[d]||!b[d].length)return c;var h=b[d],i=[];e=e?isNaN(e)?h.length:parseInt(e):h.length,f=f?isNaN(f)?0:parseInt(f):0;for(var j=0,k=Math.min(h.length,e);j<k;j++)i.push(a(h[j],g));return i.join("").substring(f)})),c.replace(/#\{([_\w]+)\}/g,function(a,c){return b[c]!=_NULL?b[c]:a})):""}(_WIN.Template=function(a){this.template=a}).prototype={evaluate:function(b){return a(b,this.template)},evaluateToDom:function(b,c){"string"==typeof c&&(c=_DOC.getElementById(c)),c.innerHTML=a(b,this.template)},evaluateAsDom:function(b,c){var d=(c||document).createElement("div");return d.innerHTML=a(b,this.template),d.firstChild}}}(),function(){var a,b,c,d={"#":function(c,d){if((a=/(\S*)#(\S+)/.exec(d))!==_NULL){var e=a[1],f=a[2];if(c.getElementById||(c=c.ownerDocument),(b=c.getElementById(f))&&(e.length<1||b.nodeName.toLowerCase()==e))return[b]}return[]},".":function(b,d){if((a=/(\S*)\.(\S+)/.exec(d))!==_NULL){var e=""===a[1]?"*":a[1],f=a[2];if((c=b.getElementsByTagName(e)).length>0){for(var g=[],h=0;h<c.length;h++){var i=c[h];new RegExp("(^| )"+f+"($| )").test(i.className)&&g.push(i)}return g}}return[]},"*":function(a,b){if((c=a.getElementsByTagName(b)).length>0){for(var d=[],e=0;e<c.length;e++)d.push(c[e]);return d}return[]}},e=function(a,b){if(a.length<1)return[];var c;(f=/(\.|#)/.exec(b))!==_NULL&&d[f[1]]&&(c=f[1]),c=c||"*";for(var e=[],g=0;g<a.length;g++)e=e.concat(d[c](a[g],b));return e},g=function(a,b){for(var c=[a],d=b.split(" "),f=0;f<d.length;f++)c=e(c,d[f]);return c},h=function(a,b,c){if(c=!!c,1!==a.nodeType&&9!==a.nodeType)return c?[]:_NULL;if(!b||"string"!=typeof b)return c?[]:_NULL;for(var d,e=[],f=b.split(","),h=0;h<f.length&&(!((d=g(a,f[h]))&&d.length>0)||(e=e.concat(d),c));h++);return c?e:e[0]};_WIN.dGetty=function(){var a=arguments;if(1==a.length){if("string"==typeof a[0])return h(_DOC,a[0])}else if(2==a.length&&a[0].nodeType&&"string"==typeof a[1])return h(a[0],a[1]);return _NULL},_WIN.dGetties=function(){var a=arguments;if(1==a.length){if("string"==typeof a[0])return h(_DOC,a[0],_TRUE)}else if(2==a.length&&a[0].nodeType&&"string"==typeof a[1])return h(a[0],a[1],_TRUE);return[]}}(),function(){var a,b={"#":function(b,c){if((a=/(\S*)#(\S+)/.exec(c))!==_NULL){var d=a[1],e=a[2];if((d.length<1||b.nodeName.toLowerCase()==d)&&b.id==e)return _TRUE}return _FALSE},".":function(b,c){if((a=/(\S*)\.(\S+)/.exec(c))!==_NULL){var d=a[1],e=a[2];if((d.length<1||b.nodeName.toLowerCase()==d)&&b.className.indexOf(e)>-1)return _TRUE}return _FALSE},"*":function(a,b){var c=b;return a.nodeName.toLowerCase()==c?_TRUE:_FALSE}},c=function(a,c){var d;return(f=/(\.|#)/.exec(c))!==_NULL&&b[f[1]]&&(d=f[1]),d=d||"*",b[d](a,c)},d=function(a,b){if(1!==a.nodeType)return _FALSE;for(var d=_FALSE,e=b.split(","),f=0;f<e.length&&!(d=c(a,e[f]));f++);return d};_WIN.dChecky=function(){var a=arguments;return 2==a.length&&a[0].nodeType&&"string"==typeof a[1]?d(a[0],a[1]):_FALSE}}(),function(){var a=function(a){return this.selectSingleNode=function(b){return a?a.selectSingleNode(b):_NULL},this.selectNodes=function(b){return a?a.selectNodes(b):[]},this.getAttributeNode=function(b){return a?a.getAttributeNode(b):_NULL},this.hasChildNodes=function(){return a?a.hasChildNodes():_FALSE},this.text=a?a.textContent||a.text:_NULL,this.type=a?a.nodeType:0,this.name=a&&1==a.nodeType?a.nodeName||"":"",this};a.prototype={getValueOrDefault:function(a,b){return""===a?b:"number"==typeof b?isNaN(a)?0:parseInt(a):"boolean"==typeof b?!!a:a},xText:function(a){a=a||"";var b=this.text;return b=(b||"").trim(),this.getValueOrDefault(b,a)},xAttr:function(a,b){b=b||"";var c=this.getAttributeNode(a),d=c?c.nodeValue.trim():"";return this.getValueOrDefault(d,b)},xGet:function(a){return xGetty(this,a)},xGets:function(a){return xGetties(this,a)}};var b=["MSXML2.DOMDocument.6.0","MSXML2.DOMDocument.5.0","MSXML2.DOMDocument.4.0","MSXML4.DOMDocument","MSXML3.DOMDocument","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XmlDom"];_WIN.xCreate=function(c){if($tx.msie){var d=function(){for(var a=_NULL,c=0;c<b.length;c++){try{a=new ActiveXObject(b[c])}catch(a){}if(a!==_NULL)return a}return _NULL}();return d===_NULL?_NULL:(d.async=_FALSE,d.loadXML(c),0!==d.parseError.errorCode?_NULL:new a(d))}var e=new DOMParser,d=e.parseFromString(new String(c),"text/xml");return new a(d)},_WIN.xGetty=function(b,c){return b===_NULL?_NULL:new a(b.selectSingleNode(c))},_WIN.xGetties=function(b,c){if(b===_NULL)return[];for(var d=[],e=b.selectNodes(c),f=0,g=e.length;f<g;f++)d.push(new a(e[f]));return d}}(),function(){var a;try{a=top}catch(b){a=_WIN}var b,c=function(){var a=_DOC.createElement("div");a.style.width="100px",a.style.height="100px",a.style.overflow="scroll",a.style.position="absolute",a.style.top="-9999px",_DOC.body.appendChild(a);var b=a.offsetWidth-a.clientWidth,c=a.offsetHeight-a.clientHeight;return _DOC.body.removeChild(a),{width:b,height:c}},d=function(){if(!$tx.msie)return{left:0,top:0};var b=_WIN.screenLeft?_WIN.screenLeft:_WIN.screenX,c=_WIN.screenTop?_WIN.screenTop:_WIN.screenY;a.moveTo(0,0);var d=_WIN.screenLeft?_WIN.screenLeft:_WIN.screenX,e=_WIN.screenTop?_WIN.screenTop:_WIN.screenY;return a.moveTo(b-d,c-e),{left:d,top:e}},e=function(){var e=_DOC.documentElement,f=_WIN.screen.availHeight,g=_WIN.screen.availWidth,h=c(),i=d();this.resize=function(c){$tx.msie&&(_DOC.body.scroll="no");var d=_WIN.screenLeft?_WIN.screenLeft:_WIN.screenX,j=_WIN.screenTop?_WIN.screenTop:_WIN.screenY,k=0,l=0;if(0===a.outerHeight)return void setTimeout(function(){b.resize(c)},100);if(a.outerHeight)l=a.outerWidth-a.innerWidth,k=a.outerHeight-a.innerHeight;else{if(!e.clientWidth)throw"browser does not support";var m=e.clientWidth,n=e.clientHeight;a.resizeTo(m,n);var o=e.clientWidth,p=e.clientHeight;l=m-o,k=n-p}var q=c.clientWidth+l,r=c.clientHeight+k;q>g&&($tx.msie&&(_DOC.body.scroll="yes"),q=g,r+=h.height),r>f&&($tx.msie&&(_DOC.body.scroll="yes"),r=f,(q+=h.width)>g&&(q=g)),q+d>g&&(d=0),r+j>f&&(j=0),a.moveTo(d-i.left,j-i.top),a.resizeTo(q,r)}};_WIN.resizeHeight=function(a,c){b||(b=new e(0)),b.resize(c)}}();var Trex={__WORD_JOINER:"\ufeff",__WORD_JOINER_REGEXP:/\ufeff/g,__KEY:{ENTER:"13",DELETE:"46",SPACE:"32",BACKSPACE:"8",TAB:"9",PASTE:"86",CUT:"88"},I:{},X:{},define:function(a,b){return Object.extend(a,b)},available:function(a,b){return $tx("tx_"+b)&&a?a.use==_FALSE?_FALSE:_TRUE:_FALSE}};!function(a){function b(a){for(var b=a;b.$reference;)b=b.$reference;return b}function c(a){var c=a.constructor.superclass;if(c){var d=c.prototype.initialize;c.prototype.initialize=function(){this.$reference=a};var e=new c;c.prototype.initialize=d;var f={};for(var g in e)"$"!=g.charAt(0)&&"function"==typeof e[g]&&(f[g]=function(c){return e[c]?function(){var d=arguments,f=b(a),g=f.$super;f.$super=e.$super;var h=e[c].apply(f,d);return f.$super=g,h}:_NULL}(g));a.$super=f}}a.Class={create:function(b){var d=function(){var a=this.constructor.prototype;for(var b in a)a[b]&&"object"==typeof a[b]&&(a[b].constructor==Array?this[b]=[].concat(a[b]):this[b]=Object.extend({},a[b]));c(this);var d=arguments;this.initialize.apply(this,d)};return a.Class.draft(b,d)},draft:function(a,b){var d=b||function(){c(this)};if(a.$const&&Object.extend(d,a.$const),a.$extend&&(Object.extend(d.prototype,a.$extend.prototype),d.superclass=a.$extend),a.$mixins){$A(a.$mixins).each(function(a){Object.extend(d.prototype,a)})}for(var e in a)"$"!=e.charAt(0)&&(d.prototype[e]=a[e]);return d},overwrite:function(a,b){return a.prototype&&Object.extend(a.prototype,b),a}},a.Mixin=a.Faculty={create:function(a){var b={};for(var c in a)a[c]&&"object"==typeof a[c]?a[c].constructor==Array?b[c]=[].concat(a[c]):b[c]=Object.extend({},a[c]):b[c]=a[c];return b},toClass:function(b,c){return a.Class.create(Object.extend({initialize:c||function(){}},b))}}}(Trex),function(a){Object.extend(a,{installs:[],registers:[],modules:[],modulesX:[],install:function(b,c){c.desc="[install] "+b,a.installs.push(c)},register:function(b,c){c.desc="[register] "+b,a.registers.push(c)},module:function(b,c){c.desc="[module] "+b,a.modules.push(c)},moduleX:function(b,c){c.desc="[moduleX] "+b,a.modulesX.push(c)},invoke:function(a,b,c,d,e,f){for(var g=0,h=a.length;g<h;g++){(0,a[g])(b,c,d,e,f)}},invokeInstallation:function(b,c,d,e,f){a.invoke(a.installs,b,c,d,e,f)},invokeRegisters:function(b,c,d,e,f){a.invoke(a.registers,b,c,d,e,f)},invokeModules:function(b,c,d,e,f){a.invoke(a.modules,b,c,d,e,f)},group:function(){},groupEnd:function(){}})}(Trex),_WIN.Trex=Trex;var textboxOption=function(a,b,c,d){return{data:a,style:{padding:b,backgroundColor:c,border:d}}};Trex.__CONFIG_COMMON={thumbs:{options:[{color:"#FF0000"},{color:"#FF5E00"},{color:"#FFBB00"},{color:"#FFE400"},{color:"#ABF200"},{color:"#1FDA11"},{color:"#00D8FF"},{color:"#0055FF"},{color:"#0900FF"},{color:"#6600FF"},{color:"#FF00DD"},{color:"#FF007F"},{color:"#000000"},{color:"#FFFFFF"},{color:"#FFD8D8"},{color:"#FAE0D4"},{color:"#FAECC5"},{color:"#FAF4C0"},{color:"#E4F7BA"},{color:"#CEFBC9"},{color:"#D4F4FA"},{color:"#D9E5FF"},{color:"#DAD9FF"},{color:"#E8D9FF"},{color:"#FFD9FA"},{color:"#FFD9EC"},{color:"#F6F6F6"},{color:"#EAEAEA"},{color:"#FFA7A7"},{color:"#FFC19E"},{color:"#FFE08C"},{color:"#FAED7D"},{color:"#CEF279"},{color:"#B7F0B1"},{color:"#B2EBF4"},{color:"#B2CCFF"},{color:"#B5B2FF"},{color:"#D1B2FF"},{color:"#FFB2F5"},{color:"#FFB2D9"},{color:"#D5D5D5"},{color:"#BDBDBD"},{color:"#F15F5F"},{color:"#F29661"},{color:"#F2CB61"},{color:"#E5D85C"},{color:"#BCE55C"},{color:"#86E57F"},{color:"#5CD1E5"},{color:"#6699FF"},{color:"#6B66FF"},{color:"#A366FF"},{color:"#F261DF"},{color:"#F261AA"},{color:"#A6A6A6"},{color:"#8C8C8C"},{color:"#CC3D3D"},{color:"#CC723D"},{color:"#CCA63D"},{color:"#C4B73B"},{color:"#9FC93C"},{color:"#47C83E"},{color:"#3DB7CC"},{color:"#4174D9"},{color:"#4641D9"},{color:"#7E41D9"},{color:"#D941C5"},{color:"#D9418D"},{color:"#747474"},{color:"#5D5D5D"},{color:"#980000"},{color:"#993800"},{color:"#997000"},{color:"#998A00"},{color:"#6B9900"},{color:"#2F9D27"},{color:"#008299"},{color:"#003399"},{color:"#050099"},{color:"#3D0099"},{color:"#990085"},{color:"#99004C"},{color:"#4C4C4C"},{color:"#353535"},{color:"#670000"},{color:"#662500"},{color:"#664B00"},{color:"#665C00"},{color:"#476600"},{color:"#22741C"},{color:"#005766"},{color:"#002266"},{color:"#030066"},{color:"#290066"},{color:"#660058"},{color:"#660033"},{color:"#212121"},{color:"#000000"}],transparent:{color:"transparent",border:"#999999",image:"#iconpath/ic_transparent4.gif?open&v=2",thumb:"#iconpath/txt_transparent.gif?open&v=2",thumbImage:"#iconpath/color_transparent_prev.gif?open&v=2"}},textbox:{options:[textboxOption("txc-textbox1","10px","#ffffff","1px solid #f7f7f7"),textboxOption("txc-textbox2","10px","#eeeeee","1px solid #eeeeee"),textboxOption("txc-textbox3","10px","#fefeb8","1px solid #fefeb8"),textboxOption("txc-textbox4","10px","#fedec7","1px solid #fedec7"),textboxOption("txc-textbox5","10px","#e7fdb5","1px solid #e7fdb5"),textboxOption("txc-textbox6","10px","#dbe8fb","1px solid #dbe8fb"),textboxOption("txc-textbox7","10px","#ffffff","1px dashed #cbcbcb"),textboxOption("txc-textbox8","10px","#eeeeee","1px dashed #c1c1c1"),textboxOption("txc-textbox9","10px","#fefeb8","1px dashed #f3c534"),textboxOption("txc-textbox10","10px","#fedec7","1px dashed #fe8943"),textboxOption("txc-textbox11","10px","#e7fdb5","1px dashed #9fd331"),textboxOption("txc-textbox12","10px","#dbe8fb","1px dashed #79a5e4"),textboxOption("txc-textbox13","10px","#ffffff","1px solid #cbcbcb"),textboxOption("txc-textbox14","10px","#eeeeee","1px solid #c1c1c1"),textboxOption("txc-textbox15","10px","#fefeb8","1px solid #f3c534"),textboxOption("txc-textbox16","10px","#fedec7","1px solid #fe8943"),textboxOption("txc-textbox17","10px","#e7fdb5","1px solid #9fd331"),textboxOption("txc-textbox18","10px","#dbe8fb","1px solid #79a5e4"),textboxOption("txc-textbox19","10px","#ffffff","3px double #cbcbcb"),textboxOption("txc-textbox20","10px","#eeeeee","3px double #c1c1c1"),textboxOption("txc-textbox21","10px","#fefeb8","3px double #f3c534"),textboxOption("txc-textbox22","10px","#fedec7","3px double #fe8943"),textboxOption("txc-textbox23","10px","#e7fdb5","3px double #9fd331"),textboxOption("txc-textbox24","10px","#dbe8fb","3px double #79a5e4")]}};var TrexConfig=function(){var a=_FALSE,b=[],c={},d={cdnHost:"//s1.daumcdn.net/editor",cmnHost:"http://editor.daum.net",wrapper:"tx_trex_container",form:"tx_editor_form",txIconPath:"images/icon/editor/",txDecoPath:"images/deco/contents/",params:[],events:{preventUnload:_TRUE,useHotKey:_TRUE},save:{},adaptor:{},toolbar:{},sidebar:{attachbox:{},embeder:{},attacher:{},searcher:{}},plugin:{}},e=function(b,d){if(a)throw new Error("configure is already setup (addParameter)");c[b]=d},f={getUrl:function(a,b){if("string"!=typeof a)return a;var e=_WIN.EditorJSLoader||opener&&opener.EditorJSLoader||PopupUtil&&PopupUtil.getOpener().EditorJSLoader
;a=a.replace(/#host#path\/pages\//g,e.getPageBasePath()),a=a.replace(/#host/g,d.txHost),a=a.replace(/#path\/?/g,d.txPath),a=a.replace(/#cdnhost/g,d.cdnHost),a=a.replace(/#cmnhost/g,d.cmnHost);for(var f in c)a=a.replace(new RegExp("#".concat(f),"g"),d[c[f]]);if(b)for(var g in b)a=a.replace(new RegExp("#".concat(g),"g"),b[g]);return a},getPopFeatures:function(a){if(a==_NULL)return _NULL;if("string"==typeof a)return a;var b=[];return["toolbar","location","directories","menubar"].each(function(c){b.push(c+"="+(a[c]||"no"))}),["scrollbars","resizable"].each(function(c){b.push(c+"="+(a[c]||"yes"))}),["width","height"].each(function(c){b.push(c+"="+(a[c]||"500"))}),["left","top"].each(function(c){b.push(c+"="+(a[c]||"100"))}),b.join(",")},getDecoPath:function(a){return a.replace(/#decopath\/?/,this.getUrl(d.txDecoPath))},getIconPath:function(a){return a.replace(/#iconpath\/?/,this.getUrl(d.txIconPath))},setup:function(c){return $tx.deepcopy(d,c),d.params.each(function(a){e(a,a)}),b.each(function(a){a(d)}),a=_TRUE,this.setupVersion(),d},setupVersion:function(){d.txVersion=Editor.version},addParameter:function(a,b){e(a,b)},clone:function(a){return $tx.deepcopy({},a)},merge:function(){var a={};return $A(arguments).each(function(b){$tx.deepcopy(a,b)}),a}};f.add=function(c,e){if(a)throw new Error("configure is already setup (mergeConfig)");$tx.deepcopy(d,c),e&&b.push(e)},f.get=function(a){return d[a]};var g=function(c,d,e){if(a)throw new Error("configure is already setup (mergeConfig)");this[c]=this[c]||{},$tx.deepcopy(this[c],d),e&&b.push(e)},h=function(a){return this[a]},i=function(){return{Tool:d.toolbar,Sidebar:d.sidebar,Plugin:d.plugin,Adaptor:d.adaptor,Save:d.save,Attacher:d.sidebar.attacher,Embeder:d.sidebar.embeder,Searcher:d.sidebar.searcher}}();for(var j in i)f["add"+j]=g.bind(i[j]),f["get"+j]=h.bind(i[j]);return f}();_WIN.TrexConfig=TrexConfig,function(a){a.Ev={__EDITOR_PANEL_MOUSEDOWN:"editor.panel.mousedown",__EDITOR_LOAD_DATA_BEGIN:"editor.load.data.begin",__EDITOR_LOAD_DATA_END:"editor.load.data.end",__CANVAS_PANEL_KEYDOWN:"canvas.panel.keydown",__CANVAS_PANEL_KEYUP:"canvas.panel.keyup",__CANVAS_PANEL_MOUSEDOWN:"canvas.panel.mousedown",__CANVAS_PANEL_MOUSEUP:"canvas.panel.mouseup",__CANVAS_PANEL_MOUSEOVER:"canvas.panel.mouseover",__CANVAS_PANEL_MOUSEOUT:"canvas.panel.mouseout",__CANVAS_PANEL_MOUSEMOVE:"canvas.panel.mousemove",__CANVAS_PANEL_CLICK:"canvas.panel.click",__CANVAS_PANEL_DBLCLICK:"canvas.panel.dbclick",__CANVAS_PANEL_PASTE:"canvas.panel.paste",__CANVAS_PANEL_SCROLLING:"canvas.panel.scrolling",__IFRAME_LOAD_COMPLETE:"iframe.load.complete",__IFRAME_LOADING_TIME:"iframe.loading.time",__CANVAS_SOURCE_PANEL_CLICK:"canvas.source.panel.click",__CANVAS_SOURCE_PANEL_KEYDOWN:"canvas.source.panel.mousedown",__CANVAS_SOURCE_PANEL_MOUSEDOWN:"canvas.source.panel.mousedown",__CANVAS_TEXT_PANEL_CLICK:"canvas.text.panel.click",__CANVAS_MODE_CHANGE:"canvas.mode.change",__CANVAS_FULL_SCREEN_CHANGE:"canvas.fullscreen.change",__CANVAS_NORMAL_SCREEN_CHANGE:"canvas.normalscreen.change",__TOOL_CLICK:"toolbar.button.click",__TOOL_SHORTCUT_KEY:"toolbar.shortcut",__ON_SUBMIT:"editor.submit",__CANVAS_WRAP_WIDTH_CHANGE:"canvas.wrap.width.change",__CANVAS_HEIGHT_CHANGE:"canvas.height.change",__CANVAS_PANEL_QUERY_STATUS:"canvas.panel.style.change",__CANVAS_PANEL_DELETE_SOMETHING:"canvas.panel.delkey.press",__ENTRYBOX_ENTRY_ADDED:"entrybox.entryadded",__CANVAS_PANEL_BACKSPACE_TABLE:"canvas.panel.backspace.table",__ENTRYBOX_ENTRY_MODIFIED:"entrybox.entrymodified",__ENTRYBOX_ENTRY_REMOVED:"entrybox.entryremoved",__ENTRYBOX_ALL_ENTRY_REMOVED:"entrybox.removed.all.perfectly",__ENTRYBOX_CAPACITY_UPDATE:"entrybox.capacity.update",__ATTACHBOX_SHOW:"attachbox.show",__ATTACHBOX_HIDE:"attachbox.hide",__ATTACHBOX_FULLSCREEN_SHOW:"attachbox.fullscreen.show",__ATTACHBOX_FULLSCREEN_HIDE:"attachbox.fullscreen.hide",__CANVAS_BEFORE_UNLOAD:"canvas.unload",__CANVAS_ENTRY_ADDED:"canvas.entry.added",__COMMAND_NODE_ADDED:"cmd.entry.added",__CMD_ALIGN_LEFT:"align.left",__CMD_ALIGN_CENTER:"align.center",__CMD_ALIGN_RIGHT:"align.right",__CMD_ALIGN_FULL:"align.full",__CMD_ALIGN_IMG_LEFT:"align.img.left",__CMD_ALIGN_IMG_CENTER:"align.img.center",__CMD_ALIGN_IMG_FLOAT_LEFT:"align.img.floatleft",__CMD_ALIGN_IMG_FLOAT_RIGHT:"align.img.floatright",__CMD_ADVANCED_FOLD:"toolbar.advanced.fold",__CMD_ADVANCED_SPREAD:"toolbar.advanced.spread",__TOOL_CELL_LINE_CHANGE:"tool.cell.line.change",__CANVAS_MODE_INITIALIZE:"canvas.mode.initialize",__CANVAS_DATA_INITIALIZE:"canvas.load.data",__ENTRYBOX_ENTRY_REFRESH:"entrybox.entryrefresh",__PASTE_SEARCHRESULT:"trex.paste.info",__RUNTIME_EXCEPTION:"editor.runtime.exception",__REPORT_TO_MAGPIE:"editor.report.magpie",__SHOULD_CLOSE_MENUS:"editor.shouldclosemenus",__CANVAS_IMAGE_PLACEHOLDER_DBLCLICK:"canvas.image.placeholder.dbclick",__MENU_LAYER_SHOW:"menu.layer.show",__MENU_LAYER_HIDE:"menu.layer.hide",__MENU_LAYER_CHANGE_SIZE:"menu.layer.change.size"}}(Trex);var TrexEvent={fire:function(a,b){if(a&&a.tagName){var c=b[a.tagName.toLowerCase()];c?c(a,b):TrexEvent.propagateToParent(a,b)}},propagateToParent:function(a,b){var c=a.parentNode;if(c&&c.tagName&&c.tagName.toLowerCase){var d=b[c.tagName.toLowerCase()];d?d(c,b):TrexEvent.propagateToParent(c,b)}},stopPropagation:function(){}};Trex.MarkupTemplate={},function(){var a={};Trex.define(Trex.MarkupTemplate,{add:function(b,c){a[b]=c},get:function(b){if(!a[b])return{evaluate:function(){return""},evaluateToDom:function(){return""}};if("string"==typeof a[b]){var c=a[b].replace(/@[\w\.]+/g,function(a){return TXMSG(a)});a[b]=new Template(c)}return a[b]},splitList:function(a,b,c){for(var d={row:[]},e=c.length,f=d.row,g=0;g<a;g++){f.push({col:[]});for(var h=f.last().col,i=0;i<b;i++){var j={image:"",data:"&nbsp;",klass:""};g*b+i<e&&("string"==typeof c[g*b+i]?j.data=c[g*b+i]:j=Object.extend(j,c[g*b+i])),h.push(j)}}return d}})}();var $tom={};if(function(){function a(a){var b={};return a.split(",").each(function(a){if(c[a])for(var d in c[a])b[d]=_TRUE;else b[a]=_TRUE}),b}var b={"%body":["body"],"%text":["#text","br"],"%element":["#element"],"%control":["img","object","hr","table","button","iframe"],"%inline":["span","font","u","i","b","em","strong","big","small","a","sub","sup","span"],"%block":["p","div","ul","ol","h1","h2","h3","h4","h5","h6","pre","dl","hr","table","button"],"%paragraph":["p","li","dd","dt","h1","h2","h3","h4","h5","h6","td","th","div","caption"],"%wrapper":["div","ul","ol","dl","pre","xmp","table","button","blockquote"],"%innergroup":["li","dd","dt","td","th"],"%outergroup":["ul","ol","dl","tr","tbody","thead","tfoot","table"],"%tablegroup":["td","th","tr","tbody","thead","tfoot","table"],"%listgroup":["li","ul","ol"],"%datagroup":["dd","dt","dl"],"%listhead":["ul","ol"]},c={};for(var d in b)c[d]={},b[d]&&$A(b[d]).each(function(a){c[d][a]=_TRUE});var e=Trex.Class.create({initialize:function(b){this.patterns=b,this.map=a(b)},hasParts:function(){return this.patterns.length>0},include:function(b){var c=a(b);for(var d in c)if(this.map[d])return _TRUE;return _FALSE},memberOf:function(b){var c=a(b);for(var d in this.map)if(c[d])return _TRUE;return _FALSE},extract:function(b){var c=a(b),d=[];for(var e in this.map)c[e]&&d.push(e);return $tom.translate(d.join(","))},getExpression:function(){if(!this.exprs){var a=[];for(var b in this.map)a.push(b);this.exprs=a.join(",")}return this.exprs}}),f={};Object.extend($tom,{translate:function(a){return f[a]||(f[a]=new e(a)),f[a]}})}(),Object.extend($tom,{__POSITION:{__START_OF_TEXT:-1,__MIDDLE_OF_TEXT:0,__END_OF_TEXT:1,__EMPTY_TEXT:-2}}),Object.extend($tom,{isElement:function(a){return a&&1==a.nodeType},isBody:function(a){return $tom.isElement(a)&&"BODY"==a.tagName},isBlock:function(a){return $tom.kindOf(a,"%block")},isParagraph:function(a){return $tom.kindOf(a,"%paragraph")},isText:function(a){return $tom.kindOf(a,"%text")},isControl:function(a){return $tom.kindOf(a,"%control")},isTagName:function(a,b){return b=b.toUpperCase(),a&&a.tagName===b},getOwnerDocument:function(a){return a.ownerDocument||a.document},getName:function(a){return a&&1==a.nodeType?a.nodeName.toLowerCase():""},getText:function(a){return a.textContent||a.text||a.innerText||""},getLength:function(a){return a?1==a.nodeType?a.childNodes.length:3==a.nodeType?a.nodeValue.length:0:0},indexOf:function(a){if(!a)return-1;for(var b=a.parentNode,c=0,d=b.childNodes.length,e=b.childNodes;c<d;c++)if(e[c]==a)return c;return-1},hasContent:function(a,b){if(!a||3!=a.nodeType)return _TRUE;var c=$tom.removeMeaninglessSpace(a.nodeValue);return b&&(c=c.replace(Trex.__WORD_JOINER_REGEXP,"")),""!=c},removeEmptyTextNode:function(a){a&&3==a.nodeType&&!a.nodeValue&&$tom.remove(a)},hasUsefulChildren:function(a,b){if(!a)return _FALSE;var c=$tom.removeMeaninglessSpace(a.innerHTML);return b&&(c=c.replace(Trex.__WORD_JOINER_REGEXP,"")),c?c.stripTags()?_TRUE:c.search(/<(img|br|hr)\s?[^>]*>/i)>-1?_TRUE:c.search(/<span\sid="?tx_(start|end)_marker"?><\/span>/i)>-1?_TRUE:_FALSE:_FALSE},hasData:function(a,b){if(!a)return _FALSE;var c="";return c=1==a.nodeType?a.innerHTML:a.nodeValue,c=$tom.removeMeaninglessSpace(c),""==c.trim()?_FALSE:""!=c.stripTags()?_TRUE:b?_FALSE:c.search(/<br\s?\/?>/i)>-1?_TRUE:_FALSE},removeMeaninglessSpace:function(a){return a.replace(/(^[\f\n\r\t\v\u2028\u2029]*)|([\f\n\r\t\v\u2028\u2029]*$)/g,"")}}),Object.extend($tom,{search:function(a,b,c){var d=1==a.length?_DOC:a[0],e=a[a.length-1];return e&&d&&d.nodeType&&"string"==typeof e?b(d,$tom.translate(e).getExpression()):c},find:function(){return this.search(arguments,dFindy,_NULL)},collect:function(){return this.search(arguments,dGetty,_NULL)},collectAll:function(){return this.search(arguments,dGetties,[])}}),function(){function a(a){if(a){if("function"==typeof a)return a;var b=$tom.translate(a);return function(a){return 1==a.nodeType?b.include("#element")?_TRUE:dChecky(a,b.getExpression()):b.include("#text")}}return _NULL}function b(a){if(a=a||"#element,#text",c[a])return c[a];var b=new d(a);return c[a]=b,b}var c={},d=Trex.Class.create({initialize:function(a){this.pattern=a,this.translator=$tom.translate(a),this.hasClassPattern=a.indexOf(".")>=0,this.hasIdPattern=a.indexOf("#")>=0,this.matchesText=this.translator.include("#text"),this.matchesElement=this.translator.include("#element")},test:function(a){var b=a.nodeType,c=this.translator.map;if(1==b){if(this.matchesElement)return _TRUE;var d=a.tagName.toLowerCase();if(c[d])return _TRUE;var e=[];if(this.hasClassPattern&&a.className&&a.className.split(/\s/).each(function(a){e.push("."+a),e.push(d+"."+a)}),this.hasIdPattern&&a.id){var f=a.id;e.push("#"+f),e.push(d+"#"+f)}for(var g=0;g<e.length;g++)if(c[e[g]])return _TRUE;return _FALSE}if(3==b)return this.matchesText}});Object.extend($tom,{tagName:function(a,b){return a?a.tagName:_NULL},kindOf:function(a,c){return a&&c?b(c).test(a):_FALSE},kindOf_old:function(b,c){return b&&c?a(c)(b):_FALSE},ancestor:function(a,c){if(!a||!a.parentNode)return _NULL;for(var d=b(c),e=a.parentNode;e;){if($tom.isBody(e))return _NULL;if(d.test(e))break;e=e.parentNode}return e},findAncestor:function(a,b,c){for(;!c(a);){if(b(a))return a;a=a.parentNode}return _NULL},descendant:function(a,b){var c=$tom.descendants(a,b,_TRUE);return 0==c.length?_NULL:c[0]},descendants:function(a,c,d){if(d=d||_FALSE,!a||!a.firstChild)return[];var e=_FALSE,f=b(c),g=[],h=function(a){if((!d||!e)&&$tom.first(a))for(var b=$tom.children(a),c=0,i=b.length;c<i;c++)f.test(b[c])?(g.push(b[c]),e=_TRUE):h(b[c])};return h(a),g},children:function(a,c){var d=[];if(!a||!a.firstChild)return d;for(var e=b(c),f=$tom.first(a);f;)e.test(f)&&d.push(f),f=f.nextSibling;return d},next:function(a,c){if(!a||!a.nextSibling)return _NULL;for(var d=b(c),e=a.nextSibling;e&&(!$tom.hasContent(e)||!d.test(e));)e=e.nextSibling;return e},previous:function(a,c){if(!a||!a.previousSibling)return _NULL;for(var d=b(c),e=a.previousSibling;e&&(!$tom.hasContent(e)||!d.test(e));)e=e.previousSibling;return e},first:function(a,c){if(!a||!a.firstChild)return _NULL;for(var d=b(c),e=a.firstChild;e&&(!$tom.hasContent(e)||!d.test(e));)e=e.nextSibling;return e},last:function(a,c){if(!a||!a.lastChild)return _NULL;for(var d=b(c),e=a.lastChild;e&&(!$tom.hasContent(e)||!d.test(e));)e=e.previousSibling;return e},extract:function(a,c,d){var e=[];if(!a||!c||!d)return e;for(var f=b(d),g=_FALSE,h=a.firstChild;h;){if($tom.include(h,c)&&(g=_TRUE),f.test(h))e.push(h);else{if(g)break;e=[]}h=h.nextSibling}return g?e:[]},parent:function(a){return a&&a.parentNode?a.parentNode:_NULL},body:function(a){if(!a||!a.parentNode)return _NULL;for(var b=a.parentNode;b;){if($tom.isBody(b))return b;b=b.parentNode}return _NULL},top:function(a,b){b=b||_FALSE;for(var c=a;$tom.first(c);)c=$tom.first(c);return b?c:($tom.kindOf(c,"#tx_start_marker,#tx_end_marker")?c=c.nextSibling||c.parentNode:$tom.kindOf(c,"%control")&&(c=c.parentNode),c)},bottom:function(a,b){b=b||_FALSE;for(var c=a;$tom.last(c);)c=$tom.last(c);return b?c:($tom.kindOf(c,"#tx_start_marker,#tx_end_marker")?c=c.previousSibling||c.parentNode:$tom.kindOf(c,"%control")&&(c=c.parentNode),c)},include:function(a,b){if(!a||!b)return _FALSE;if(a==b)return _TRUE;for(var c=b;c;){if($tom.isBody(c))return _FALSE;if(c==a)return _TRUE;c=c.parentNode}return _FALSE},prevNodeUntilTagName:function(a,b,c){for(c=c.toUpperCase(),a=0===b?a.previousSibling:a.childNodes[b-1];a&&a.lastChild&&a.tagName!==c;)a=a.lastChild;return a},nextContent:function(a,b){do{var c=$tom.next(a,b);if(c)return c;a=$tom.parent(a)}while(a&&!$tom.isBody(a));return null}})}(),Object.extend($tom,{insertFirst:function(a,b){if(a&&b)return a.firstChild?a.insertBefore(b,a.firstChild):a.appendChild(b),b},insertAt:function(a,b){if(a&&b)return b.parentNode.insertBefore(a,b),a},insertNext:function(a,b){if(a&&b){var c=b.nextSibling;return c?c.parentNode.insertBefore(a,c):b.parentNode.appendChild(a),a}},append:function(a,b){if(a&&b)return a.appendChild(b),b},remove:function(a){a&&(a.parentNode&&a.parentNode.removeChild(a),a=_NULL)},html:function(a,b){if(a)return a.innerHTML=b||"",a},clean:function(a){return $tom.html(a)},stuff:function(a,b){if(!a)return a;if($tom.hasUsefulChildren(a,_TRUE))return a;if(a.lastChild){for(var c=a;c.lastChild;)c=c.lastChild;$tom.insertNext(b,c)}else $tom.append(a,b);return a}}),Object.extend($tom,{removeListIfEmpty:function(a){for(;$tom.kindOf(a,"%listhead")&&1==a.childNodes.length&&$tom.kindOf(a.firstChild,"%listhead");)a=a.firstChild;for(;$tom.kindOf(a,"%listhead")&&0==a.childNodes.length;){var b=a.parentNode;$tom.remove(a),a=b}}}),Object.extend($tom,{moveChild:function(a,b,c,d){if(a&&b&&(c=Math.min(Math.max(c||0),a.childNodes.length),d=Math.min(Math.max(d||a.childNodes.length),a.childNodes.length),!(c>=d)))for(var e=c;e++<d&&c<a.childNodes.length;)b.appendChild(a.childNodes[c])},moveChildToParent:function(a){if(a)for(;a.firstChild;)a.parentNode.insertBefore(a.firstChild,a)}}),Object.extend($tom,{replace:function(a,b){if(!a||!b)return _NULL;if($tom.getName(a)==$tom.getName(b))return $tom.remove(b),a;for(var c=[],d=a.childNodes,e=d.length,f=0;f<e;f++)c.push(d[f]);for(f=0;f<e;f++){var g=c[f];if(g.lastChild===a){var h=$tom.clone(g);$tom.moveChild(g,h),g.innerHTML="",b.appendChild(h)}else b.appendChild(g)}return $tom.insertAt(b,a),$tom.remove(a),b},clone:function(a,b){var c=a.cloneNode(!!b);return 1==a.nodeType&&c.removeAttribute("id"),c}}),Object.extend($tom,{wrap:function(a,b){return a&&b?(b instanceof Array==_FALSE&&(b=[].concat(b)),$tom.insertAt(a,b[0]),b.each(function(b){$tom.append(a,b)}),a):_NULL},unwrap:function(a){if(!a)return _NULL;var b=$tom.first(a);return $tx.msie_nonstd?a.removeNode():($tom.moveChildToParent(a),$tom.remove(a)),b}}),Object.extend($tom,{divideText:function(a,b){if(!$tom.isText(a))return a;if(b<=0||b>=a.length)return a;var c=a.cloneNode(_FALSE);return a.deleteData(b,a.length-b),c.deleteData(0,b),$tom.insertNext(c,a),c},divideNode:function(a,b){if(!$tom.isElement(a))return _NULL;for(var c=a.childNodes.length-b,d=a.cloneNode(_FALSE),e=0;e<c;e++)$tom.insertFirst(d,a.lastChild);return $tom.insertNext(d,a),d},splitAt:function(a,b){if($tom.isElement(a)){var c=$tom.clone(a);return $tom.moveChild(a,c,b+1,a.childNodes.length),$tom.insertNext(c,a),c}},divideTree:function(a,b){var c,d,e=b;do{d=e.parentNode,c=$tom.indexOf(e),e=$tom.divideNode(d,c)}while(e.previousSibling!=a);return e},divideParagraph:function(a){for(var b=a,c=$tom.indexOf(a),d=b;b&&!$tom.isBody(b)&&!$tom.kindOf(b,"td,th,%wrapper,%outergroup");){if($tom.kindOf(b,"#tx_start_marker,#tx_end_marker"))c=$tom.indexOf(b);else if($tom.isControl(b))c=$tom.indexOf(b);else if($tom.isText(b))b=$tom.divideText(b,c),c=$tom.indexOf(b);else if(b=$tom.divideNode(b,c),c=$tom.indexOf(b),d=b,$tom.kindOf(b,"p,li,dd,dt,h1,h2,h3,h4,h5,h6"))break;b=b.parentNode}return d},wrapInlinesWithP:function(a,b){var c=$tom.getOwnerDocument(a),d=$tom.extract(b||c.body,a,"%text,%inline,%control");if(this.hasOnlySavedCaret(d,a))return _NULL;var e=c.createElement("p");return $tom.wrap(e,d),e},hasOnlySavedCaret:function(a,b){var c=a.findAll(function(a){return 3!=a.nodeType||""!=a.nodeValue.trim()});return this.isGoogRangeCaret(b)&&1==c.length&&c[0]==b},isGoogRangeCaret:function(a){return a&&/goog_[0-9]+/.test(a.id)}}),Object.extend($tom,{paragraphOf:function(a){if(!a)return"p";var b=$tom.translate(a);return b.memberOf("ul,ol")?"li":b.memberOf("dl")?"dd":b.memberOf("tr,tbody,thead,tfoot,table")?"td":"p"},inlineOf:function(){return"span"},outerOf:function(a){if(!a)return"span";var b=$tom.translate(a);return b.memberOf("li")?"ol":b.memberOf("dd,dt")?"dl":b.memberOf("td,th,tr")?"table":"p"}}),function(){var a=Trex.Class.create({$const:{__FONT_SIZE_BASIS:9,__REG_EXT_NUMBER:new RegExp("[0-9.]+"),__REG_EXT_UNIT:new RegExp("px|pt|em")},initialize:function(){this.unitConverter={px2em:1/12,px2pt:.75,em2px:12,em2pt:9,pt2px:12/9,pt2em:1/9}},calculate:function(a,b){a!=_NULL&&0!=a.length||(a="0em"),b!=_NULL&&0!=b.length||(b="0em");var c=this.extractSign(b),d=this.extractUnit(a),e=this.extractUnit(b),f=this.extractNumber(a).toNumber(),g=this.extractNumber(b).toNumber();d!=e&&this.unitConverter[d+"2"+e]&&(f*=this.unitConverter[d+"2"+e]);var h=0;return h="-"==c?Math.max(f-g,0):f+g,h=Math.round(10*h)/10,0==h?_NULL:h+e},needCalculation:function(a){return a==_NULL||"string"!=typeof a?_FALSE:"+"==a.charAt(0)||"-"==a.charAt(0)},extractSign:function(a){var b="+";return"+"!=a.charAt(0)&&"-"!=a.charAt(0)||(b=a.charAt(0)),b},extractNumber:function(b){var c,d=0;return(c=b.match(a.__REG_EXT_NUMBER))!=_NULL&&(d=c[0]),b.indexOf("%")>-1&&(d/=100),d},extractUnit:function(b){var c,d="em";return(c=b.match(a.__REG_EXT_UNIT))!=_NULL&&(d=c[0]),d}}),b=new a,c={colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",datetime:"dateTime",accesskey:"accessKey",tabindex:"tabIndex",enctype:"encType",maxlength:"maxLength",readonly:"readOnly",longdesc:"longDesc",cellPadding:"cellPadding",cellSpacing:"cellSpacing",more:"more",less:"less",style:"style"};Object.extend($tom,{applyAttributes:function(a,b){if($tom.isElement(a))for(var c in b)"style"==c?$tom.applyStyles(a,b[c]):$tom.setAttribute(a,c,b[c])},removeAttributes:function(a,b){if($tom.isElement(a))for(var c in b)"style"==c?$tom.removeStyles(b[c]):a.removeAttribute(c,0)},getAttribute:function(a,b){return $tom.isElement(a)&&a&&a.getAttribute?a.getAttribute(c[b]||b):_NULL},setAttribute:function(a,b,d){if($tom.isElement(a))if(d==_NULL||0==d.length||0==d)a.removeAttribute(b,0);else if(c[b])a.setAttribute(c[b],d);else try{a[b]=d}catch(e){a.setAttribute(c[b]||b,d)}},setStyles:function(a,c,d){var e,f=a.style.cssText,g=Object.extend({},c);g.font&&(d?a.style.font=g.font:-1==a.style.cssText.indexOf("font:")&&(a.style.cssText="font: "+g.font+"; "+a.style.cssText),delete g.font);for(var h in g){var i;i=b.needCalculation(g[h])?b.calculate(a.style[h],g[h]):g[h],i==_NULL&&(i=""),"float"==h&&(h=$tx.msie?"styleFloat":"cssFloat"),e=!a.style[h]&&(0!=h.indexOf("font")||-1==f.indexOf("font:"))||d;var j="textDecoration"==h&&!a.style[h].include(i);e?a.style[h]=i:j&&(a.style[h]+=" "+i)}$tom._clearUselessStyle(a)},applyStyles:function(a,b){this.setStyles(a,b,_TRUE)},addStyles:function(a,b){this.setStyles(a,b,_FALSE)},removeStyles:function(a,b){var c=a.style.cssText,d=c;for(var e in b)e=e.replace(/([A-Z])/g,"-$1"),c=c.replace(new RegExp("(^| )"+e+"\\s*:[^;]+;? ?","ig"),"");d!=c&&(a.style.cssText=c,$tom._clearUselessStyle(a))},_clearUselessStyle:function(a){$tom.getAttribute(a,"style")||a.removeAttribute("style",0)},getStyleText:function(a){return a.style.cssText},setStyleText:function(a,b){a.style.cssText=b,!b&&$tom._clearUselessStyle(a)}})}(),Object.extend($tom,{goInto:function(a,b){a&&a.scrollIntoView&&a.scrollIntoView(b)},getWindow:function(a){return a.defaultView||a.parentWindow},getScrollTop:function(a){if(!a)return 0;var b=this.getWindow(a);return"pageYOffset"in b?b.pageYOffset:a.documentElement.scrollTop},setScrollTop:function(a,b){a&&(a.documentElement.scrollTop?a.documentElement.scrollTop=b:a.body.scrollTop=b)},getScrollLeft:function(a){return a?a.documentElement.scrollLeft||a.body.scrollLeft:0},setScrollLeft:function(a,b){a&&(a.documentElement.scrollLeft?a.documentElement.scrollLeft=b:a.body.scrollLeft=b)},getPosition:function(a,b){if(!a)return{x:0,y:0,width:0,height:0};b=!!b,a=$tx(a);var c,d=b?$tx.cumulativeOffset(a):$tx.positionedOffset(a),e=a.style.display;if("none"!=e&&e!=_NULL)c={width:a.offsetWidth,height:a.offsetHeight};else{var f=a.style,g=f.visibility,h=f.position,i=f.display;f.visibility="hidden",f.position="absolute",f.display="block";var j=a.clientWidth,k=a.clientHeight;f.display=i,f.position=h,f.visibility=g,c={width:j,height:k}}return{x:d[0],y:d[1],width:c.width,height:c.height}},getWidth:function(a){var b=a.style.width;return b.isPx()?b.parsePx():a.offsetWidth},setWidth:function(a,b){$tom.applyStyles(a,{width:b})},getHeight:function(a){var b=a.style.height;return b.isPx()?b.parsePx():a.offsetHeight},setHeight:function(a,b){$tom.applyStyles(a,{height:b})},replacePngPath:function(a){if($tx.msie6){if(_DOC.location.href.indexOf("http://")>-1)return;try{var b=$tx.getStyle(a,"filter"),c=/src='([^']+)'/.exec(b)[1];if(!c||"none"==c)return;if(c.indexOf("http://")>-1)return;var d=_DOC.location.href.split("/");d.push("css"),d.pop(),c=c.replace(/\.\.\//g,function(){return d.pop(),""});var e=d.join("/")+"/"+c;a.style.filter=b.replace(/src='([^']+)'/,"src='"+e+"'")}catch(a){alert(a)}}}}),Object.extend($tom,{EMPTY_BOGUS:$tx.msie_quirks||$tx.msie&&$tx.msie_ver<11?"&nbsp;":"<br>"}),Object.extend($tom,{EMPTY_PARAGRAPH_HTML:"<p>"+$tom.EMPTY_BOGUS+"</p>"}),_WIN.$tom=$tom,function(a){function b(a){return TrexConfig.getIconPath(a)+""}a.Util={_dispElIds:[],getDispElId:function(){var b;do{b="tx_entry_"+(Math.floor(9e4*Math.random())+1e4)+"_"}while(a.Util._dispElIds.contains(b));return a.Util._dispElIds.push(b),b},generateKey:function(){return parseInt(1e8*Math.random())},toStyleString:function(a){var b=[];for(var c in a)a[c]&&(b.push(c.replace(/([A-Z])/g,"-$1").toLowerCase()),b.push(":"),b.push(a[c]),b.push(";"));return b.join("")},toAttrString:function(a){var b=[];for(var c in a)a[c]&&b.push(" "+c+'="'+a[c]+'"');return b.join("")},getMatchValue:function(a,b,c){var d;return(d=a.exec(b))!=_NULL?d[c]:_NULL},getAttachmentType:function(a){return a=(a||"").toLowerCase(),["image/jpg","image/jpeg","image/png","image/tiff","image/gif","image/bmp","image/x-jg","image/ief","image/pict","jpg","bmp","gif","png"].contains(a)?"image":"file"},thumburl:function(a){switch(a=(a||"").toLowerCase()){case"doc":case"docx":return b("#iconpath/pn_word.gif");case"xls":case"xlsx":return b("#iconpath/pn_xls.gif");case"ppt":case"pptx":return b("#iconpath/pn_ppt.gif");case"pdf":return b("#iconpath/pn_pdf.gif");case"txt":return b("#iconpath/pn_txt.gif");case"hwp":return b("#iconpath/pn_hwp.gif");case"zip":case"alz":return b("#iconpath/pn_zip.gif");case"mp3":case"wav":case"ogg":case"wma":case"mp4":case"ape":case"ra":case"ram":return b("#iconpath/pn_mp3.gif");case"avi":case"mpeg":case"wmv":case"asf":return b("#iconpath/pn_movie.gif");case"swf":return b("#iconpath/pn_swf.gif");case"htm":case"html":return b("#iconpath/pn_html.gif");case"jpg":case"gif":case"png":case"bmp":default:return b("#iconpath/pn_etc.gif")}},prevurl:function(a){switch(a=(a||"").toLowerCase()){case"doc":case"docx":return b("#iconpath/p_word_s.gif");case"xls":case"xlsx":return b("#iconpath/p_xls_s.gif");case"ppt":case"pptx":return b("#iconpath/p_ppt_s.gif");case"pdf":return b("#iconpath/p_pdf_s.gif");case"txt":return b("#iconpath/p_txt_s.gif");case"hwp":return b("#iconpath/p_hwp_s.gif");case"zip":case"alz":return b("#iconpath/p_zip_s.gif");case"mp3":case"wav":case"ogg":case"wma":case"mp4":case"ape":case"ra":case"ram":return b("#iconpath/p_mp3_s.gif");case"avi":case"mpeg":case"wmv":case"asf":return b("#iconpath/p_movie_s.gif");case"swf":return b("#iconpath/p_swf_s.gif");case"htm":case"html":return b("#iconpath/p_html_s.gif");case"jpg":return b("#iconpath/p_jpg_s.gif");case"gif":return b("#iconpath/p_gif_s.gif");case"png":case"bmp":return b("#iconpath/p_png_s.gif");default:return b("#iconpath/p_etc_s.gif")}},getMatchedClassName:function(a,b){for(var c=_FALSE,d="",e=0;e<b.length;e++)if(d=b[e],$tx.hasClassName(a,d)){c=d;break}return c},getAllAttributesFromEmbed:function(a){var b={};a=a.replace(/<embed|>/gi,"");try{for(var c,d=/(\w+)=((?:\")[^\"]+(?:\"|$)|(?:')[^']+(?:'|$)|(?:[^\"'][^ \n]+($| |\n)))/gi;(c=d.exec(a))!=_NULL;)b[c[1].trim().toLowerCase()]=c[2].replace(/^(\"|')/i,"").replace(/(\"|')$/i,"").trim()}catch(a){}return b},getAllAttributes:function(a){for(var b,c={},d=/style="(?:\s*|(?:[^"]*(?:;\s*)))width\s*:\s*([0-9]+)px[^"]*"/gi;(b=d.exec(a))!=_NULL;)c.width=b[1];for(d=/style="(?:\s*|(?:[^"]*(?:;\s*)))height\s*:\s*([0-9]+)px[^"]*"/gi;(b=d.exec(a))!=_NULL;)c.height=b[1];for(d=new RegExp('\\s+([a-zA-Z-]+)="([^"]*)"',"g");(b=d.exec(a))!=_NULL;)c[b[1].toLowerCase()]||(c[b[1].toLowerCase()]=b[2]);for(d=new RegExp("\\s+([a-zA-Z-]+)='([^']*)'","g");(b=d.exec(a))!=_NULL;)c[b[1].toLowerCase()]||(c[b[1].toLowerCase()]=b[2]);for(d=new RegExp("\\s+([a-zA-Z-]+)=([^\\s>]*)","g");(b=d.exec(a))!=_NULL;)c[b[1].toLowerCase()]||(c[b[1].toLowerCase()]=b[2]);return c}},a.HtmlCreator={createTableMarkup:function(a,b,c){var d=[];d.push('<table unselectable="on">'),d.push("<tbody>");for(var e,f=c.length,g=0;g<a;g++){d.push("<tr>");for(var h=0;h<b;h++)if(g*b+h<f)if(e=c[g*b+h],e.image){var i=TrexConfig.getIconPath(e.image);d.push('<td class="tx-menu-list-item"><a href="javascript:;"><span class="'+(e.klass||"")+'"><img src="'+i+'" data="'+e.data+'"/></span></a></td>')}else d.push('<td class="tx-menu-list-item"><a href="javascript:;"><span class="'+(e.klass||"")+'">'+e.data+"</span></a></td>");else d.push('<td class="tx-menu-list-item"><a href="javascript:;"><span class="">&nbsp;</span></a></td>');d.push("</tr>")}return d.push("</tbody>"),d.push("</table>"),d.join("\n")}},a.String={escapeQuot:function(a){return a.replace(new RegExp('"',"g"),"&quot;").replace(new RegExp("'","g"),"&#39;")},unescapeQuot:function(a){return a.replace(new RegExp("&quot;","gi"),'"').replace(new RegExp("&#39;","g"),"'")},htmlspecialchars:function(b){return a.String.escapeQuot(b.replace(new RegExp("&","g"),"&amp;").replace(new RegExp("<","g"),"&lt;").replace(new RegExp(">","g"),"&gt;"))},unHtmlspecialchars:function(b){return a.String.unescapeQuot(b.replace(new RegExp("&amp;","gi"),"&").replace(new RegExp("&lt;","gi"),"<").replace(new RegExp("&gt;","gi"),">"))},parseAttribute:function(a,b){var c,d=new RegExp("(^|\\W)"+b+'="([^"]*)"',"gi"),e=new RegExp("(^|\\W)"+b+"='([^']*)'","gi"),f=new RegExp("(^|\\W)"+b+"=([^\\s>]*)","gi");return(c=d.exec(a))?c[2]:(c=e.exec(a))?c[2]:(c=f.exec(a))?c[2]:""},changeAttribute:function(a,b,c,d){var e=new RegExp("(^|\\W)("+b+'=")'+c+'(")',"gi"),f=new RegExp("(^|\\W)("+b+"=')"+c+"(')","gi"),g=new RegExp("(^|\\W)("+b+"=)"+c,"gi"),h=new RegExp("<([\\w]+\\s*)","gi"),i=_FALSE;return a.search(e)>-1&&(i=_TRUE,a=a.replace(e,"$1$2"+d+"$3")),a.search(f)>-1&&(i=_TRUE,a=a.replace(f,"$1$2"+d+"$3")),a.search(g)>-1&&(i=_TRUE,a=a.replace(g,"$1$2"+d)),i||(a=a.replace(h,"<$1"+b+"="+d+" ")),a}},a.Validator=a.Class.create({initialize:function(){},strip:function(b){return b.stripTags().replace(/&nbsp;/g,"").replace(a.__WORD_JOINER_REGEXP,"").trim()},exists:function(a){return a?""==this.strip(a)&&a.search(/<(img|iframe|object|embed|table|hr|script|TXDB)/i)<0?_FALSE:_TRUE:_FALSE},equals:function(a,b){return a&&b&&a.search(/<(img|iframe|object|embed|table|hr|script|TXDB)/i)<0&&this.strip(a)==this.strip(b)?_TRUE:_FALSE}}),a.Repeater=a.Class.create({initialize:function(a){this.execHandler=a},start:function(a){this.tItv&&this.clear(),this.tItv=_WIN.setInterval(this.onTimer.bind(this),a)},clear:function(){_WIN.clearInterval(this.tItv),this.tItv=_NULL},onTimer:function(){this.execHandler!=_NULL&&this.execHandler()}}),a.Timer=a.Class.create({initialize:function(a){this.execHandler=a},start:function(a){_WIN.setTimeout(this.onTimer.bind(this),a)},onTimer:function(){this.execHandler!=_NULL&&this.execHandler()}}),a.Paging=a.Class.create({$const:{DEFAULT_PAGE_SIZE:5,DEFAULT_BLOCK_SIZE:10},initialize:function(b,c){this.data=b,this.currentpage=c.initPage||1,this.totalrow=c.totalrow||this.getTotalRow(),this.pagesize=c.pagesize||a.Paging.DEFAULT_PAGE_SIZE,this.blocksize=c.blocksize||a.Paging.DEFAULT_PAGE_SIZE,this.totalpage=Math.ceil(this.totalrow/this.pagesize),this.totalblock=Math.ceil(this.totalpage/this.blocksize)},getNextPage:function(){return this.currentpage<this.totalpage?this.currentpage+1:0},getPrevPage:function(){return this.currentpage>1?this.currentpage-1:0},getNextBlock:function(){var a=Math.ceil(this.currentpage/this.blocksize);return a<this.totalblock?a*this.blocksize+1:0},getPrevBlock:function(){var a=Math.ceil(this.currentpage/this.blocksize);return a>1?(a-2)*this.blocksize+1:0},getPageList:function(){for(var a=[],b=Math.ceil(this.currentpage/this.blocksize)-1,c=b*this.blocksize+1,d=Math.min(this.totalpage,c+this.blocksize-1),e=c;e<=d;e++)a.push(e);return a},movePage:function(a){this.currentpage=a||this.currentpage},getOnePageData:function(){for(var a=[],b=(this.currentpage-1)*this.pagesize,c=Math.min(this.currentpage*this.pagesize,this.totalrow),d=b;d<c;d++)a.push(this.data[d]);return a},getTotalRow:function(){return this.data.length}}),a.Slidebar=a.Class.create({initialize:function(a){this.elContext=a.el,this.knobWidth=a.knobWidth,this.isDisabled=_FALSE,this.handler=function(b){this.isDisabled||"function"!=typeof a.handler||a.handler(b)},this.logicObj={interval:a.interval||5,min:a.min||0,max:a.max||100},this.physicObj={min:0,width:a.barSize||100},this.physicObj.max=this.physicObj.width-this.knobWidth,this.physicObj.interval=this.logicObj.interval*this.physicObj.max/this.logicObj.max,this.startPos=0,this.startX=0,this.isDrag=_FALSE,this.result=0;var b=$tom.collect(this.elContext,"dd.tx-slide");$tom.collect(b,"span.tx-slide-min").innerHTML="",$tom.collect(b,"span.tx-slide-max").innerHTML="",this.bindEvent(),this.setKnobPosition(a.defaultValue||a.min||0)},regenerate:function(a){a=parseInt(a*this.physicObj.width/this.logicObj.max),this.setKnobPosition(a)},bindEvent:function(){var a=$tom.collect(this.elContext,"dd.tx-slide"),b=$tom.collect(a,"a.tx-slide-prev"),c=$tom.collect(a,"a.tx-slide-next"),d=$tom.collect(a,"div.tx-slide-bar"),e=this.elKnob=$tom.collect(a,"div.tx-slide-knob");$tx.observe(e,"mousedown",function(a){this.isDrag=_TRUE,this.startPos=this.getKnobPosition(),this.startX=a.clientX,$tx.stop(a)}.bind(this)),$tx.observe(e,"mouseup",function(){this.isDrag=_FALSE}.bind(this)),$tx.observe(this.elContext,"mousemove",function(a){this.isDrag&&(this.setKnobPosition(this.startPos+a.clientX-this.startX),$tx.stop(a),this.handler(this.result))}.bind(this)),$tx.observe(b,"click",function(a){var b=Math.round(this.physicObj.interval)-1,c=this,d=function(){var a=c.getKnobPosition();c.setKnobPosition(a-1),b-- >0?setTimeout(d,10):c.handler(c.result)};d(),$tx.stop(a)}.bind(this)),$tx.observe(c,"click",function(a){var b=Math.round(this.physicObj.interval),c=this,d=function(){
var a=c.getKnobPosition();c.setKnobPosition(a+1),--b>0?setTimeout(d,10):c.handler(c.result)};d(),$tx.stop(a)}.bind(this)),$tx.observe(this.elContext,"mouseup",function(){this.isDrag&&(this.isDrag=_FALSE)}.bind(this)),$tx.observe(e,"click",function(a){$tx.stop(a)}.bind(this)),$tx.observe(d,"click",function(a){if(!this.isDrag){var b=a.layerX||a.x;this.setKnobPosition(b-this.knobWidth/2),this.handler(this.result)}}.bind(this))},getKnobPosition:function(){return $tx.getStyle(this.elKnob,"left").parsePx()},setKnobPosition:function(a){a=a<this.physicObj.max?a:this.physicObj.max,a=a>this.physicObj.min?a:this.physicObj.min,$tx.setStyle(this.elKnob,{left:a.toPx()}),this.result=Math.round(a*this.logicObj.interval/this.physicObj.interval)},setDisable:function(){this.isDisabled=_TRUE},setEnable:function(){this.isDisabled=_FALSE},getDisabled:function(){return this.isDisabled}}),a.DynamicSizer=a.Class.create({initialize:function(b){this.config=b,this.wrapper=b.el,this.elEventContext=tx.div({className:"tx-dynamic-sizer-context"}),this.currentSize={row:0,col:0},this.dynamicSizingEnabled=_TRUE,b.moveHandler||(b.moveHandler=function(){}),b.clickHandler||(b.clickHandler=function(){}),this.wrapper.appendChild(this.elEventContext),this.previewTable=new a.DynamicSizer.PreviewTable({parentEl:this.elEventContext,mouseOverHandler:this.changeSize.bind(this),mouseClickHandler:this.selectSize.bind(this)})},clear:function(){this.dynamicSizingEnabled=_TRUE,this.changeSize(0,0)},changeSize:function(a,b){this.dynamicSizingEnabled&&(this.currentSize.row=a,this.currentSize.col=b,this._changeSelectionSize(a,b),this.config.moveHandler(a,b))},_changeSelectionSize:function(a,b){this.previewTable.moveSelectionPos(a,b)},toggleDynamicSizing:function(){this.dynamicSizingEnabled=!this.dynamicSizingEnabled,this.dynamicSizingEnabled?this.selection.enableResize():this.selection.disableResize()},selectSize:function(a){this.config.clickHandler(a,this.currentSize)},getCurruentSize:function(){return this.currentSize}}),a.DynamicSizer.PreviewTable=a.Class.create({$const:{DEFAULT_TD_STYLE:{},DEFAULT_TABLE_PROPERTY:{cellpadding:"0",cellspacing:"1"},MAX_SIZE:{COL:10,ROW:10}},initialize:function(b){this.config=b,this.elTable=_NULL,this.elTable=this.generateTable("tx-event"),this.elSelection=tx.div({className:"tx-selection"},this.generateTable("tx-selection"));var c=this.generateTable("tx-panel");this.eventBinding(),b.parentEl.appendChild(this.elTable),b.parentEl.appendChild(this.elSelection),b.parentEl.appendChild(c);var d=$tom.getPosition(this.elTable),e=a.DynamicSizer.PreviewTable.MAX_SIZE;this.cellSize={width:Math.round((d.width-d.x)/e.COL),height:(d.height-d.y)/e.ROW}},generateTable:function(b){for(var c=tx.tbody(),d=a.DynamicSizer.PreviewTable,e=0;e<d.MAX_SIZE.ROW;e++){for(var f=tx.tr(),g=0;g<d.MAX_SIZE.COL;g++){var h=tx.td(tx.div({style:d.DEFAULT_TD_STYLE}));h=this.setCoordToAttr(h,g+1,e+1),f.appendChild(h)}c.appendChild(f)}var i=tx.table(d.DEFAULT_TABLE_PROPERTY);return $tx.addClassName(i,b||""),i.appendChild(c),i},moveSelectionPos:function(a,b){var c=(b*this.cellSize.width).toPx(),d=(a*this.cellSize.height).toPx();$tx.setStyle(this.elSelection,{width:c,height:d})},setCoordToAttr:function(a,b,c){return a.setAttribute("col",b),a.setAttribute("row",c),a},getCoordFromAttr:function(a){return{col:a.getAttribute("col")||0,row:a.getAttribute("row")||0}},eventBinding:function(){this.mouseOverHandler=this.config.mouseOverHandler,this.mouseClickHandler=this.config.mouseClickHandler;var a=this,b=function(b){var c=$tx.element(b)||{},d=(c.tagName||"").toUpperCase();if(c&&"TD"==d){var e=a.getCoordFromAttr(c);a.mouseOverHandler(e.row,e.col)}$tx.stop(b)},c=function(b){a.mouseClickHandler(b)};$tx.observe(this.elTable,"mouseover",b),$tx.observe(this.elTable,"click",c)}}),a.ImageScale=a.Class.create({initialize:function(a,b){if(a.imageurl&&!a.actualwidth){var c=function(c,d){a.actualwidth=c,a.actualheight=d,b&&b(c,d)};setTimeout(function(){var b=new Image;b.onerror=function(){b=_NULL},b.onreadystatechange?b.onreadystatechange=function(){"complete"==this.readyState&&(c(this.width,this.height),b=_NULL)}:b.onload=function(){c(this.width,this.height),b=_NULL},b.src=a.imageurl},10)}}})}(Trex),Trex.I.XHRequester=Trex.Faculty.create({createXMLHttp:function(){var a=_NULL;try{return _WIN.XMLHttpRequest?a=new XMLHttpRequest:_WIN.ActiveXObject&&((a=new ActiveXObject("Msxml2.XMLHTTP"))||(a=new ActiveXObject("Microsoft.XMLHTTP"))),a}catch(a){return _NULL}},sendRequest:function(a,b,c,d,e,f){if(b==_NULL&&""!=b)return _NULL;var g=_NULL,h=this.createXMLHttp();if(h==_NULL)return _NULL;var i=function(){g=200==h.status?e("HEAD"==a.toUpperCase()?h.getAllResponseHeaders():h.responseText):f(h.status),h=_NULL};try{return d&&(h.onreadystatechange=function(){4==h.readyState&&i()}),"POST"==a.toUpperCase()?(h.open("POST",b,d),h.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8"),h.setRequestHeader("X-Requested-With","XMLHttpRequest"),h.send(c)):(c&&c.length>0&&(b=b+(b.indexOf("?")>-1?"&":"?")+c),h.open(a.toUpperCase(),b,d),h.setRequestHeader("X-Requested-With","XMLHttpRequest"),h.send(_NULL)),d||i(),g}catch(a){return _NULL}}}),Trex.Responder={callbacks:{},process:function(){},newKey:function(){var a="exe_"+Math.floor(1e5*Math.random());return this[a]?this.newKey():a},register:function(a){var b=this.newKey();return this.callbacks[b]=function(c){a.apply(this,Array.prototype.slice.call(arguments,0)),this.callbacks[b]=_NULL}.bind(this),b}},Trex.I.JSRequester=Trex.Faculty.create({importScript:function(a,b,c,d){if(a==_NULL&&""!=a)return _NULL;b=b||"utf-8",c=c||_DOC;try{var e=c.getElementsByTagName("head")[0]||c.documentElement,f=c.createElement("script");f.type="text/javascript",f.charset=b,f.src=a;var g=_FALSE;f.onload=f.onreadystatechange=function(){g||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(g=_TRUE,d&&d(),f.onload=f.onreadystatechange=_NULL,e&&f.parentNode&&e.removeChild(f))},e.insertBefore(f,e.firstChild)}catch(a){}}}),_WIN.$stop={},_WIN.$propagate={},Trex.I.JobObservable=Trex.Faculty.create({jobObservers:{},observeJob:function(a,b){this.jobObservers[a]||(this.jobObservers[a]=[]),this.jobObservers[a].push(b)},reserveJob:function(a,b,c){c=c||500,this.jobObservers[a]||(this.jobObservers[a]=[]);var d=this;this.jobObservers[a].push(function(){var a=$A(arguments);setTimeout(function(){b.apply(d,a)},c)})},removeJob:function(a,b){if(this.jobObservers[a])if(b)for(var c=0;c<this.jobObservers[a].length;c++)this.jobObservers[a][c]===b&&this.jobObservers[a].splice(c,1);else this.jobObservers[a].length=0},fireJobs:function(a){var b=this,c=$A(arguments).slice(1);if(this.jobObservers[a])if(_WIN.DEBUG)this.jobObservers[a].each(function(a){a.apply(b,c)});else try{this.jobObservers[a].each(function(a){a.apply(b,c)})}catch(a){if(a!=$stop)throw a}}}),Trex.I.KeyObservable=Trex.Faculty.create({keyObservers:{},observeKey:function(a,b){var c=function(a){return(a.ctrlKey?"T":"F")+(a.altKey?"T":"F")+(a.shiftKey?"T":"F")+"_"+a.keyCode}(a);this.keyObservers[c]||(this.keyObservers[c]=[]),this.keyObservers[c].push(b)},fireKeys:function(a){var b=function(a){return(a.ctrlKey?"T":"F")+(a.altKey?"T":"F")+(a.shiftKey?"T":"F")+"_"+a.keyCode}(a);if(this.keyObservers[b]){var c=this,d=_FALSE,e=function(){d||($tx.stop(a),d=_TRUE)};this.keyObservers[b].each(function(b){try{b.apply(c,[a]),e()}catch(a){a===$stop?e():$propagate}})}},registerKeyEvent:function(a){try{$tx.observe(a,"keydown",this.fireKeys.bind(this),_TRUE)}catch(a){}}}),Trex.I.ElementObservable=Trex.Faculty.create({elementObservers:{},observeElement:function(a,b){if(a==_NULL)this.observeElement({tag:"*tx-final-body*"},b);else if(a.length)for(var c=0;c<a.length;c++){var d=a[c];this.observeElement(d,b)}else this.elementObservers[a.tag]||(this.elementObservers[a.tag]={}),a.klass||(a.klass="*tx-all-class*"),this.elementObservers[a.tag][a.klass]||(this.elementObservers[a.tag][a.klass]=[]),this.elementObservers[a.tag][a.klass].push(b)},fireElements:function(a){if(a){var b=a,c=$A(arguments).slice(1),d=this;try{var e;if($tom.kindOf(b,"img,hr,table,button,iframe"))(e=this.collectObserverByElement(b.nodeName.toLowerCase(),b.className))&&e.each(function(a){a.apply(d,[b].concat(c))});else for(;b&&(e=this.collectObserverByElement(b.nodeName.toLowerCase(),b.className),e&&e.each(function(a){a.apply(d,[b].concat(c))}),!$tom.isBody(b));)b=$tom.parent(b)}catch(a){if(a!=$stop)throw a}this.fireFinally()}},fireFinally:function(){var a=this,b=$A(arguments).slice(1),c=this.collectObserverByElement("*tx-final-body*");c&&c.each(function(c){c.apply(a,[_NULL].concat(b))})},collectObserverByElement:function(a,b){if(!this.elementObservers[a])return _NULL;var c=[];if(""!=(b=b||"")){var d=b.split(" ");for(var e in this.elementObservers[a])d.contains(e)&&c.push(this.elementObservers[a][e])}return this.elementObservers[a]["*tx-all-class*"]&&c.push(this.elementObservers[a]["*tx-all-class*"]),c.flatten()}}),Trex.I.MouseoverObservable=Trex.Faculty.create({mouseoverObservers:{},observeMouseover:function(a,b,c){this.mouseoverObservers[a]||(this.mouseoverObservers[a]={success:[],fail:[],flag:_FALSE}),this.mouseoverObservers[a].success.push(b),c&&this.mouseoverObservers[a].fail.push(c)},fireMouseover:function(a){if(a){var b=a,c=this;try{for(var d in this.mouseoverObservers)this.mouseoverObservers[d].flag=_FALSE;for(;b;){var e=this.collectMouseoverObserver(b);if(e.length>0){var f=this.getPositionByNode(b);e.each(function(a){a.apply(c,[b,f])})}if($tom.isBody(b))break;b=$tom.parent(b)}}catch(a){if(a!=$stop)throw a}this.runMouseoverFailHandler()}},runMouseoverFailHandler:function(){var a=[];for(var b in this.mouseoverObservers)this.mouseoverObservers[b].flag||a.push(this.mouseoverObservers[b].fail);a.flatten().each(function(a){a()})},collectMouseoverObserver:function(a){var b=[],c=a.className||"",d=a.tagName;if(d&&(d=d.toLowerCase(),this.mouseoverObservers[d]&&(b.push(this.mouseoverObservers[d].success),this.mouseoverObservers[d].flag=_TRUE)),""!=c)for(var e=c.split(" "),f=0,g=e.length;f<g;f++){var h=d+"."+e[f];this.mouseoverObservers[h]&&(b.push(this.mouseoverObservers[h].success),this.mouseoverObservers[h].flag=_TRUE)}return b.flatten()}}),Trex.I.Runnable=Trex.Faculty.create({isRunning:_FALSE,repeater:_NULL,threads:[],startThread:function(a){this.repeater?this.repeater.clear():this.repeater=new Trex.Repeater(this.runThread.bind(this)),this.repeater.start(a)},stopThread:function(){this.repeater.clear()},runThread:function(){this.isRunning||this.threads.length>0&&(this.isRunning=_TRUE,this.threads.shift()(),this.isRunning=_FALSE)},putThread:function(a,b){b?this.threads.unshift(a):this.threads.push(a)}}),void 0===_WIN)var _DOC=document,_WIN=window,_DOC_EL=_DOC.documentElement,_FALSE=!1,_TRUE=!0,_NULL=null,_UNDEFINED;_WIN.autoResizeHeight=function(a,b){var c=window.top;if("number"==typeof a){b||(b=0);var d=self.document.documentElement,e={},f={x:0,y:0},g=c.screenLeft?c.screenLeft:c.screenX,h=c.screenTop?c.screenTop:c.screenY;c.resizeTo(a,300);var i=d.clientHeight==d.scrollHeight&&d.scrollHeight!=d.offsetHeight?d.offsetHeight:d.scrollHeight,j=d.clientWidth==d.scrollWidth&&d.scrollWidth!=d.offsetWidth?d.offsetWidth:d.scrollWidth;i>d.clientHeight?e.height=i-d.clientHeight:(e.width=8,e.height=d.clientHeight-i+35),f.y=Math.min(screen.availHeight-i-h-50,0),f.x=Math.min(screen.availWidth-j-g-30,0),(f.x||f.y)&&($tx.chrome||c.moveBy(f.x,f.y),c.resizeTo(a,300)),setTimeout(function(){c.resizeBy(0,e.height+b)},20)}else setTimeout(function(){var b=a;b||(b=document.getElementsByTagName("HTML")[0]);var d=document.getElementsByTagName("HTML")[0],e=d.clientWidth||d.scrollWidth,f=d.clientHeight||d.scrollHeight,g=b.offsetWidth||b.scrollWidth,h=b.offsetHeight||b.scrollHeight,i=g-e,j=h-f;(i||j)&&c.resizeBy(i,j)},100)},_WIN.Querystring=function(a){this.params=new Object,this.get=function(a,b){b==_NULL&&(b=_NULL);var c=this.params[a];return c==_NULL&&(c=b),c},this.getUTF8=function(a,b){b==_NULL&&(b=_NULL);var c=unescape(this.params[a]);return c==_NULL&&(c=b),c};var b;if(b=a||location.search.substring(1,location.search.length),0!=b.length){b=b.replace(/\+/g," ");for(var c=b.split("&"),d=0;d<c.length;d++){var e,f=c[d].split("="),g=unescape(f[0]);e=2==f.length?f[1]:g,this.params[g]=e}}},_WIN.qs=new Querystring,_WIN.closeWindow=function(){completeAttach(),top.opener=self,top.close();var a;a=opener&&!opener.closed?opener:parent.opener,a.Editor?a.Editor.focus():a.focus()},_WIN.stripTags=function(a){return a.replace(/<\/?[^>]+>/gi,"")},_WIN.getAttacher=function(a){return PopupUtil.getOpener().Editor.getSidebar().getAttacher(a)},_WIN.getEmbeder=function(a){return PopupUtil.getOpener().Editor.getSidebar().getEmbeder(a)},_WIN.registerAction=function(a){a&&(window.execAttach=a.attachHandler)},_WIN.registerSearch=function(a){a&&(window.execSearch=a.insertHandler)},_WIN.registerEmded=function(a){a&&(window.execEmbed=a.embedHandler)},_WIN.modifyResult=function(){},_WIN.completeAttach=function(){},_WIN.existEntry=function(a){return a?a.existEntry():_FALSE},_WIN.getFirstEntryData=function(a){return a?a.getFirstEntryData():_FALSE},_WIN.getAttrOfElement=function(a,b){var c=new RegExp(b+"=['\"]?([^\"'>]*)[\"' ]","i"),d=c.exec(a);return d?d[1]:_NULL},_WIN.getParamValOfObjectTag=function(a,b){var c=new RegExp("<param([^>]*)name=['\"]"+b+"['\"]([^>]*)>","gi"),d=c.exec(a,"gi"),e=_NULL;return d&&(c=new RegExp("value=['\"]([^>'\"]*)['\"]","gi"),e=c.exec(d[0]))?e[1]:_NULL},_WIN.PopupUtil={getOpener:function(){var a;return opener&&opener.Editor?a=opener:parent.opener&&parent.opener.Editor?a=parent.opener:opener.opener&&opener.opener.Editor&&(a=opener.opener),a}},_WIN.getDateFormat=function(a,b){if(a=a?a.trim():"",8!=a.length||0==a.indexOf("0"))return"";var c=a.substr(0,4)+(b||" "),d=0==a.substr(4,2).indexOf("0")?a.substr(5,1):a.substr(4,2),e=0==a.substr(6,2).indexOf("0")?a.substr(7,1):a.substr(6,2);return c+("0"!=d?d+(b||" "):"")+("0"!=e?e+(b?"":""):"")},_WIN.getDashedDateFormat=function(a){return a=a.trim(),8!=a.length||0==a.indexOf("00")?"":removeZero(a.substr(0,4),"")+removeZero(a.substr(4,2),"-")+removeZero(a.substr(6,2),"-")},_WIN.removeZero=function(a,b){return 0==a.indexOf("00")?"":b+a},_WIN.getYearFormat=function(a){return a=a.trim()||"",8!=a.length?"":a.substr(0,4)+" "},_WIN.getDayFormat=function(a){try{if(a=a.trim(),8!=a.length)return a;return["","","","","","",""][new Date(a.substr(0,4),a.substr(4,2)-1,a.substr(6,2)).getDay()]}catch(a){}return""},_WIN.stripBracket=function(a){var b=a.trim().split(","),c=[];return b.each(function(a){c.push(a.replace(/\[\[[\w]*\]\]/,""))}),c.join(", ")},_WIN.getFieldJson=function(a,b){return b?{name:a,value:b.stripTags()}:_NULL};