/* kmslab_editor 1.0.05 */

function ImageUploader(){}ImageUploader.APPLET_CODEBASE="/res/core/keditor/",ImageUploader.APPLET_CODE="com.kmslab.imgctrl.ImageControl",ImageUploader.APPLET_ARCHIVE="ImageControl.1.1.0.6.amore.jar",ImageUploader.APPLET_WIDTH="10",ImageUploader.APPLET_HEIGHT="10",ImageUploader.APPLET_MINIMUM_VERSION="1.6.0_24",ImageUploader.DISABLED=!1,ImageUploader.IS_DEPLOYED=!1,ImageUploader.IS_INIT=!1,ImageUploader.JS_CONNECTOR=null,ImageUploader.CONTROL=null,ImageUploader.PARAM={},ImageUploader.deploy=function(){var a=navigator.userAgent,b=a.toLowerCase();if(b.indexOf("mobile")>-1||b.indexOf("android")>-1||b.indexOf("iphone")>-1||b.indexOf("ipad")>-1||b.indexOf("blackberry")>-1||b.indexOf("opera mini")>-1||b.indexOf("iemobile")>-1||!function(){var a=window.navigator.userAgent.match(/Chrome\/(\d+)\./);return!(a&&a[1]&&parseInt(a[1],10)>=42&&!function(){var a=/(Java)(\(TM\)| Deployment)/,b=navigator.plugins;if(navigator&&b)for(plugin in b)if(b.hasOwnProperty(plugin)&&a.exec(b[plugin].name))return!0;return!1}())}())return void(ImageUploader.DISABLED=!0);if(!ImageUploader.IS_DEPLOYED){var c={id:"idImageUploader",type:"application/x-java-applet",codebase:ImageUploader.APPLET_CODEBASE,code:ImageUploader.APPLET_CODE,archive:ImageUploader.APPLET_ARCHIVE,width:ImageUploader.APPLET_WIDTH,height:ImageUploader.APPLET_HEIGHT,style:"z-index:4000;position:absolute;left:-200px;top:-200px;width:"+ImageUploader.APPLET_WIDTH+"px;height:"+ImageUploader.APPLET_HEIGHT+"px;overflow:hidden;"};if(ImageUploader.JS_CONNECTOR="_ImageUploader",window[ImageUploader.JS_CONNECTOR]=ImageUploader,ImageUploader.PARAM.JSConnectName=ImageUploader.JS_CONNECTOR,window.deployJava&&window.deployJava.runApplet&&!ImageUploader.is_mobile)window.deployJava.runApplet(c,ImageUploader.PARAM,ImageUploader.APPLET_MINIMUM_VERSION);else{var d="";d+='<applet id="'+c.id+'" codebase="'+c.codebase+'" code="'+c.code+'" archive="'+c.archive+'" width="'+c.width+'" height="'+c.height+'" >';for(var e in ImageUploader.PARAM)d+='<param name="'+e+'" value="'+ImageUploader.PARAM[e]+'">';d+='<param name="java_version" value="'+ImageUploader.APPLET_MINIMUM_VERSION+'+">',d+="</applet>";var f=document.createElement("div");f.style.zIndex=4e3,f.style.position="absolute",f.style.left="-200px",f.style.top="-200px",f.style.width="10px",f.style.height="10px",f.innerHTML=d,document.body.appendChild(f)}ImageUploader.CONTROL=document.getElementById(c.id),ImageUploader.IS_DEPLOYED=!0}},ImageUploader.onLoadComplete=function(){ImageUploader.IS_INIT=!0},ImageUploader.isLoadComplete=function(){return!ImageUploader.DISABLED&&ImageUploader.IS_INIT},ImageUploader.getClipboardData=function(){return ImageUploader.CONTROL.getAllowEditorClipboardData()},ImageUploader.uploadImage=function(a,b){var c={},d=!1;if($.each($("img",b),function(b,e){var f=e.src;a._checkUploadImage(f)?(null==c[e.src]&&(c[e.src]=[]),c[e.src].push(e),d=!0):(e.width=e.width,e.height=e.height)}),!d)return null;var e={},f={};for(var g in c){var h=filePath=g,i=null,j=!1;-1!=h.search(/^(?:file:\/\/\/|[a-zA-Z]:)/)?(filePath=decodeURIComponent(filePath),filePath=filePath.replace("file:///","").replace("\\","/")):filePath=decodeURIComponent(filePath).split("?")[0],i=filePath,-1!=i.lastIndexOf("/")&&(i=i.substring(i.lastIndexOf("/")+1)),i=-1!=i.lastIndexOf(".")?i.substring(i.lastIndexOf(".")+1):"gif",j="wmz"==i.toLowerCase();var k=a._getUploadImageInfo("","",i,"control"),l=(k.cid,k.name),m=k.url;ImageUploader.CONTROL.imageUploadPostUrl(m),ImageUploader.CONTROL.imageUploadFileField(k.fieldname),"domino"==k.type&&(ImageUploader.CONTROL.imageUploadTextField("__Click","0"),ImageUploader.CONTROL.imageUploadTextField("%%PostCharset","UTF-8"),ImageUploader.CONTROL.imageUploadTextField("Body",""));for(var n in k.postdata)ImageUploader.CONTROL.imageUploadTextField(n,k.postdata[n]);-1!=h.search(/^(?:file:\/\/\/|[a-zA-Z]:)/)?(e[l]=c[g],ImageUploader.CONTROL.imageUploadFile(l,filePath,j)):(e[l]=c[g],ImageUploader.CONTROL.imageUploadURL(l,filePath));var o=ImageUploader.CONTROL.imageUpload();k.uploadedImage=f,k.uploadImageById=e,a._parseUploadResponse(o,k,"applet")}var p={uploadedImage:f,uploadId:e};for(var n in p.uploadedImage){var q=p.uploadId[n];if(null!=q)for(var r=0;r<q.length;r++)q[r].src=p.uploadedImage[n]}return b};