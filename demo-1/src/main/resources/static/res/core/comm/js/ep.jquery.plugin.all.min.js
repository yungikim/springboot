(function($){var min=Math.min,max=Math.max,round=Math.floor,isStr=function(v){return $.type(v)==="string";},runPluginCallbacks=function(Instance,a_fn){if($.isArray(a_fn)){for(var i=0,c=a_fn.length;i<c;i++){var fn=a_fn[i];try{if(isStr(fn)){fn=eval(fn);}if($.isFunction(fn)){g(fn)(Instance);}}catch(ex){}}}function g(f){return f;}};$.layout={version:"1.4.3",revision:1.0403,browser:{},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects,panes,north,south,west,east,center".split(","),allPanes:"north,south,west,east,center".split(","),borderPanes:"north,south,west,east".split(","),oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(el){var $el=$(el),layout=$el.data("layout")||$el.data("parentLayout");if(layout){var $cont=layout.container;if($cont.data("layoutPane")){return $cont;}var $pane=$cont.closest("."+$.layout.defaults.panes.paneClass);if($pane.data("layoutPane")){return $pane;}}return null;},getParentPaneInstance:function(el){var $pane=$.layout.getParentPaneElem(el);return $pane?$pane.data("layoutPane"):null;},getParentLayoutInstance:function(el){var $pane=$.layout.getParentPaneElem(el);return $pane?$pane.data("parentLayout"):null;},getEventObject:function(evt){return typeof evt==="object"&&evt.stopPropagation?evt:null;},parsePaneName:function(evt_or_pane){var evt=$.layout.getEventObject(evt_or_pane),pane=evt_or_pane;if(evt){evt.stopPropagation();pane=$(this).data("layoutEdge");}if(pane&&!/^(west|east|north|south|center)$/.test(pane)){$.layout.msg('LAYOUT ERROR - Invalid pane-name: "'+pane+'"');pane="error";}return pane;},plugins:{draggable:!!$.fn.draggable,effects:{core:!!$.effects,slide:$.effects&&($.effects.slide||($.effects.effect&&$.effects.effect.slide))}},onCreate:[],onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||$.layout.getScrollbarSize("width");},scrollbarHeight:function(){return window.scrollbarHeight||$.layout.getScrollbarSize("height");},getScrollbarSize:function(dim){var $c=$('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; border: 0; overflow: scroll;"></div>').appendTo("body"),d={width:$c.outerWidth-$c[0].clientWidth,height:100-$c[0].clientHeight};$c.remove();window.scrollbarWidth=d.width;window.scrollbarHeight=d.height;return dim.match(/^(width|height)$/)?d[dim]:d;},disableTextSelection:function(){var $d=$(document),s="textSelectionDisabled",x="textSelectionInitialized";if($.fn.disableSelection){if(!$d.data(x)){$d.on("mouseup",$.layout.enableTextSelection).data(x,true);}if(!$d.data(s)){$d.disableSelection().data(s,true);}}},enableTextSelection:function(){var $d=$(document),s="textSelectionDisabled";if($.fn.enableSelection&&$d.data(s)){$d.enableSelection().data(s,false);}},showInvisibly:function($E,force){if($E&&$E.length&&(force||$E.css("display")==="none")){var s=$E[0].style,CSS={display:s.display||"",visibility:s.visibility||""};$E.css({display:"block",visibility:"hidden"});return CSS;}return{};},getElementDimensions:function($E,inset){var d={css:{},inset:{}},x=d.css,i={bottom:0},N=$.layout.cssNum,R=Math.round,off=$E.offset(),b,p,ei;d.offsetLeft=off.left;d.offsetTop=off.top;if(!inset){inset={};}$.each("Left,Right,Top,Bottom".split(","),function(idx,e){b=x["border"+e]=$.layout.borderWidth($E,e);p=x["padding"+e]=$.layout.cssNum($E,"padding"+e);ei=e.toLowerCase();d.inset[ei]=inset[ei]>=0?inset[ei]:p;i[ei]=d.inset[ei]+b;});x.width=R($E.width());x.height=R($E.height());x.top=N($E,"top",true);x.bottom=N($E,"bottom",true);x.left=N($E,"left",true);x.right=N($E,"right",true);d.outerWidth=R($E.outerWidth());d.outerHeight=R($E.outerHeight());d.innerWidth=max(0,d.outerWidth-i.left-i.right);d.innerHeight=max(0,d.outerHeight-i.top-i.bottom);d.layoutWidth=R($E.innerWidth());d.layoutHeight=R($E.innerHeight());return d;},getElementStyles:function($E,list){var CSS={},style=$E[0].style,props=list.split(","),sides="Top,Bottom,Left,Right".split(","),attrs="Color,Style,Width".split(","),p,s,a,i,j,k;for(i=0;i<props.length;i++){p=props[i];if(p.match(/(border|padding|margin)$/)){for(j=0;j<4;j++){s=sides[j];if(p==="border"){for(k=0;k<3;k++){a=attrs[k];CSS[p+s+a]=style[p+s+a];}}else{CSS[p+s]=style[p+s];}}}else{CSS[p]=style[p];}}return CSS;},cssWidth:function($E,outerWidth){if(outerWidth<=0){return 0;}var lb=$.layout.browser,bs=!lb.boxModel?"border-box":lb.boxSizing?$E.css("boxSizing"):"content-box",b=$.layout.borderWidth,n=$.layout.cssNum,W=outerWidth;if(bs!=="border-box"){W-=(b($E,"Left")+b($E,"Right"));}if(bs==="content-box"){W-=(n($E,"paddingLeft")+n($E,"paddingRight"));}return max(0,W);},cssHeight:function($E,outerHeight){if(outerHeight<=0){return 0;}var lb=$.layout.browser,bs=!lb.boxModel?"border-box":lb.boxSizing?$E.css("boxSizing"):"content-box",b=$.layout.borderWidth,n=$.layout.cssNum,H=outerHeight;if(bs!=="border-box"){H-=(b($E,"Top")+b($E,"Bottom"));}if(bs==="content-box"){H-=(n($E,"paddingTop")+n($E,"paddingBottom"));}return max(0,H);},cssNum:function($E,prop,allowAuto){if(!$E.jquery){$E=$($E);}var CSS=$.layout.showInvisibly($E),p=$.css($E[0],prop,true),v=allowAuto&&p=="auto"?p:Math.round(parseFloat(p)||0);$E.css(CSS);return v;},borderWidth:function(el,side){if(el.jquery){el=el[0];}var b="border"+side.substr(0,1).toUpperCase()+side.substr(1);return $.css(el,b+"Style",true)==="none"?0:Math.round(parseFloat($.css(el,b+"Width",true))||0);},isMouseOverElem:function(evt,el){var $E=$(el||this),d=$E.offset(),T=d.top,L=d.left,R=L+$E.outerWidth(),B=T+$E.outerHeight(),x=evt.pageX,y=evt.pageY;return($.layout.browser.msie&&x<0&&y<0)||((x>=L&&x<=R)&&(y>=T&&y<=B));},msg:function(info,popup,debugTitle,debugOpts){if($.isPlainObject(info)&&window.debugData){if(typeof popup==="string"){debugOpts=debugTitle;debugTitle=popup;}else{if(typeof debugTitle==="object"){debugOpts=debugTitle;debugTitle=null;}}var t=debugTitle||"log( <object> )",o=$.extend({sort:false,returnHTML:false,display:false},debugOpts);if(popup===true||o.display){debugData(info,t,o);}else{if(window.console){console.log(debugData(info,t,o));}}}else{if(popup){alert(info);}else{if(window.console){console.log(info);}else{var id="#layoutLogger",$l=$(id);if(!$l.length){$l=createLog();}$l.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+info.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>");}}}function createLog(){var pos=$.support.fixedPosition?"fixed":"absolute",$e=$('<div id="layoutLogger" style="position: '+pos+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);"><div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;"><span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div><ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul></div>').appendTo("body");$e.css("left",$(window).width()-$e.outerWidth()-5);if($.ui.draggable){$e.draggable({handle:":first-child"});}return $e;}}};(function(){var u=navigator.userAgent.toLowerCase(),m=/(chrome)[ \/]([\w.]+)/.exec(u)||/(webkit)[ \/]([\w.]+)/.exec(u)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(u)||/(msie) ([\w.]+)/.exec(u)||u.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(u)||[],b=m[1]||"",v=m[2]||0,ie=b==="msie",cm=document.compatMode,$s=$.support,bs=$s.boxSizing!==undefined?$s.boxSizing:$s.boxSizingReliable,bm=!ie||!cm||cm==="CSS1Compat"||$s.boxModel||false,lb=$.layout.browser={version:v,safari:b==="webkit",webkit:b==="chrome",msie:ie,isIE6:ie&&v==6,boxModel:bm,boxSizing:!!(typeof bs==="function"?bs():bs)};if(b){lb[b]=true;}if(!bm&&!cm){$(function(){lb.boxModel=$s.boxModel;});}})();$.layout.defaults={name:"",containerClass:"ui-layout-container",inset:null,scrollToBookmarkOnLoad:true,resizeWithWindow:true,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,maskPanesEarly:false,onresizeall_start:null,onresizeall_end:null,onload_start:null,onload_end:null,onunload_start:null,onunload_end:null,initPanes:true,showErrorMessages:true,showDebugMessages:false,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:2,pane_sliding:100,pane_animate:1000,resizer_drag:10000},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button\nInvalid ",containerMissing:"UI Layout Initialization Error\nThe specified layout-container does not exist.",centerPaneMissing:"UI Layout Initialization Error\nThe center-pane element does not exist.\nThe center-pane is a required element.",noContainerHeight:"UI Layout Initialization Warning\nThe layout-container \"CONTAINER\" has no height.\nTherefore the layout is 0-height and hence 'invisible'!",callbackError:"UI Layout Callback Error\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:false,closable:true,resizable:true,slidable:true,initClosed:false,initHidden:false,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:false,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:true,autoResize:true,autoReopen:true,resizerDragOpacity:1,maskContents:false,maskObjects:false,maskZindex:null,resizingGrid:false,livePaneResizing:false,liveContentResizing:false,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:false,preventQuickSlideClose:$.layout.browser.webkit,preventPrematureSlideClose:false,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},showOverflowOnHover:false,enableCursorHotkey:true,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},fxOpacityFix:true,animatePaneSizing:false,children:null,containerSelector:"",initChildren:true,destroyChildren:true,resizeChildren:true,triggerEventsOnLoad:false,triggerEventsDuringLiveResize:true,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}};$.layout.optionsMap={layout:("name,instanceKey,stateManagement,effects,inset,zIndexes,errors,zIndex,scrollToBookmarkOnLoad,showErrorMessages,maskPanesEarly,outset,resizeWithWindow,resizeWithWindowDelay,resizeWithWindowMaxDelay,onresizeall,onresizeall_start,onresizeall_end,onload,onload_start,onload_end,onunload,onunload_start,onunload_end").split(","),center:("paneClass,contentSelector,contentIgnoreSelector,findNestedContent,applyDemoStyles,triggerEventsOnLoad,showOverflowOnHover,maskContents,maskObjects,liveContentResizing,containerSelector,children,initChildren,resizeChildren,destroyChildren,onresize,onresize_start,onresize_end,onsizecontent,onsizecontent_start,onsizecontent_end").split(","),noDefault:("paneSelector,resizerCursor,customHotkey").split(",")};$.layout.transformData=function(hash,addKeys){var json=addKeys?{panes:{},center:{}}:{},branch,optKey,keys,key,val,i,c;if(typeof hash!=="object"){return json;}for(optKey in hash){branch=json;val=hash[optKey];keys=optKey.split("__");c=keys.length-1;for(i=0;i<=c;i++){key=keys[i];if(i===c){if($.isPlainObject(val)){branch[key]=$.layout.transformData(val);}else{branch[key]=val;}}else{if(!branch[key]){branch[key]={};}branch=branch[key];}}}return json;};$.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",childOptions:"children",initChildLayout:"initChildren",destroyChildLayout:"destroyChildren",resizeChildLayout:"resizeChildren",resizeNestedLayout:"resizeChildren",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(opts){var map=$.layout.backwardCompatibility.map,oldData,newData,value;for(var itemPath in map){oldData=getBranch(itemPath);value=oldData.branch[oldData.key];if(value!==undefined){newData=getBranch(map[itemPath],true);newData.branch[newData.key]=value;delete oldData.branch[oldData.key];}}function getBranch(path,create){var a=path.split("."),c=a.length-1,D={branch:opts,key:a[c]},i=0,k,undef;for(;i<c;i++){k=a[i];if(D.branch[k]==undefined){if(create){D.branch=D.branch[k]={};}else{D.branch={};}}else{D.branch=D.branch[k];}}return D;}},renameAllOptions:function(opts){var ren=$.layout.backwardCompatibility.renameOptions;ren(opts);if(opts.defaults){if(typeof opts.panes!=="object"){opts.panes={};}$.extend(true,opts.panes,opts.defaults);delete opts.defaults;}if(opts.panes){ren(opts.panes);}$.each($.layout.config.allPanes,function(i,pane){if(opts[pane]){ren(opts[pane]);}});return opts;}};$.fn.layout=function(opts){var browser=$.layout.browser,_c=$.layout.config,cssW=$.layout.cssWidth,cssH=$.layout.cssHeight,elDims=$.layout.getElementDimensions,styles=$.layout.getElementStyles,evtObj=$.layout.getEventObject,evtPane=$.layout.parsePaneName,options=$.extend(true,{},$.layout.defaults),effects=options.effects=$.extend(true,{},$.layout.effects),state={id:"layout"+$.now(),initialized:false,paneResizing:false,panesSliding:{},container:{innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,layoutWidth:0,layoutHeight:0},north:{childIdx:0},south:{childIdx:0},east:{childIdx:0},west:{childIdx:0},center:{childIdx:0}},children={north:null,south:null,east:null,west:null,center:null},timer={data:{},set:function(s,fn,ms){timer.clear(s);timer.data[s]=setTimeout(fn,ms);},clear:function(s){var t=timer.data;if(t[s]){clearTimeout(t[s]);delete t[s];}}},_log=function(msg,popup,debug){var o=options;if((o.showErrorMessages&&!debug)||(debug&&o.showDebugMessages)){$.layout.msg(o.name+" / "+msg,(popup!==false));}return false;},_runCallbacks=function(evtName,pane,skipBoundEvents){var hasPane=pane&&isStr(pane),s=hasPane?state[pane]:state,o=hasPane?options[pane]:options,lName=options.name,lng=evtName+(evtName.match(/_/)?"":"_end"),shrt=lng.match(/_end$/)?lng.substr(0,lng.length-4):"",fn=o[lng]||o[shrt],retVal="NC",args=[],$P=hasPane?$Ps[pane]:0;if(hasPane&&!$P){return retVal;}if(!hasPane&&$.type(pane)==="boolean"){skipBoundEvents=pane;pane="";}if(fn){try{if(isStr(fn)){if(fn.match(/,/)){args=fn.split(","),fn=eval(args[0]);}else{fn=eval(fn);}}if($.isFunction(fn)){if(args.length){retVal=g(fn)(args[1]);}else{if(hasPane){retVal=g(fn)(pane,$Ps[pane],s,o,lName);}else{retVal=g(fn)(Instance,s,o,lName);}}}}catch(ex){_log(options.errors.callbackError.replace(/EVENT/,$.trim((pane||"")+" "+lng)),false);if($.type(ex)==="string"&&string.length){_log("Exception:  "+ex,false);}}}if(!skipBoundEvents&&retVal!==false){if(hasPane){o=options[pane];s=state[pane];$P.triggerHandler("layoutpane"+lng,[pane,$P,s,o,lName]);if(shrt){$P.triggerHandler("layoutpane"+shrt,[pane,$P,s,o,lName]);}}else{$N.triggerHandler("layout"+lng,[Instance,s,o,lName]);if(shrt){$N.triggerHandler("layout"+shrt,[Instance,s,o,lName]);}}}if(hasPane&&evtName==="onresize_end"){resizeChildren(pane+"",true);}return retVal;function g(f){return f;}},_fixIframe=function(pane){if(browser.mozilla){return;}var $P=$Ps[pane];if(state[pane].tagName==="IFRAME"){$P.css(_c.hidden).css(_c.visible);}else{$P.find("IFRAME").css(_c.hidden).css(_c.visible);}},cssSize=function(pane,outerSize){var fn=_c[pane].dir=="horz"?cssH:cssW;return fn($Ps[pane],outerSize);},cssMinDims=function(pane){var $P=$Ps[pane],dir=_c[pane].dir,d={minWidth:1001-cssW($P,1000),minHeight:1001-cssH($P,1000)};if(dir==="horz"){d.minSize=d.minHeight;}if(dir==="vert"){d.minSize=d.minWidth;}return d;},setOuterWidth=function(el,outerWidth,autoHide){var $E=el,w;if(isStr(el)){$E=$Ps[el];}else{if(!el.jquery){$E=$(el);}}w=cssW($E,outerWidth);$E.css({width:w});if(w>0){if(autoHide&&$E.data("autoHidden")&&$E.innerHeight()>0){$E.show().data("autoHidden",false);if(!browser.mozilla){$E.css(_c.hidden).css(_c.visible);}}}else{if(autoHide&&!$E.data("autoHidden")){$E.hide().data("autoHidden",true);}}},setOuterHeight=function(el,outerHeight,autoHide){var $E=el,h;if(isStr(el)){$E=$Ps[el];}else{if(!el.jquery){$E=$(el);}}h=cssH($E,outerHeight);$E.css({height:h,visibility:"visible"});if(h>0&&$E.innerWidth()>0){if(autoHide&&$E.data("autoHidden")){$E.show().data("autoHidden",false);if(!browser.mozilla){$E.css(_c.hidden).css(_c.visible);}}}else{if(autoHide&&!$E.data("autoHidden")){$E.hide().data("autoHidden",true);}}},_parseSize=function(pane,size,dir){if(!dir){dir=_c[pane].dir;}if(isStr(size)&&size.match(/%/)){size=(size==="100%")?-1:parseInt(size,10)/100;}if(size===0){return 0;}else{if(size>=1){return parseInt(size,10);}}var o=options,avail=0;if(dir=="horz"){avail=sC.innerHeight-($Ps.north?o.north.spacing_open:0)-($Ps.south?o.south.spacing_open:0);}else{if(dir=="vert"){avail=sC.innerWidth-($Ps.west?o.west.spacing_open:0)-($Ps.east?o.east.spacing_open:0);}}if(size===-1){return avail;}else{if(size>0){return round(avail*size);}else{if(pane=="center"){return 0;}else{var dim=(dir==="horz"?"height":"width"),$P=$Ps[pane],$C=dim==="height"?$Cs[pane]:false,vis=$.layout.showInvisibly($P),szP=$P.css(dim),szC=$C?$C.css(dim):0;$P.css(dim,"auto");if($C){$C.css(dim,"auto");}size=(dim==="height")?$P.outerHeight():$P.outerWidth();$P.css(dim,szP).css(vis);if($C){$C.css(dim,szC);}return size;}}}},getPaneSize=function(pane,inclSpace){var $P=$Ps[pane],o=options[pane],s=state[pane],oSp=(inclSpace?o.spacing_open:0),cSp=(inclSpace?o.spacing_closed:0);if(!$P||s.isHidden){return 0;}else{if(s.isClosed||(s.isSliding&&inclSpace)){return cSp;}else{if(_c[pane].dir==="horz"){return $P.outerHeight()+oSp;}else{return $P.outerWidth()+oSp;}}}},setSizeLimits=function(pane,slide){if(!isInitialized()){return;}var o=options[pane],s=state[pane],c=_c[pane],dir=c.dir,type=c.sizeType.toLowerCase(),isSliding=(slide!=undefined?slide:s.isSliding),$P=$Ps[pane],paneSpacing=o.spacing_open,altPane=_c.oppositeEdge[pane],altS=state[altPane],$altP=$Ps[altPane],altPaneSize=(!$altP||altS.isVisible===false||altS.isSliding?0:(dir=="horz"?$altP.outerHeight():$altP.outerWidth())),altPaneSpacing=((!$altP||altS.isHidden?0:options[altPane][altS.isClosed!==false?"spacing_closed":"spacing_open"])||0),containerSize=(dir=="horz"?sC.innerHeight:sC.innerWidth),minCenterDims=cssMinDims("center"),minCenterSize=dir=="horz"?max(options.center.minHeight,minCenterDims.minHeight):max(options.center.minWidth,minCenterDims.minWidth),limitSize=(containerSize-paneSpacing-(isSliding?0:(_parseSize("center",minCenterSize,dir)+altPaneSize+altPaneSpacing))),minSize=s.minSize=max(_parseSize(pane,o.minSize),cssMinDims(pane).minSize),maxSize=s.maxSize=min((o.maxSize?_parseSize(pane,o.maxSize):100000),limitSize),r=s.resizerPosition={},top=sC.inset.top,left=sC.inset.left,W=sC.innerWidth,H=sC.innerHeight,rW=o.spacing_open;switch(pane){case"north":r.min=top+minSize;r.max=top+maxSize;break;case"west":r.min=left+minSize;r.max=left+maxSize;break;case"south":r.min=top+H-maxSize-rW;r.max=top+H-minSize-rW;break;case"east":r.min=left+W-maxSize-rW;r.max=left+W-minSize-rW;break;}},calcNewCenterPaneDims=function(){var d={top:getPaneSize("north",true),bottom:getPaneSize("south",true),left:getPaneSize("west",true),right:getPaneSize("east",true),width:0,height:0};d.width=sC.innerWidth-d.left-d.right;d.height=sC.innerHeight-d.bottom-d.top;d.top+=sC.inset.top;d.bottom+=sC.inset.bottom;d.left+=sC.inset.left;d.right+=sC.inset.right;return d;},getHoverClasses=function(el,allStates){var $El=$(el),type=$El.data("layoutRole"),pane=$El.data("layoutEdge"),o=options[pane],root=o[type+"Class"],_pane="-"+pane,_open="-open",_closed="-closed",_slide="-sliding",_hover="-hover ",_state=$El.hasClass(root+_closed)?_closed:_open,_alt=_state===_closed?_open:_closed,classes=(root+_hover)+(root+_pane+_hover)+(root+_state+_hover)+(root+_pane+_state+_hover);if(allStates){classes+=(root+_alt+_hover)+(root+_pane+_alt+_hover);}if(type=="resizer"&&$El.hasClass(root+_slide)){classes+=(root+_slide+_hover)+(root+_pane+_slide+_hover);}return $.trim(classes);},addHover=function(evt,el){var $E=$(el||this);if(evt&&$E.data("layoutRole")==="toggler"){evt.stopPropagation();}$E.addClass(getHoverClasses($E));},removeHover=function(evt,el){var $E=$(el||this);$E.removeClass(getHoverClasses($E,true));},onResizerEnter=function(evt){var pane=$(this).data("layoutEdge"),s=state[pane],$d=$(document);if(s.isResizing||state.paneResizing){return;}if(options.maskPanesEarly){showMasks(pane,{resizing:true});}},onResizerLeave=function(evt,el){var e=el||this,pane=$(e).data("layoutEdge"),name=pane+"ResizerLeave",$d=$(document);timer.clear(pane+"_openSlider");timer.clear(name);if(!el){timer.set(name,function(){onResizerLeave(evt,e);},200);}else{if(options.maskPanesEarly&&!state.paneResizing){hideMasks();}}},_create=function(){initOptions();var o=options,s=state;s.creatingLayout=true;runPluginCallbacks(Instance,$.layout.onCreate);if(false===_runCallbacks("onload_start")){return"cancel";}_initContainer();initHotkeys();$(window).bind("unload."+sID,unload);runPluginCallbacks(Instance,$.layout.onLoad);if(o.initPanes){_initLayoutElements();}delete s.creatingLayout;return state.initialized;},isInitialized=function(){if(state.initialized||state.creatingLayout){return true;}else{return _initLayoutElements();}},_initLayoutElements=function(retry){var o=options;if(!$N.is(":visible")){if(!retry&&browser.webkit&&$N[0].tagName==="BODY"){setTimeout(function(){_initLayoutElements(true);},50);}return false;}if(!getPane("center").length){return _log(o.errors.centerPaneMissing);}state.creatingLayout=true;$.extend(sC,elDims($N,o.inset));initPanes();if(o.scrollToBookmarkOnLoad){var l=self.location;if(l.hash){l.replace(l.hash);}}if(Instance.hasParentLayout){o.resizeWithWindow=false;}else{if(o.resizeWithWindow){$(window).bind("resize."+sID,windowResize);}}delete state.creatingLayout;state.initialized=true;runPluginCallbacks(Instance,$.layout.onReady);_runCallbacks("onload_end");return true;},createChildren=function(evt_or_pane,opts){var pane=evtPane.call(this,evt_or_pane),$P=$Ps[pane];if(!$P){return;}var $C=$Cs[pane],s=state[pane],o=options[pane],sm=options.stateManagement||{},cos=opts?(o.children=opts):o.children;if($.isPlainObject(cos)){cos=[cos];}else{if(!cos||!$.isArray(cos)){return;}}$.each(cos,function(idx,co){if(!$.isPlainObject(co)){return;}var $containers=co.containerSelector?$P.find(co.containerSelector):($C||$P);$containers.each(function(){var $cont=$(this),child=$cont.data("layout");if(!child){setInstanceKey({container:$cont,options:co},s);if(sm.includeChildren&&state.stateData[pane]){var paneChildren=state.stateData[pane].children||{},childState=paneChildren[co.instanceKey],co_sm=co.stateManagement||(co.stateManagement={autoLoad:true});if(co_sm.autoLoad===true&&childState){co_sm.autoSave=false;co_sm.includeChildren=true;co_sm.autoLoad=$.extend(true,{},childState);}}child=$cont.layout(co);if(child){refreshChildren(pane,child);}}});});},setInstanceKey=function(child,parentPaneState){var $c=child.container,o=child.options,sm=o.stateManagement,key=o.instanceKey||$c.data("layoutInstanceKey");if(!key){key=(sm&&sm.cookie?sm.cookie.name:"")||o.name;}if(!key){key="layout"+(++parentPaneState.childIdx);}else{key=key.replace(/[^\w-]/gi,"_").replace(/_{2,}/g,"_");}o.instanceKey=key;$c.data("layoutInstanceKey",key);return key;},refreshChildren=function(pane,newChild){var $P=$Ps[pane],pC=children[pane],s=state[pane],o;if($.isPlainObject(pC)){$.each(pC,function(key,child){if(child.destroyed){delete pC[key];}});if($.isEmptyObject(pC)){pC=children[pane]=null;}}if(!newChild&&!pC){newChild=$P.data("layout");}if(newChild){newChild.hasParentLayout=true;o=newChild.options;setInstanceKey(newChild,s);if(!pC){pC=children[pane]={};}pC[o.instanceKey]=newChild.container.data("layout");}Instance[pane].children=children[pane];if(!newChild){createChildren(pane);}},windowResize=function(){var o=options,delay=Number(o.resizeWithWindowDelay);if(delay<10){delay=100;}timer.clear("winResize");timer.set("winResize",function(){timer.clear("winResize");timer.clear("winResizeRepeater");var dims=elDims($N,o.inset);if(dims.innerWidth!==sC.innerWidth||dims.innerHeight!==sC.innerHeight){resizeAll();}},delay);if(!timer.data.winResizeRepeater){setWindowResizeRepeater();}},setWindowResizeRepeater=function(){var delay=Number(options.resizeWithWindowMaxDelay);if(delay>0){timer.set("winResizeRepeater",function(){setWindowResizeRepeater();resizeAll();},delay);}},unload=function(){var o=options;_runCallbacks("onunload_start");runPluginCallbacks(Instance,$.layout.onUnload);_runCallbacks("onunload_end");},_initContainer=function(){var N=$N[0],$H=$("html"),tag=sC.tagName=N.tagName,id=sC.id=N.id,cls=sC.className=N.className,o=options,name=o.name,props="position,margin,padding,border",css="layoutCSS",CSS={},hid="hidden",parent=$N.data("parentLayout"),pane=$N.data("layoutEdge"),isChild=parent&&pane,num=$.layout.cssNum,$parent,n;sC.selector=$N.selector.split(".slice")[0];sC.ref=(o.name?o.name+" layout / ":"")+tag+(id?"#"+id:cls?".["+cls+"]":"");sC.isBody=(tag==="BODY");if(!isChild&&!sC.isBody){$parent=$N.closest("."+$.layout.defaults.panes.paneClass);parent=$parent.data("parentLayout");pane=$parent.data("layoutEdge");isChild=parent&&pane;}$N.data({layout:Instance,layoutContainer:sID}).addClass(o.containerClass);var layoutMethods={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(name in layoutMethods){$N.bind("layout"+name.toLowerCase()+"."+sID,Instance[layoutMethods[name]||name]);}if(isChild){Instance.hasParentLayout=true;parent.refreshChildren(pane,Instance);}if(!$N.data(css)){if(sC.isBody){$N.data(css,$.extend(styles($N,props),{height:$N.css("height"),overflow:$N.css("overflow"),overflowX:$N.css("overflowX"),overflowY:$N.css("overflowY")}));$H.data(css,$.extend(styles($H,"padding"),{height:"auto",overflow:$H.css("overflow"),overflowX:$H.css("overflowX"),overflowY:$H.css("overflowY")}));}else{$N.data(css,styles($N,props+",top,bottom,left,right,width,height,overflow,overflowX,overflowY"));}}try{CSS={overflow:hid,overflowX:hid,overflowY:hid};$N.css(CSS);if(o.inset&&!$.isPlainObject(o.inset)){n=parseInt(o.inset,10)||0;o.inset={top:n,bottom:n,left:n,right:n};}if(sC.isBody){if(!o.outset){o.outset={top:num($H,"paddingTop"),bottom:num($H,"paddingBottom"),left:num($H,"paddingLeft"),right:num($H,"paddingRight")};}else{if(!$.isPlainObject(o.outset)){n=parseInt(o.outset,10)||0;o.outset={top:n,bottom:n,left:n,right:n};}}$H.css(CSS).css({height:"100%",border:"none",padding:0,margin:0});if(browser.isIE6){$N.css({width:"100%",height:"100%",border:"none",padding:0,margin:0,position:"relative"});if(!o.inset){o.inset=elDims($N).inset;}}else{$N.css({width:"auto",height:"auto",margin:0,position:"absolute"});$N.css(o.outset);}$.extend(sC,elDims($N,o.inset));}else{var p=$N.css("position");if(!p||!p.match(/(fixed|absolute|relative)/)){$N.css("position","relative");}if($N.is(":visible")){$.extend(sC,elDims($N,o.inset));if(sC.innerHeight<1){_log(o.errors.noContainerHeight.replace(/CONTAINER/,sC.ref));}}}if(num($N,"minWidth")){$N.parent().css("overflowX","auto");}if(num($N,"minHeight")){$N.parent().css("overflowY","auto");}}catch(ex){}},initHotkeys=function(panes){panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(i,pane){var o=options[pane];if(o.enableCursorHotkey||o.customHotkey){$(document).bind("keydown."+sID,keyDown);return false;}});},initOptions=function(){var data,d,pane,key,val,i,c,o;opts=$.layout.transformData(opts,true);opts=$.layout.backwardCompatibility.renameAllOptions(opts);if(!$.isEmptyObject(opts.panes)){data=$.layout.optionsMap.noDefault;for(i=0,c=data.length;i<c;i++){key=data[i];delete opts.panes[key];}data=$.layout.optionsMap.layout;for(i=0,c=data.length;i<c;i++){key=data[i];delete opts.panes[key];}}data=$.layout.optionsMap.layout;var rootKeys=$.layout.config.optionRootKeys;for(key in opts){val=opts[key];if($.inArray(key,rootKeys)<0&&$.inArray(key,data)<0){if(!opts.panes[key]){opts.panes[key]=$.isPlainObject(val)?$.extend(true,{},val):val;}delete opts[key];}}$.extend(true,options,opts);$.each(_c.allPanes,function(i,pane){_c[pane]=$.extend(true,{},_c.panes,_c[pane]);d=options.panes;o=options[pane];if(pane==="center"){data=$.layout.optionsMap.center;for(i=0,c=data.length;i<c;i++){key=data[i];if(!opts.center[key]&&(opts.panes[key]||!o[key])){o[key]=d[key];}}}else{o=options[pane]=$.extend(true,{},d,o);createFxOptions(pane);if(!o.resizerClass){o.resizerClass="ui-layout-resizer";}if(!o.togglerClass){o.togglerClass="ui-layout-toggler";}}if(!o.paneClass){o.paneClass="ui-layout-pane";}});var zo=opts.zIndex,z=options.zIndexes;if(zo>0){z.pane_normal=zo;z.content_mask=max(zo+1,z.content_mask);z.resizer_normal=max(zo+2,z.resizer_normal);}delete options.panes;function createFxOptions(pane){var o=options[pane],d=options.panes;if(!o.fxSettings){o.fxSettings={};}if(!d.fxSettings){d.fxSettings={};}$.each(["_open","_close","_size"],function(i,n){var sName="fxName"+n,sSpeed="fxSpeed"+n,sSettings="fxSettings"+n,fxName=o[sName]=o[sName]||d[sName]||o.fxName||d.fxName||"none",fxExists=$.effects&&($.effects[fxName]||($.effects.effect&&$.effects.effect[fxName]));if(fxName==="none"||!options.effects[fxName]||!fxExists){fxName=o[sName]="none";}var fx=options.effects[fxName]||{},fx_all=fx.all||null,fx_pane=fx[pane]||null;o[sSpeed]=o[sSpeed]||d[sSpeed]||o.fxSpeed||d.fxSpeed||null;o[sSettings]=$.extend(true,{},fx_all,fx_pane,d.fxSettings,o.fxSettings,d[sSettings],o[sSettings]);});delete o.fxName;delete o.fxSpeed;delete o.fxSettings;}},getPane=function(pane){var sel=options[pane].paneSelector;if(sel.substr(0,1)==="#"){return $N.find(sel).eq(0);}else{var $P=$N.children(sel).eq(0);return $P.length?$P:$N.children("form:first").children(sel).eq(0);}},initPanes=function(evt){evtPane(evt);$.each(_c.allPanes,function(idx,pane){addPane(pane,true);});initHandles();$.each(_c.borderPanes,function(i,pane){if($Ps[pane]&&state[pane].isVisible){setSizeLimits(pane);makePaneFit(pane);}});sizeMidPanes("center");$.each(_c.allPanes,function(idx,pane){afterInitPane(pane);});},addPane=function(pane,force){if(!force&&!isInitialized()){return;}var o=options[pane],s=state[pane],c=_c[pane],dir=c.dir,fx=s.fx,spacing=o.spacing_open||0,isCenter=(pane==="center"),CSS={},$P=$Ps[pane],size,minSize,maxSize,child;if($P){removePane(pane,false,true,false);}else{$Cs[pane]=false;}$P=$Ps[pane]=getPane(pane);if(!$P.length){$Ps[pane]=false;return;}if(!$P.data("layoutCSS")){var props="position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border";$P.data("layoutCSS",styles($P,props));}Instance[pane]={name:pane,pane:$Ps[pane],content:$Cs[pane],options:options[pane],state:state[pane],children:children[pane]};$P.data({parentLayout:Instance,layoutPane:Instance[pane],layoutEdge:pane,layoutRole:"pane"}).css(c.cssReq).css("zIndex",options.zIndexes.pane_normal).css(o.applyDemoStyles?c.cssDemo:{}).addClass(o.paneClass+" "+o.paneClass+"-"+pane).bind("mouseenter."+sID,addHover).bind("mouseleave."+sID,removeHover);var paneMethods={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildren:"",resizeChildren:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"},name;for(name in paneMethods){$P.bind("layoutpane"+name.toLowerCase()+"."+sID,Instance[paneMethods[name]||name]);}initContent(pane,false);if(!isCenter){size=s.size=_parseSize(pane,o.size);minSize=_parseSize(pane,o.minSize)||1;maxSize=_parseSize(pane,o.maxSize)||100000;if(size>0){size=max(min(size,maxSize),minSize);}s.autoResize=o.autoResize;s.isClosed=false;s.isSliding=false;s.isResizing=false;s.isHidden=false;if(!s.pins){s.pins=[];}}s.tagName=$P[0].tagName;s.edge=pane;s.noRoom=false;s.isVisible=true;setPanePosition(pane);if(dir==="horz"){CSS.height=cssH($P,size);}else{if(dir==="vert"){CSS.width=cssW($P,size);}}$P.css(CSS);if(dir!="horz"){sizeMidPanes(pane,true);}if(state.initialized){initHandles(pane);initHotkeys(pane);}if(o.initClosed&&o.closable&&!o.initHidden){close(pane,true,true);}else{if(o.initHidden||o.initClosed){hide(pane);}else{if(!s.noRoom){$P.css("display","block");}}}$P.css("visibility","visible");if(o.showOverflowOnHover){$P.hover(allowOverflow,resetOverflow);}if(state.initialized){afterInitPane(pane);}},afterInitPane=function(pane){var $P=$Ps[pane],s=state[pane],o=options[pane];if(!$P){return;}if($P.data("layout")){refreshChildren(pane,$P.data("layout"));}if(s.isVisible){if(state.initialized){resizeAll();}else{sizeContent(pane);}if(o.triggerEventsOnLoad){_runCallbacks("onresize_end",pane);}else{resizeChildren(pane,true);}}if(o.initChildren&&o.children){createChildren(pane);}},setPanePosition=function(panes){panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(i,pane){var $P=$Ps[pane],$R=$Rs[pane],o=options[pane],s=state[pane],side=_c[pane].side,CSS={};if(!$P){return;}switch(pane){case"north":CSS.top=sC.inset.top;CSS.left=sC.inset.left;CSS.right=sC.inset.right;break;case"south":CSS.bottom=sC.inset.bottom;CSS.left=sC.inset.left;CSS.right=sC.inset.right;break;case"west":CSS.left=sC.inset.left;break;case"east":CSS.right=sC.inset.right;break;case"center":}$P.css(CSS);if($R&&s.isClosed){$R.css(side,sC.inset[side]);}else{if($R&&!s.isHidden){$R.css(side,sC.inset[side]+getPaneSize(pane));}}});},initHandles=function(panes){panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(i,pane){var $P=$Ps[pane];$Rs[pane]=false;$Ts[pane]=false;if(!$P){return;}var o=options[pane],s=state[pane],c=_c[pane],paneId=o.paneSelector.substr(0,1)==="#"?o.paneSelector.substr(1):"",rClass=o.resizerClass,tClass=o.togglerClass,spacing=(s.isVisible?o.spacing_open:o.spacing_closed),_pane="-"+pane,_state=(s.isVisible?"-open":"-closed"),I=Instance[pane],$R=I.resizer=$Rs[pane]=$("<div></div>"),$T=I.toggler=(o.closable?$Ts[pane]=$("<div></div>"):false);if(!s.isVisible&&o.slidable){$R.attr("title",o.tips.Slide).css("cursor",o.sliderCursor);}$R.attr("id",paneId?paneId+"-resizer":"").data({parentLayout:Instance,layoutPane:Instance[pane],layoutEdge:pane,layoutRole:"resizer"}).css(_c.resizers.cssReq).css("zIndex",options.zIndexes.resizer_normal).css(o.applyDemoStyles?_c.resizers.cssDemo:{}).addClass(rClass+" "+rClass+_pane).hover(addHover,removeHover).hover(onResizerEnter,onResizerLeave).mousedown($.layout.disableTextSelection).mouseup($.layout.enableTextSelection).appendTo($N);if($.fn.disableSelection){$R.disableSelection();}if(o.resizerDblClickToggle){$R.bind("dblclick."+sID,toggle);}if($T){$T.attr("id",paneId?paneId+"-toggler":"").data({parentLayout:Instance,layoutPane:Instance[pane],layoutEdge:pane,layoutRole:"toggler"}).css(_c.togglers.cssReq).css(o.applyDemoStyles?_c.togglers.cssDemo:{}).addClass(tClass+" "+tClass+_pane).hover(addHover,removeHover).bind("mouseenter",onResizerEnter).appendTo($R);if(o.togglerContent_open){$("<span>"+o.togglerContent_open+"</span>").data({layoutEdge:pane,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",pane).addClass("content content-open").css("display","none").appendTo($T);}if(o.togglerContent_closed){$("<span>"+o.togglerContent_closed+"</span>").data({layoutEdge:pane,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo($T);}enableClosable(pane);}initResizable(pane);if(s.isVisible){setAsOpen(pane);}else{setAsClosed(pane);bindStartSlidingEvents(pane,true);}});sizeHandles();},initContent=function(pane,resize){if(!isInitialized()){return;}var o=options[pane],sel=o.contentSelector,I=Instance[pane],$P=$Ps[pane],$C;if(sel){$C=I.content=$Cs[pane]=(o.findNestedContent)?$P.find(sel).eq(0):$P.children(sel).eq(0);}if($C&&$C.length){$C.data("layoutRole","content");if(!$C.data("layoutCSS")){$C.data("layoutCSS",styles($C,"height"));}$C.css(_c.content.cssReq);if(o.applyDemoStyles){$C.css(_c.content.cssDemo);$P.css(_c.content.cssDemoPane);}if($P.css("overflowX").match(/(scroll|auto)/)){$P.css("overflow","hidden");}state[pane].content={};if(resize!==false){sizeContent(pane);}}else{I.content=$Cs[pane]=false;}},initResizable=function(panes){var draggingAvailable=$.layout.plugins.draggable,side;panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(idx,pane){var o=options[pane];if(!draggingAvailable||!$Ps[pane]||!o.resizable){o.resizable=false;return true;}var s=state[pane],z=options.zIndexes,c=_c[pane],side=c.dir=="horz"?"top":"left",$P=$Ps[pane],$R=$Rs[pane],base=o.resizerClass,lastPos=0,r,live,resizerClass=base+"-drag",resizerPaneClass=base+"-"+pane+"-drag",helperClass=base+"-dragging",helperPaneClass=base+"-"+pane+"-dragging",helperLimitClass=base+"-dragging-limit",helperPaneLimitClass=base+"-"+pane+"-dragging-limit",helperClassesSet=false;if(!s.isClosed){$R.attr("title",o.tips.Resize).css("cursor",o.resizerCursor);}$R.draggable({containment:$N[0],axis:(c.dir=="horz"?"y":"x"),delay:0,distance:1,grid:o.resizingGrid,helper:"clone",opacity:o.resizerDragOpacity,addClasses:false,zIndex:z.resizer_drag,start:function(e,ui){o=options[pane];s=state[pane];live=o.livePaneResizing;if(false===_runCallbacks("ondrag_start",pane)){return false;}s.isResizing=true;state.paneResizing=pane;timer.clear(pane+"_closeSlider");setSizeLimits(pane);r=s.resizerPosition;lastPos=ui.position[side];$R.addClass(resizerClass+" "+resizerPaneClass);helperClassesSet=false;showMasks(pane,{resizing:true});},drag:function(e,ui){if(!helperClassesSet){ui.helper.addClass(helperClass+" "+helperPaneClass).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden");helperClassesSet=true;if(s.isSliding){$Ps[pane].css("zIndex",z.pane_sliding);}}var limit=0;if(ui.position[side]<r.min){ui.position[side]=r.min;limit=-1;}else{if(ui.position[side]>r.max){ui.position[side]=r.max;limit=1;}}if(limit){ui.helper.addClass(helperLimitClass+" "+helperPaneLimitClass);window.defaultStatus=(limit>0&&pane.match(/(north|west)/))||(limit<0&&pane.match(/(south|east)/))?o.tips.maxSizeWarning:o.tips.minSizeWarning;}else{ui.helper.removeClass(helperLimitClass+" "+helperPaneLimitClass);window.defaultStatus="";}if(live&&Math.abs(ui.position[side]-lastPos)>=o.liveResizingTolerance){lastPos=ui.position[side];resizePanes(e,ui,pane);}},stop:function(e,ui){$("body").enableSelection();window.defaultStatus="";$R.removeClass(resizerClass+" "+resizerPaneClass);s.isResizing=false;state.paneResizing=false;resizePanes(e,ui,pane,true);}});});var resizePanes=function(evt,ui,pane,resizingDone){var dragPos=ui.position,c=_c[pane],o=options[pane],s=state[pane],resizerPos;switch(pane){case"north":resizerPos=dragPos.top;break;case"west":resizerPos=dragPos.left;break;case"south":resizerPos=sC.layoutHeight-dragPos.top-o.spacing_open;break;case"east":resizerPos=sC.layoutWidth-dragPos.left-o.spacing_open;break;}var newSize=resizerPos-sC.inset[c.side];if(!resizingDone){if(Math.abs(newSize-s.size)<o.liveResizingTolerance){return;}manualSizePane(pane,newSize,false,true);sizeMasks();}else{if(false!==_runCallbacks("ondrag_end",pane)){manualSizePane(pane,newSize,false,true);}hideMasks(true);if(s.isSliding){showMasks(pane,{resizing:true});}}};},sizeMask=function(){var $M=$(this),pane=$M.data("layoutMask"),s=state[pane];if(s.tagName=="IFRAME"&&s.isVisible){$M.css({top:s.offsetTop,left:s.offsetLeft,width:s.outerWidth,height:s.outerHeight});}},sizeMasks=function(){$Ms.each(sizeMask);},showMasks=function(pane,args){var c=_c[pane],panes=["center"],z=options.zIndexes,a=$.extend({objectsOnly:false,animation:false,resizing:true,sliding:state[pane].isSliding},args),o,s;if(a.resizing){panes.push(pane);}if(a.sliding){panes.push(_c.oppositeEdge[pane]);}if(c.dir==="horz"){panes.push("west");panes.push("east");}$.each(panes,function(i,p){s=state[p];o=options[p];if(s.isVisible&&(o.maskObjects||(!a.objectsOnly&&o.maskContents))){getMasks(p).each(function(){sizeMask.call(this);this.style.zIndex=s.isSliding?z.pane_sliding+1:z.pane_normal+1;this.style.display="block";});}});},hideMasks=function(force){if(force||!state.paneResizing){$Ms.hide();}else{if(!force&&!$.isEmptyObject(state.panesSliding)){var i=$Ms.length-1,p,$M;for(;i>=0;i--){$M=$Ms.eq(i);p=$M.data("layoutMask");if(!options[p].maskObjects){$M.hide();}}}}},getMasks=function(pane){var $Masks=$([]),$M,i=0,c=$Ms.length;for(;i<c;i++){$M=$Ms.eq(i);if($M.data("layoutMask")===pane){$Masks=$Masks.add($M);}}if($Masks.length){return $Masks;}else{return createMasks(pane);}},createMasks=function(pane){var $P=$Ps[pane],s=state[pane],o=options[pane],z=options.zIndexes,isIframe,el,$M,css,i;if(!o.maskContents&&!o.maskObjects){return $([]);}for(i=0;i<(o.maskObjects?2:1);i++){isIframe=o.maskObjects&&i==0;el=document.createElement(isIframe?"iframe":"div");$M=$(el).data("layoutMask",pane);el.className="ui-layout-mask ui-layout-mask-"+pane;css=el.style;css.background="#FFF";css.position="absolute";css.display="block";if(isIframe){el.src="about:blank";el.frameborder=0;css.border=0;css.opacity=0;css.filter="Alpha(Opacity='0')";}else{css.opacity=0.001;css.filter="Alpha(Opacity='1')";}if(s.tagName=="IFRAME"){css.zIndex=z.pane_normal+1;$N.append(el);}else{$M.addClass("ui-layout-mask-inside-pane");css.zIndex=o.maskZindex||z.content_mask;css.top=0;css.left=0;css.width="100%";css.height="100%";$P.append(el);}$Ms=$Ms.add(el);}return $Ms;},destroy=function(evt_or_destroyChildren,destroyChildren){$(window).unbind("."+sID);$(document).unbind("."+sID);if(typeof evt_or_destroyChildren==="object"){evtPane(evt_or_destroyChildren);}else{destroyChildren=evt_or_destroyChildren;}$N.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(options.containerClass).unbind("."+sID);$Ms.remove();$.each(_c.allPanes,function(i,pane){removePane(pane,false,true,destroyChildren);});var css="layoutCSS";if($N.data(css)&&!$N.data("layoutRole")){$N.css($N.data(css)).removeData(css);}if(sC.tagName==="BODY"&&($N=$("html")).data(css)){$N.css($N.data(css)).removeData(css);}runPluginCallbacks(Instance,$.layout.onDestroy);unload();for(var n in Instance){if(!n.match(/^(container|options)$/)){delete Instance[n];}}Instance.destroyed=true;return Instance;},removePane=function(evt_or_pane,remove,skipResize,destroyChild){if(!isInitialized()){return;}var pane=evtPane.call(this,evt_or_pane),$P=$Ps[pane],$C=$Cs[pane],$R=$Rs[pane],$T=$Ts[pane];if($P&&$.isEmptyObject($P.data())){$P=false;}if($C&&$.isEmptyObject($C.data())){$C=false;}if($R&&$.isEmptyObject($R.data())){$R=false;}if($T&&$.isEmptyObject($T.data())){$T=false;}if($P){$P.stop(true,true);}var o=options[pane],s=state[pane],d="layout",css="layoutCSS",pC=children[pane],hasChildren=$.isPlainObject(pC)&&!$.isEmptyObject(pC),destroy=destroyChild!==undefined?destroyChild:o.destroyChildren;if(hasChildren&&destroy){$.each(pC,function(key,child){if(!child.destroyed){child.destroy(true);}if(child.destroyed){delete pC[key];}});if($.isEmptyObject(pC)){pC=children[pane]=null;hasChildren=false;}}if($P&&remove&&!hasChildren){$P.remove();}else{if($P&&$P[0]){var root=o.paneClass,pRoot=root+"-"+pane,_open="-open",_sliding="-sliding",_closed="-closed",classes=[root,root+_open,root+_closed,root+_sliding,pRoot,pRoot+_open,pRoot+_closed,pRoot+_sliding];$.merge(classes,getHoverClasses($P,true));$P.removeClass(classes.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+sID);if(hasChildren&&$C){$C.width($C.width());$.each(pC,function(key,child){child.resizeAll();});}else{if($C){$C.css($C.data(css)).removeData(css).removeData("layoutRole");}}if(!$P.data(d)){$P.css($P.data(css)).removeData(css);}}}if($T){$T.remove();}if($R){$R.remove();}Instance[pane]=$Ps[pane]=$Cs[pane]=$Rs[pane]=$Ts[pane]=false;s={removed:true};if(!skipResize){resizeAll();}},_hidePane=function(pane){var $P=$Ps[pane],o=options[pane],s=$P[0].style;if(o.useOffscreenClose){if(!$P.data(_c.offscreenReset)){$P.data(_c.offscreenReset,{left:s.left,right:s.right});}$P.css(_c.offscreenCSS);}else{$P.hide().removeData(_c.offscreenReset);}},_showPane=function(pane){var $P=$Ps[pane],o=options[pane],off=_c.offscreenCSS,old=$P.data(_c.offscreenReset),s=$P[0].style;$P.show().removeData(_c.offscreenReset);if(o.useOffscreenClose&&old){if(s.left==off.left){s.left=old.left;}if(s.right==off.right){s.right=old.right;}}},hide=function(evt_or_pane,noAnimation){if(!isInitialized()){return;}var pane=evtPane.call(this,evt_or_pane),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(pane==="center"||!$P||s.isHidden){return;}if(state.initialized&&false===_runCallbacks("onhide_start",pane)){return;}s.isSliding=false;delete state.panesSliding[pane];if($R){$R.hide();}if(!state.initialized||s.isClosed){s.isClosed=true;s.isHidden=true;s.isVisible=false;if(!state.initialized){_hidePane(pane);}sizeMidPanes(_c[pane].dir==="horz"?"":"center");if(state.initialized||o.triggerEventsOnLoad){_runCallbacks("onhide_end",pane);}}else{s.isHiding=true;close(pane,false,noAnimation);}},show=function(evt_or_pane,openPane,noAnimation,noAlert){if(!isInitialized()){return;}var pane=evtPane.call(this,evt_or_pane),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane];if(pane==="center"||!$P||!s.isHidden){return;}if(false===_runCallbacks("onshow_start",pane)){return;}s.isShowing=true;s.isSliding=false;delete state.panesSliding[pane];if(openPane===false){close(pane,true);}else{open(pane,false,noAnimation,noAlert);}},toggle=function(evt_or_pane,slide){if(!isInitialized()){return;}var evt=evtObj(evt_or_pane),pane=evtPane.call(this,evt_or_pane),s=state[pane];if(evt){evt.stopImmediatePropagation();}if(s.isHidden){show(pane);}else{if(s.isClosed){open(pane,!!slide);}else{close(pane);}}},_closePane=function(pane,setHandles){var $P=$Ps[pane],s=state[pane];_hidePane(pane);s.isClosed=true;s.isVisible=false;if(setHandles){setAsClosed(pane);}},close=function(evt_or_pane,force,noAnimation,skipCallback){var pane=evtPane.call(this,evt_or_pane);if(pane==="center"){return;}if(!state.initialized&&$Ps[pane]){_closePane(pane,true);return;}if(!isInitialized()){return;}var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],c=_c[pane],doFX,isShowing,isHiding,wasSliding;$N.queue(function(queueNext){if(!$P||(!o.closable&&!s.isShowing&&!s.isHiding)||(!force&&s.isClosed&&!s.isShowing)){return queueNext();}var abort=!s.isShowing&&false===_runCallbacks("onclose_start",pane);isShowing=s.isShowing;isHiding=s.isHiding;wasSliding=s.isSliding;delete s.isShowing;delete s.isHiding;if(abort){return queueNext();}doFX=!noAnimation&&!s.isClosed&&(o.fxName_close!="none");s.isMoving=true;s.isClosed=true;s.isVisible=false;if(isHiding){s.isHidden=true;}else{if(isShowing){s.isHidden=false;}}if(s.isSliding){bindStopSlidingEvents(pane,false);}else{sizeMidPanes(_c[pane].dir==="horz"?"":"center",false);}setAsClosed(pane);if(doFX){lockPaneForFX(pane,true);$P.hide(o.fxName_close,o.fxSettings_close,o.fxSpeed_close,function(){lockPaneForFX(pane,false);if(s.isClosed){close_2();}queueNext();});}else{_hidePane(pane);close_2();queueNext();}});function close_2(){s.isMoving=false;bindStartSlidingEvents(pane,true);var altPane=_c.oppositeEdge[pane];if(state[altPane].noRoom){setSizeLimits(altPane);makePaneFit(altPane);}if(!skipCallback&&(state.initialized||o.triggerEventsOnLoad)){if(!isShowing){_runCallbacks("onclose_end",pane);}if(isShowing){_runCallbacks("onshow_end",pane);}if(isHiding){_runCallbacks("onhide_end",pane);}}}},setAsClosed=function(pane){if(!$Rs[pane]){return;}var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],side=_c[pane].side,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",_sliding="-sliding",_closed="-closed";$R.css(side,sC.inset[side]).removeClass(rClass+_open+" "+rClass+_pane+_open).removeClass(rClass+_sliding+" "+rClass+_pane+_sliding).addClass(rClass+_closed+" "+rClass+_pane+_closed);if(s.isHidden){$R.hide();}if(o.resizable&&$.layout.plugins.draggable){$R.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title","");}if($T){$T.removeClass(tClass+_open+" "+tClass+_pane+_open).addClass(tClass+_closed+" "+tClass+_pane+_closed).attr("title",o.tips.Open);$T.children(".content-open").hide();$T.children(".content-closed").css("display","block");}syncPinBtns(pane,false);if(state.initialized){sizeHandles();}},open=function(evt_or_pane,slide,noAnimation,noAlert){if(!isInitialized()){return;}var pane=evtPane.call(this,evt_or_pane),$P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],c=_c[pane],doFX,isShowing;if(pane==="center"){return;}$N.queue(function(queueNext){if(!$P||(!o.resizable&&!o.closable&&!s.isShowing)||(s.isVisible&&!s.isSliding)){return queueNext();}if(s.isHidden&&!s.isShowing){queueNext();show(pane,true);return;}if(s.autoResize&&s.size!=o.size){sizePane(pane,o.size,true,true,true);}else{setSizeLimits(pane,slide);}var cbReturn=_runCallbacks("onopen_start",pane);if(cbReturn==="abort"){return queueNext();}if(cbReturn!=="NC"){setSizeLimits(pane,slide);}if(s.minSize>s.maxSize){syncPinBtns(pane,false);if(!noAlert&&o.tips.noRoomToOpen){alert(o.tips.noRoomToOpen);}return queueNext();}if(slide){bindStopSlidingEvents(pane,true);}else{if(s.isSliding){bindStopSlidingEvents(pane,false);}else{if(o.slidable){bindStartSlidingEvents(pane,false);}}}s.noRoom=false;makePaneFit(pane);isShowing=s.isShowing;delete s.isShowing;doFX=!noAnimation&&s.isClosed&&(o.fxName_open!="none");s.isMoving=true;s.isVisible=true;s.isClosed=false;if(isShowing){s.isHidden=false;}if(doFX){lockPaneForFX(pane,true);$P.show(o.fxName_open,o.fxSettings_open,o.fxSpeed_open,function(){lockPaneForFX(pane,false);if(s.isVisible){open_2();}queueNext();});}else{_showPane(pane);open_2();queueNext();}});function open_2(){s.isMoving=false;_fixIframe(pane);if(!s.isSliding){sizeMidPanes(_c[pane].dir=="vert"?"center":"",false);}setAsOpen(pane);}},setAsOpen=function(pane,skipCallback){var $P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],o=options[pane],s=state[pane],side=_c[pane].side,rClass=o.resizerClass,tClass=o.togglerClass,_pane="-"+pane,_open="-open",_closed="-closed",_sliding="-sliding";$R.css(side,sC.inset[side]+getPaneSize(pane)).removeClass(rClass+_closed+" "+rClass+_pane+_closed).addClass(rClass+_open+" "+rClass+_pane+_open);if(s.isSliding){$R.addClass(rClass+_sliding+" "+rClass+_pane+_sliding);}else{$R.removeClass(rClass+_sliding+" "+rClass+_pane+_sliding);}removeHover(0,$R);if(o.resizable&&$.layout.plugins.draggable){$R.draggable("enable").css("cursor",o.resizerCursor).attr("title",o.tips.Resize);}else{if(!s.isSliding){$R.css("cursor","default");}}if($T){$T.removeClass(tClass+_closed+" "+tClass+_pane+_closed).addClass(tClass+_open+" "+tClass+_pane+_open).attr("title",o.tips.Close);removeHover(0,$T);$T.children(".content-closed").hide();$T.children(".content-open").css("display","block");}syncPinBtns(pane,!s.isSliding);$.extend(s,elDims($P));if(state.initialized){sizeHandles();sizeContent(pane,true);}if(!skipCallback&&(state.initialized||o.triggerEventsOnLoad)&&$P.is(":visible")){_runCallbacks("onopen_end",pane);if(s.isShowing){_runCallbacks("onshow_end",pane);}if(state.initialized){_runCallbacks("onresize_end",pane);}}},slideOpen=function(evt_or_pane){if(!isInitialized()){return;}var evt=evtObj(evt_or_pane),pane=evtPane.call(this,evt_or_pane),s=state[pane],delay=options[pane].slideDelay_open;if(pane==="center"){return;}if(evt){evt.stopImmediatePropagation();}if(s.isClosed&&evt&&evt.type==="mouseenter"&&delay>0){timer.set(pane+"_openSlider",open_NOW,delay);}else{open_NOW();}function open_NOW(){if(!s.isClosed){bindStopSlidingEvents(pane,true);}else{if(!s.isMoving){open(pane,true);}}}},slideClose=function(evt_or_pane){if(!isInitialized()){return;}var evt=evtObj(evt_or_pane),pane=evtPane.call(this,evt_or_pane),o=options[pane],s=state[pane],delay=s.isMoving?1000:300;if(pane==="center"){return;}if(s.isClosed||s.isResizing){return;}else{if(o.slideTrigger_close==="click"){close_NOW();}else{if(o.preventQuickSlideClose&&s.isMoving){return;}else{if(o.preventPrematureSlideClose&&evt&&$.layout.isMouseOverElem(evt,$Ps[pane])){return;}else{if(evt){timer.set(pane+"_closeSlider",close_NOW,max(o.slideDelay_close,delay));}else{close_NOW();}}}}}function close_NOW(){if(s.isClosed){bindStopSlidingEvents(pane,false);}else{if(!s.isMoving){close(pane);}}}},slideToggle=function(evt_or_pane){var pane=evtPane.call(this,evt_or_pane);toggle(pane,true);},lockPaneForFX=function(pane,doLock){var $P=$Ps[pane],s=state[pane],o=options[pane],z=options.zIndexes;if(doLock){showMasks(pane,{animation:true,objectsOnly:true});$P.css({zIndex:z.pane_animate});if(pane=="south"){$P.css({top:sC.inset.top+sC.innerHeight-$P.outerHeight()});}else{if(pane=="east"){$P.css({left:sC.inset.left+sC.innerWidth-$P.outerWidth()});}}}else{hideMasks();$P.css({zIndex:(s.isSliding?z.pane_sliding:z.pane_normal)});if(pane=="south"){$P.css({top:"auto"});}else{if(pane=="east"&&!$P.css("left").match(/\-99999/)){$P.css({left:"auto"});}}if(browser.msie&&o.fxOpacityFix&&o.fxName_open!="slide"&&$P.css("filter")&&$P.css("opacity")==1){$P[0].style.removeAttribute("filter");}}},bindStartSlidingEvents=function(pane,enable){var o=options[pane],$P=$Ps[pane],$R=$Rs[pane],evtName=o.slideTrigger_open.toLowerCase();if(!$R||(enable&&!o.slidable)){return;}if(evtName.match(/mouseover/)){evtName=o.slideTrigger_open="mouseenter";}else{if(!evtName.match(/(click|dblclick|mouseenter)/)){evtName=o.slideTrigger_open="click";}}if(o.resizerDblClickToggle&&evtName.match(/click/)){$R[enable?"unbind":"bind"]("dblclick."+sID,toggle);}$R[enable?"bind":"unbind"](evtName+"."+sID,slideOpen).css("cursor",enable?o.sliderCursor:"default").attr("title",enable?o.tips.Slide:"");},bindStopSlidingEvents=function(pane,enable){var o=options[pane],s=state[pane],c=_c[pane],z=options.zIndexes,evtName=o.slideTrigger_close.toLowerCase(),action=(enable?"bind":"unbind"),$P=$Ps[pane],$R=$Rs[pane];timer.clear(pane+"_closeSlider");if(enable){s.isSliding=true;state.panesSliding[pane]=true;bindStartSlidingEvents(pane,false);}else{s.isSliding=false;delete state.panesSliding[pane];}$P.css("zIndex",enable?z.pane_sliding:z.pane_normal);$R.css("zIndex",enable?z.pane_sliding+2:z.resizer_normal);if(!evtName.match(/(click|mouseleave)/)){evtName=o.slideTrigger_close="mouseleave";}$R[action](evtName,slideClose);if(evtName==="mouseleave"){$P[action]("mouseleave."+sID,slideClose);$R[action]("mouseenter."+sID,cancelMouseOut);$P[action]("mouseenter."+sID,cancelMouseOut);}if(!enable){timer.clear(pane+"_closeSlider");}else{if(evtName==="click"&&!o.resizable){$R.css("cursor",enable?o.sliderCursor:"default");$R.attr("title",enable?o.tips.Close:"");}}function cancelMouseOut(evt){timer.clear(pane+"_closeSlider");evt.stopPropagation();}},makePaneFit=function(pane,isOpening,skipCallback,force){var o=options[pane],s=state[pane],c=_c[pane],$P=$Ps[pane],$R=$Rs[pane],isSidePane=c.dir==="vert",hasRoom=false;if(pane==="center"||(isSidePane&&s.noVerticalRoom)){hasRoom=(s.maxHeight>=0);if(hasRoom&&s.noRoom){_showPane(pane);if($R){$R.show();}s.isVisible=true;s.noRoom=false;if(isSidePane){s.noVerticalRoom=false;}_fixIframe(pane);}else{if(!hasRoom&&!s.noRoom){_hidePane(pane);if($R){$R.hide();}s.isVisible=false;s.noRoom=true;}}}if(pane==="center"){}else{if(s.minSize<=s.maxSize){hasRoom=true;if(s.size>s.maxSize){sizePane(pane,s.maxSize,skipCallback,true,force);}else{if(s.size<s.minSize){sizePane(pane,s.minSize,skipCallback,true,force);}else{if($R&&s.isVisible&&$P.is(":visible")){var pos=s.size+sC.inset[c.side];if($.layout.cssNum($R,c.side)!=pos){$R.css(c.side,pos);}}}}if(s.noRoom){if(s.wasOpen&&o.closable){if(o.autoReopen){open(pane,false,true,true);}else{s.noRoom=false;}}else{show(pane,s.wasOpen,true,true);}}}else{if(!s.noRoom){s.noRoom=true;s.wasOpen=!s.isClosed&&!s.isSliding;if(s.isClosed){}else{if(o.closable){close(pane,true,true);}else{hide(pane,true);}}}}}},manualSizePane=function(evt_or_pane,size,skipCallback,noAnimation,force){if(!isInitialized()){return;}var pane=evtPane.call(this,evt_or_pane),o=options[pane],s=state[pane],forceResize=force||(o.livePaneResizing&&!s.isResizing);if(pane==="center"){return;}s.autoResize=false;sizePane(pane,size,skipCallback,noAnimation,forceResize);},sizePane=function(evt_or_pane,size,skipCallback,noAnimation,force){if(!isInitialized()){return;}var pane=evtPane.call(this,evt_or_pane),o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],side=_c[pane].side,dimName=_c[pane].sizeType.toLowerCase(),skipResizeWhileDragging=s.isResizing&&!o.triggerEventsDuringLiveResize,doFX=noAnimation!==true&&o.animatePaneSizing,oldSize,newSize;if(pane==="center"){return;}$N.queue(function(queueNext){setSizeLimits(pane);oldSize=s.size;size=_parseSize(pane,size);size=max(size,_parseSize(pane,o.minSize));size=min(size,s.maxSize);if(size<s.minSize){queueNext();makePaneFit(pane,false,skipCallback);return;}if(!force&&size===oldSize){return queueNext();}s.newSize=size;if(!skipCallback&&state.initialized&&s.isVisible){_runCallbacks("onresize_start",pane);}newSize=cssSize(pane,size);if(doFX&&$P.is(":visible")){var fx=$.layout.effects.size[pane]||$.layout.effects.size.all,easing=o.fxSettings_size.easing||fx.easing,z=options.zIndexes,props={};props[dimName]=newSize+"px";s.isMoving=true;$P.css({zIndex:z.pane_animate}).show().animate(props,o.fxSpeed_size,easing,function(){$P.css({zIndex:(s.isSliding?z.pane_sliding:z.pane_normal)});s.isMoving=false;delete s.newSize;sizePane_2();queueNext();});}else{$P.css(dimName,newSize);delete s.newSize;if($P.is(":visible")){sizePane_2();}else{s.size=size;}queueNext();}});function sizePane_2(){var actual=dimName==="width"?$P.outerWidth():$P.outerHeight(),tries=[{pane:pane,count:1,target:size,actual:actual,correct:(size===actual),attempt:size,cssSize:newSize}],lastTry=tries[0],thisTry={},msg="Inaccurate size after resizing the "+pane+"-pane.";while(!lastTry.correct){thisTry={pane:pane,count:lastTry.count+1,target:size};if(lastTry.actual>size){thisTry.attempt=max(0,lastTry.attempt-(lastTry.actual-size));}else{thisTry.attempt=max(0,lastTry.attempt+(size-lastTry.actual));}thisTry.cssSize=cssSize(pane,thisTry.attempt);$P.css(dimName,thisTry.cssSize);thisTry.actual=dimName=="width"?$P.outerWidth():$P.outerHeight();thisTry.correct=(size===thisTry.actual);if(tries.length===1){_log(msg,false,true);_log(lastTry,false,true);}_log(thisTry,false,true);if(tries.length>3){break;}tries.push(thisTry);lastTry=tries[tries.length-1];}s.size=size;$.extend(s,elDims($P));if(s.isVisible&&$P.is(":visible")){if($R){$R.css(side,size+sC.inset[side]);}sizeContent(pane);}if(!skipCallback&&!skipResizeWhileDragging&&state.initialized&&s.isVisible){_runCallbacks("onresize_end",pane);}if(!skipCallback){if(!s.isSliding){sizeMidPanes(_c[pane].dir=="horz"?"":"center",skipResizeWhileDragging,force);}sizeHandles();}var altPane=_c.oppositeEdge[pane];if(size<oldSize&&state[altPane].noRoom){setSizeLimits(altPane);makePaneFit(altPane,false,skipCallback);}if(tries.length>1){_log(msg+"\nSee the Error Console for details.",true,true);}}},sizeMidPanes=function(panes,skipCallback,force){panes=(panes?panes:"east,west,center").split(",");$.each(panes,function(i,pane){if(!$Ps[pane]){return;}var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],isCenter=(pane=="center"),hasRoom=true,CSS={},visCSS=$.layout.showInvisibly($P),newCenter=calcNewCenterPaneDims();$.extend(s,elDims($P));if(pane==="center"){if(!force&&s.isVisible&&newCenter.width===s.outerWidth&&newCenter.height===s.outerHeight){$P.css(visCSS);return true;}$.extend(s,cssMinDims(pane),{maxWidth:newCenter.width,maxHeight:newCenter.height});CSS=newCenter;s.newWidth=CSS.width;s.newHeight=CSS.height;CSS.width=cssW($P,CSS.width);CSS.height=cssH($P,CSS.height);hasRoom=CSS.width>=0&&CSS.height>=0;if(!state.initialized&&o.minWidth>newCenter.width){var reqPx=o.minWidth-s.outerWidth,minE=options.east.minSize||0,minW=options.west.minSize||0,sizeE=state.east.size,sizeW=state.west.size,newE=sizeE,newW=sizeW;if(reqPx>0&&state.east.isVisible&&sizeE>minE){newE=max(sizeE-minE,sizeE-reqPx);reqPx-=sizeE-newE;}if(reqPx>0&&state.west.isVisible&&sizeW>minW){newW=max(sizeW-minW,sizeW-reqPx);reqPx-=sizeW-newW;}if(reqPx===0){if(sizeE&&sizeE!=minE){sizePane("east",newE,true,true,force);}if(sizeW&&sizeW!=minW){sizePane("west",newW,true,true,force);}sizeMidPanes("center",skipCallback,force);$P.css(visCSS);return;}}}else{if(s.isVisible&&!s.noVerticalRoom){$.extend(s,elDims($P),cssMinDims(pane));}if(!force&&!s.noVerticalRoom&&newCenter.height===s.outerHeight){$P.css(visCSS);return true;}CSS.top=newCenter.top;CSS.bottom=newCenter.bottom;s.newSize=newCenter.height;CSS.height=cssH($P,newCenter.height);s.maxHeight=CSS.height;hasRoom=(s.maxHeight>=0);if(!hasRoom){s.noVerticalRoom=true;}}if(hasRoom){if(!skipCallback&&state.initialized){_runCallbacks("onresize_start",pane);}$P.css(CSS);if(pane!=="center"){sizeHandles(pane);}if(s.noRoom&&!s.isClosed&&!s.isHidden){makePaneFit(pane);}if(s.isVisible){$.extend(s,elDims($P));if(state.initialized){sizeContent(pane);}}}else{if(!s.noRoom&&s.isVisible){makePaneFit(pane);}}$P.css(visCSS);delete s.newSize;delete s.newWidth;delete s.newHeight;if(!s.isVisible){return true;}if(pane==="center"){var fix=browser.isIE6||!browser.boxModel;if($Ps.north&&(fix||state.north.tagName=="IFRAME")){$Ps.north.css("width",cssW($Ps.north,sC.innerWidth));}if($Ps.south&&(fix||state.south.tagName=="IFRAME")){$Ps.south.css("width",cssW($Ps.south,sC.innerWidth));}}if(!skipCallback&&state.initialized){_runCallbacks("onresize_end",pane);}});},resizeAll=function(evt_or_refresh){var oldW=sC.innerWidth,oldH=sC.innerHeight;evtPane(evt_or_refresh);if(!$N.is(":visible")){return;}if(!state.initialized){_initLayoutElements();return;}if(evt_or_refresh===true&&$.isPlainObject(options.outset)){$N.css(options.outset);}$.extend(sC,elDims($N,options.inset));if(!sC.outerHeight){return;}if(evt_or_refresh===true){setPanePosition();}if(false===_runCallbacks("onresizeall_start")){return false;}var shrunkH=(sC.innerHeight<oldH),shrunkW=(sC.innerWidth<oldW),$P,o,s;$.each(["south","north","east","west"],function(i,pane){if(!$Ps[pane]){return;}o=options[pane];s=state[pane];if(s.autoResize&&s.size!=o.size){sizePane(pane,o.size,true,true,true);}else{setSizeLimits(pane);makePaneFit(pane,false,true,true);}});sizeMidPanes("",true,true);sizeHandles();$.each(_c.allPanes,function(i,pane){$P=$Ps[pane];if(!$P){return;}if(state[pane].isVisible){_runCallbacks("onresize_end",pane);}});_runCallbacks("onresizeall_end");},resizeChildren=function(evt_or_pane,skipRefresh){var pane=evtPane.call(this,evt_or_pane);if(!options[pane].resizeChildren){return;}if(!skipRefresh){refreshChildren(pane);}var pC=children[pane];if($.isPlainObject(pC)){$.each(pC,function(key,child){if(!child.destroyed){child.resizeAll();}});}},sizeContent=function(evt_or_panes,remeasure){if(!isInitialized()){return;}var panes=evtPane.call(this,evt_or_panes);panes=panes?panes.split(","):_c.allPanes;$.each(panes,function(idx,pane){var $P=$Ps[pane],$C=$Cs[pane],o=options[pane],s=state[pane],m=s.content;if(!$P||!$C||!$P.is(":visible")){return true;}if(!$C.length){initContent(pane,false);if(!$C){return;}}if(false===_runCallbacks("onsizecontent_start",pane)){return;}if((!s.isMoving&&!s.isResizing)||o.liveContentResizing||remeasure||m.top==undefined){_measure();if(m.hiddenFooters>0&&$P.css("overflow")==="hidden"){$P.css("overflow","visible");_measure();$P.css("overflow","hidden");}}var newH=s.innerHeight-(m.spaceAbove-s.css.paddingTop)-(m.spaceBelow-s.css.paddingBottom);if(!$C.is(":visible")||m.height!=newH){setOuterHeight($C,newH,true);m.height=newH;}if(state.initialized){_runCallbacks("onsizecontent_end",pane);}function _below($E){return max(s.css.paddingBottom,(parseInt($E.css("marginBottom"),10)||0));}function _measure(){var ignore=options[pane].contentIgnoreSelector,$Fs=$C.nextAll().not(".ui-layout-mask").not(ignore||":lt(0)"),$Fs_vis=$Fs.filter(":visible"),$F=$Fs_vis.filter(":last");m={top:$C[0].offsetTop,height:$C.outerHeight(),numFooters:$Fs.length,hiddenFooters:$Fs.length-$Fs_vis.length,spaceBelow:0};m.spaceAbove=m.top;m.bottom=m.top+m.height;if($F.length){m.spaceBelow=($F[0].offsetTop+$F.outerHeight())-m.bottom+_below($F);}else{m.spaceBelow=_below($C);}}});},sizeHandles=function(evt_or_panes){var panes=evtPane.call(this,evt_or_panes);panes=panes?panes.split(","):_c.borderPanes;$.each(panes,function(i,pane){var o=options[pane],s=state[pane],$P=$Ps[pane],$R=$Rs[pane],$T=$Ts[pane],$TC;if(!$P||!$R){return;}var dir=_c[pane].dir,_state=(s.isClosed?"_closed":"_open"),spacing=o["spacing"+_state],togAlign=o["togglerAlign"+_state],togLen=o["togglerLength"+_state],paneLen,left,offset,CSS={};if(spacing===0){$R.hide();return;}else{if(!s.noRoom&&!s.isHidden){$R.show();}}if(dir==="horz"){paneLen=sC.innerWidth;s.resizerLength=paneLen;left=$.layout.cssNum($P,"left");$R.css({width:cssW($R,paneLen),height:cssH($R,spacing),left:left>-9999?left:sC.inset.left});}else{paneLen=$P.outerHeight();s.resizerLength=paneLen;$R.css({height:cssH($R,paneLen),width:cssW($R,spacing),top:sC.inset.top+getPaneSize("north",true)});}removeHover(o,$R);if($T){if(togLen===0||(s.isSliding&&o.hideTogglerOnSlide)){$T.hide();return;}else{$T.show();}if(!(togLen>0)||togLen==="100%"||togLen>paneLen){togLen=paneLen;offset=0;}else{if(isStr(togAlign)){switch(togAlign){case"top":case"left":offset=0;break;case"bottom":case"right":offset=paneLen-togLen;break;case"middle":case"center":default:offset=round((paneLen-togLen)/2);}}else{var x=parseInt(togAlign,10);if(togAlign>=0){offset=x;}else{offset=paneLen-togLen+x;}}}if(dir==="horz"){var width=cssW($T,togLen);$T.css({width:width,height:cssH($T,spacing),left:offset,top:0});$T.children(".content").each(function(){$TC=$(this);$TC.css("marginLeft",round((width-$TC.outerWidth())/2));});}else{var height=cssH($T,togLen);$T.css({height:height,width:cssW($T,spacing),top:offset,left:0});$T.children(".content").each(function(){$TC=$(this);$TC.css("marginTop",round((height-$TC.outerHeight())/2));});}removeHover(0,$T);}if(!state.initialized&&(o.initHidden||s.isHidden)){$R.hide();if($T){$T.hide();}}});},enableClosable=function(evt_or_pane){if(!isInitialized()){return;}var pane=evtPane.call(this,evt_or_pane),$T=$Ts[pane],o=options[pane];if(!$T){return;}o.closable=true;$T.bind("click."+sID,function(evt){evt.stopPropagation();toggle(pane);}).css("visibility","visible").css("cursor","pointer").attr("title",state[pane].isClosed?o.tips.Open:o.tips.Close).show();},disableClosable=function(evt_or_pane,hide){if(!isInitialized()){return;}var pane=evtPane.call(this,evt_or_pane),$T=$Ts[pane];if(!$T){return;}options[pane].closable=false;if(state[pane].isClosed){open(pane,false,true);}$T.unbind("."+sID).css("visibility",hide?"hidden":"visible").css("cursor","default").attr("title","");},enableSlidable=function(evt_or_pane){if(!isInitialized()){return;}var pane=evtPane.call(this,evt_or_pane),$R=$Rs[pane];if(!$R||!$R.data("draggable")){return;}options[pane].slidable=true;if(state[pane].isClosed){bindStartSlidingEvents(pane,true);}},disableSlidable=function(evt_or_pane){if(!isInitialized()){return;}var pane=evtPane.call(this,evt_or_pane),$R=$Rs[pane];if(!$R){return;}options[pane].slidable=false;if(state[pane].isSliding){close(pane,false,true);}else{bindStartSlidingEvents(pane,false);$R.css("cursor","default").attr("title","");removeHover(null,$R[0]);}},enableResizable=function(evt_or_pane){if(!isInitialized()){return;}var pane=evtPane.call(this,evt_or_pane),$R=$Rs[pane],o=options[pane];if(!$R||!$R.data("draggable")){return;}o.resizable=true;$R.draggable("enable");if(!state[pane].isClosed){$R.css("cursor",o.resizerCursor).attr("title",o.tips.Resize);}},disableResizable=function(evt_or_pane){if(!isInitialized()){return;}var pane=evtPane.call(this,evt_or_pane),$R=$Rs[pane];if(!$R||!$R.data("draggable")){return;}options[pane].resizable=false;$R.draggable("disable").css("cursor","default").attr("title","");removeHover(null,$R[0]);},swapPanes=function(evt_or_pane1,pane2){if(!isInitialized()){return;}var pane1=evtPane.call(this,evt_or_pane1);state[pane1].edge=pane2;state[pane2].edge=pane1;if(false===_runCallbacks("onswap_start",pane1)||false===_runCallbacks("onswap_start",pane2)){state[pane1].edge=pane1;state[pane2].edge=pane2;return;}var oPane1=copy(pane1),oPane2=copy(pane2),sizes={};sizes[pane1]=oPane1?oPane1.state.size:0;sizes[pane2]=oPane2?oPane2.state.size:0;$Ps[pane1]=false;$Ps[pane2]=false;state[pane1]={};state[pane2]={};if($Ts[pane1]){$Ts[pane1].remove();}if($Ts[pane2]){$Ts[pane2].remove();}if($Rs[pane1]){$Rs[pane1].remove();}if($Rs[pane2]){$Rs[pane2].remove();}$Rs[pane1]=$Rs[pane2]=$Ts[pane1]=$Ts[pane2]=false;move(oPane1,pane2);move(oPane2,pane1);oPane1=oPane2=sizes=null;if($Ps[pane1]){$Ps[pane1].css(_c.visible);}if($Ps[pane2]){$Ps[pane2].css(_c.visible);}resizeAll();_runCallbacks("onswap_end",pane1);_runCallbacks("onswap_end",pane2);return;function copy(n){var $P=$Ps[n],$C=$Cs[n];return !$P?false:{pane:n,P:$P?$P[0]:false,C:$C?$C[0]:false,state:$.extend(true,{},state[n]),options:$.extend(true,{},options[n])};}function move(oPane,pane){if(!oPane){return;}var P=oPane.P,C=oPane.C,oldPane=oPane.pane,c=_c[pane],s=$.extend(true,{},state[pane]),o=options[pane],fx={resizerCursor:o.resizerCursor},re,size,pos;$.each("fxName,fxSpeed,fxSettings".split(","),function(i,k){fx[k+"_open"]=o[k+"_open"];fx[k+"_close"]=o[k+"_close"];fx[k+"_size"]=o[k+"_size"];});$Ps[pane]=$(P).data({layoutPane:Instance[pane],layoutEdge:pane}).css(_c.hidden).css(c.cssReq);$Cs[pane]=C?$(C):false;options[pane]=$.extend(true,{},oPane.options,fx);state[pane]=$.extend(true,{},oPane.state);re=new RegExp(o.paneClass+"-"+oldPane,"g");P.className=P.className.replace(re,o.paneClass+"-"+pane);initHandles(pane);if(c.dir!=_c[oldPane].dir){size=sizes[pane]||0;setSizeLimits(pane);size=max(size,state[pane].minSize);manualSizePane(pane,size,true,true);}else{$Rs[pane].css(c.side,sC.inset[c.side]+(state[pane].isVisible?getPaneSize(pane):0));}if(oPane.state.isVisible&&!s.isVisible){setAsOpen(pane,true);}else{setAsClosed(pane);bindStartSlidingEvents(pane,true);}oPane=null;}},syncPinBtns=function(pane,doPin){if($.layout.plugins.buttons){$.each(state[pane].pins,function(i,selector){$.layout.buttons.setPinState(Instance,$(selector),pane,doPin);});}};function keyDown(evt){if(!evt){return true;}var code=evt.keyCode;if(code<33){return true;}var PANE={38:"north",40:"south",37:"west",39:"east"},ALT=evt.altKey,SHIFT=evt.shiftKey,CTRL=evt.ctrlKey,CURSOR=(CTRL&&code>=37&&code<=40),o,k,m,pane;if(CURSOR&&options[PANE[code]].enableCursorHotkey){pane=PANE[code];}else{if(CTRL||SHIFT){$.each(_c.borderPanes,function(i,p){o=options[p];k=o.customHotkey;m=o.customHotkeyModifier;if((SHIFT&&m=="SHIFT")||(CTRL&&m=="CTRL")||(CTRL&&SHIFT)){if(k&&code===(isNaN(k)||k<=9?k.toUpperCase().charCodeAt(0):k)){pane=p;return false;}}});}}if(!pane||!$Ps[pane]||!options[pane].closable||state[pane].isHidden){return true;}toggle(pane);evt.stopPropagation();evt.returnValue=false;return false;}function allowOverflow(el){if(!isInitialized()){return;}if(this&&this.tagName){el=this;}var $P;if(isStr(el)){$P=$Ps[el];}else{if($(el).data("layoutRole")){$P=$(el);}else{$(el).parents().each(function(){if($(this).data("layoutRole")){$P=$(this);return false;}});}}if(!$P||!$P.length){return;}var pane=$P.data("layoutEdge"),s=state[pane];if(s.cssSaved){resetOverflow(pane);}if(s.isSliding||s.isResizing||s.isClosed){s.cssSaved=false;return;}var newCSS={zIndex:(options.zIndexes.resizer_normal+1)},curCSS={},of=$P.css("overflow"),ofX=$P.css("overflowX"),ofY=$P.css("overflowY");if(of!="visible"){curCSS.overflow=of;newCSS.overflow="visible";}if(ofX&&!ofX.match(/(visible|auto)/)){curCSS.overflowX=ofX;newCSS.overflowX="visible";}if(ofY&&!ofY.match(/(visible|auto)/)){curCSS.overflowY=ofX;newCSS.overflowY="visible";}s.cssSaved=curCSS;$P.css(newCSS);$.each(_c.allPanes,function(i,p){if(p!=pane){resetOverflow(p);}});}function resetOverflow(el){if(!isInitialized()){return;}if(this&&this.tagName){el=this;}var $P;if(isStr(el)){$P=$Ps[el];}else{if($(el).data("layoutRole")){$P=$(el);}else{$(el).parents().each(function(){if($(this).data("layoutRole")){$P=$(this);return false;}});}}if(!$P||!$P.length){return;}var pane=$P.data("layoutEdge"),s=state[pane],CSS=s.cssSaved||{};if(!s.isSliding&&!s.isResizing){$P.css("zIndex",options.zIndexes.pane_normal);}$P.css(CSS);s.cssSaved=false;}var $N=$(this).eq(0);if(!$N.length){return _log(options.errors.containerMissing);}if($N.data("layoutContainer")&&$N.data("layout")){return $N.data("layout");}var $Ps={},$Cs={},$Rs={},$Ts={},$Ms=$([]),sC=state.container,sID=state.id;var Instance={options:options,state:state,container:$N,panes:$Ps,contents:$Cs,resizers:$Rs,togglers:$Ts,hide:hide,show:show,toggle:toggle,open:open,close:close,slideOpen:slideOpen,slideClose:slideClose,slideToggle:slideToggle,setSizeLimits:setSizeLimits,_sizePane:sizePane,sizePane:manualSizePane,sizeContent:sizeContent,swapPanes:swapPanes,showMasks:showMasks,hideMasks:hideMasks,initContent:initContent,addPane:addPane,removePane:removePane,createChildren:createChildren,refreshChildren:refreshChildren,enableClosable:enableClosable,disableClosable:disableClosable,enableSlidable:enableSlidable,disableSlidable:disableSlidable,enableResizable:enableResizable,disableResizable:disableResizable,allowOverflow:allowOverflow,resetOverflow:resetOverflow,destroy:destroy,initPanes:isInitialized,resizeAll:resizeAll,runCallbacks:_runCallbacks,hasParentLayout:false,children:children,north:false,south:false,west:false,east:false,center:false};if(_create()==="cancel"){return null;}else{return Instance;}};})(jQuery);(function(a){if(!a.layout){return;}if(!a.ui){a.ui={};}a.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(b){var h=document.cookie,e=h?h.split(";"):[],g,f,d;for(d=0;g=e[d];d++){f=a.trim(g).split("=");if(f[0]==b){return decodeURIComponent(f[1]);}}return null;},write:function(b,d,h){var f="",e="",g=false,c=h||{},i=c.expires||null,j=a.type(i);if(j==="date"){e=i;}else{if(j==="string"&&i>0){i=parseInt(i,10);j="number";}}if(j==="number"){e=new Date();if(i>0){e.setDate(e.getDate()+i);}else{e.setFullYear(1970);g=true;}}if(e){f+=";expires="+e.toUTCString();}if(c.path){f+=";path="+c.path;}if(c.domain){f+=";domain="+c.domain;}if(c.secure){f+=";secure";}document.cookie=b+"="+(g?"":encodeURIComponent(d))+f;},clear:function(b){a.ui.cookie.write(b,"",{expires:-1});}};if(!a.cookie){a.cookie=function(c,b,e){var d=a.ui.cookie;if(b===null){d.clear(c);}else{if(b===undefined){return d.read(c);}else{d.write(c,b,e);}}};}a.layout.plugins.stateManagement=true;a.layout.defaults.stateManagement={enabled:false,autoSave:true,autoLoad:true,animateLoad:true,includeChildren:true,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:false}};a.layout.optionsMap.layout.push("stateManagement");a.layout.config.optionRootKeys.push("stateManagement");a.layout.state={saveCookie:function(f,d,c){var g=f.options,h=g.stateManagement,b=a.extend(true,{},h.cookie,c||null),e=f.state.stateData=f.readState(d||h.stateKeys);a.ui.cookie.write(b.name||g.name||"Layout",a.layout.state.encodeJSON(e),b);return a.extend(true,{},e);},deleteCookie:function(b){var c=b.options;a.ui.cookie.clear(c.stateManagement.cookie.name||c.name||"Layout");},readCookie:function(b){var d=b.options;var e=a.ui.cookie.read(d.stateManagement.cookie.name||d.name||"Layout");return e?a.layout.state.decodeJSON(e):{};},loadCookie:function(b){var d=a.layout.state.readCookie(b);if(d&&!a.isEmptyObject(d)){b.state.stateData=a.extend(true,{},d);b.loadState(d);}return d;},loadState:function(k,i,b){if(!a.isPlainObject(i)||a.isEmptyObject(i)){return;}i=k.state.stateData=a.layout.transformData(i);var f=k.options.stateManagement;b=a.extend({animateLoad:false,includeChildren:f.includeChildren},b);if(!k.state.initialized){var e=a.extend(true,{},i);a.each(a.layout.config.allPanes,function(c,h){if(e[h]){delete e[h].children;}});a.extend(true,k.options,e);}else{var g=!b.animateLoad,e,n,l,d,j;a.each(a.layout.config.borderPanes,function(c,h){e=i[h];if(!a.isPlainObject(e)){return;}s=e.size;n=e.initClosed;l=e.initHidden;ar=e.autoResize;d=k.state[h];j=d.isVisible;if(ar){d.autoResize=ar;}if(!j){k._sizePane(h,s,false,false,false);}if(l===true){k.hide(h,g);}else{if(n===true){k.close(h,false,g);}else{if(n===false){k.open(h,false,g);}else{if(l===false){k.show(h,false,g);}}}}if(j){k._sizePane(h,s,false,false,g);}});if(b.includeChildren){var m,p;a.each(k.children,function(h,c){m=i[h]?i[h].children:0;if(m&&c){a.each(c,function(q,o){p=m[q];if(o&&p){o.loadState(p);}});}});}}},readState:function(d,k){if(a.type(k)==="string"){k={keys:k};}if(!k){k={};}var v=d.options.stateManagement,o=k.includeChildren,b=o!==undefined?o:v.includeChildren,l=k.stateKeys||v.stateKeys,w={isClosed:"initClosed",isHidden:"initHidden"},e=d.state,j=a.layout.config.allPanes,x={},q,m,y,z,r,t,f,h,g,c;if(a.isArray(l)){l=l.join(",");}l=l.replace(/__/g,".").split(",");for(var u=0,p=l.length;u<p;u++){q=l[u].split(".");m=q[0];y=q[1];if(a.inArray(m,j)<0){continue;}z=e[m][y];if(z==undefined){continue;}if(y=="isClosed"&&e[m]["isSliding"]){z=true;}(x[m]||(x[m]={}))[w[y]?w[y]:y]=z;}if(b){a.each(j,function(i,n){t=d.children[n];r=e.stateData[n];if(a.isPlainObject(t)&&!a.isEmptyObject(t)){c=x[n]||(x[n]={});if(!c.children){c.children={};}a.each(t,function(A,B){if(B.state.initialized){c.children[A]=a.layout.state.readState(B);}else{if(r&&r.children&&r.children[A]){c.children[A]=a.extend(true,{},r.children[A]);}}});}});}return x;},encodeJSON:function(c){var b=window.JSON||{};return(b.stringify||d)(c);function d(m){var n=[],l=0,g,f,j,e=a.isArray(m);for(g in m){f=m[g];j=typeof f;if(j=="string"){f='"'+f+'"';}else{if(j=="object"){f=parse(f);}}n[l++]=(!e?'"'+g+'":':"")+f;}return(e?"[":"{")+n.join(",")+(e?"]":"}");}},decodeJSON:function(c){try{return a.parseJSON?a.parseJSON(c):window["eval"]("("+c+")")||{};}catch(b){return{};}},_create:function(c){var b=a.layout.state,h=c.options,i=h.stateManagement;a.extend(c,{readCookie:function(){return b.readCookie(c);},deleteCookie:function(){b.deleteCookie(c);},saveCookie:function(e,d){return b.saveCookie(c,e,d);},loadCookie:function(){return b.loadCookie(c);},loadState:function(d,e){b.loadState(c,d,e);},readState:function(d){return b.readState(c,d);},encodeJSON:b.encodeJSON,decodeJSON:b.decodeJSON});c.state.stateData={};if(!i.autoLoad){return;}if(a.isPlainObject(i.autoLoad)){if(!a.isEmptyObject(i.autoLoad)){c.loadState(i.autoLoad);}}else{if(i.enabled){if(a.isFunction(i.autoLoad)){var g={};try{g=i.autoLoad(c,c.state,c.options,c.options.name||"");}catch(f){}if(g&&a.isPlainObject(g)&&!a.isEmptyObject(g)){c.loadState(g);}}else{c.loadCookie();}}}},_unload:function(b){var d=b.options.stateManagement;if(d.enabled&&d.autoSave){if(a.isFunction(d.autoSave)){try{d.autoSave(b,b.state,b.options,b.options.name||"");}catch(c){}}else{b.saveCookie();}}}};a.layout.onCreate.push(a.layout.state._create);a.layout.onUnload.push(a.layout.state._unload);})(jQuery);(function(a){if(!a.layout){return;}a.layout.plugins.buttons=true;a.layout.defaults.autoBindCustomButtons=false;a.layout.optionsMap.layout.push("autoBindCustomButtons");var b=a.layout.language;a.layout.buttons={config:{borderPanes:"north,south,west,east"},init:function(e){var f="ui-layout-button-",d=e.options.name||"",c;a.each("toggle,open,close,pin,toggle-slide,open-slide".split(","),function(g,h){a.each(a.layout.buttons.config.borderPanes.split(","),function(i,j){a("."+f+h+"-"+j).each(function(){c=a(this).data("layoutName")||a(this).attr("layoutName");if(c==undefined||c===d){e.bindButton(this,h,j);}});});});},get:function(h,c,j,g){var d=a(c),i=h.options,f=i.showErrorMessages;if(!d.length){if(f){alert(b.errButton+b.selector+": "+c);}}else{if(a.layout.buttons.config.borderPanes.indexOf(j)===-1){if(f){alert(b.errButton+b.pane+": "+j);}d=a("");}else{var e=i[j].buttonClass+"-"+g;d.addClass(e+" "+e+"-"+j).data("layoutName",i.name);}}return d;},bind:function(f,e,d,g){var c=a.layout.buttons;switch(d.toLowerCase()){case"toggle":c.addToggle(f,e,g);break;case"open":c.addOpen(f,e,g);break;case"close":c.addClose(f,e,g);break;case"pin":c.addPin(f,e,g);break;case"toggle-slide":c.addToggle(f,e,g,true);break;case"open-slide":c.addOpen(f,e,g,true);break;}return f;},addToggle:function(e,d,f,c){a.layout.buttons.get(e,d,f,"toggle").click(function(g){e.toggle(f,!!c);g.stopPropagation();});return e;},addOpen:function(e,d,f,c){a.layout.buttons.get(e,d,f,"open").attr("title",b.Open).click(function(g){e.open(f,!!c);g.stopPropagation();});return e;},addClose:function(d,c,e){a.layout.buttons.get(d,c,e,"close").attr("title",b.Close).click(function(f){d.close(e);f.stopPropagation();});return d;},addPin:function(f,c,g){var d=a.layout.buttons.get(f,c,g,"pin");if(d.length){var e=f.state[g];d.click(function(h){a.layout.buttons.setPinState(f,a(this),g,(e.isSliding||e.isClosed));if(e.isSliding||e.isClosed){f.open(g);}else{f.close(g);}h.stopPropagation();});a.layout.buttons.setPinState(f,d,g,(!e.isClosed&&!e.isSliding));e.pins.push(c);}return f;},setPinState:function(f,h,d,e){var k=h.attr("pin");if(k&&e===(k=="down")){return;}var c=f.options[d].buttonClass+"-pin",g=c+"-"+d,j=c+"-up "+g+"-up",i=c+"-down "+g+"-down";h.attr("pin",e?"down":"up").attr("title",e?b.Unpin:b.Pin).removeClass(e?j:i).addClass(e?i:j);},syncPinBtns:function(d,e,c){a.each(state[e].pins,function(g,f){a.layout.buttons.setPinState(d,a(f),e,c);});},_load:function(d){a.extend(d,{bindButton:function(f,g,h){return a.layout.buttons.bind(d,f,g,h);},addToggleBtn:function(g,h,f){return a.layout.buttons.addToggle(d,g,h,f);},addOpenBtn:function(g,h,f){return a.layout.buttons.addOpen(d,g,h,f);},addCloseBtn:function(f,g){return a.layout.buttons.addClose(d,f,g);},addPinBtn:function(f,g){return a.layout.buttons.addPin(d,f,g);}});for(var c=0;c<4;c++){var e=a.layout.buttons.config.borderPanes[c];d.state[e].pins=[];}if(d.options.autoBindCustomButtons){a.layout.buttons.init(d);}},_unload:function(c){}};a.layout.onLoad.push(a.layout.buttons._load);})(jQuery);(function(a){a.layout.plugins.browserZoom=true;a.layout.defaults.browserZoomCheckInterval=1000;a.layout.optionsMap.layout.push("browserZoomCheckInterval");a.layout.browserZoom={_init:function(b){if(a.layout.browserZoom.ratio()!==false){a.layout.browserZoom._setTimer(b);}},_setTimer:function(d){if(d.destroyed){return;}var e=d.options,c=d.state,b=d.hasParentLayout?5000:Math.max(e.browserZoomCheckInterval,100);setTimeout(function(){if(d.destroyed||!e.resizeWithWindow){return;}var f=a.layout.browserZoom.ratio();if(f!==c.browserZoom){c.browserZoom=f;d.resizeAll();}a.layout.browserZoom._setTimer(d);},b);},ratio:function(){var k=window,m=screen,h=document,f=h.documentElement||h.body,i=a.layout.browser,l=i.version,c,e,j;if(!i.msie||l>8){return false;}if(m.deviceXDPI&&m.systemXDPI){return g(m.deviceXDPI,m.systemXDPI);}if(i.webkit&&(c=h.body.getBoundingClientRect)){return g((c.left-c.right),h.body.offsetWidth);}if(i.webkit&&(e=k.outerWidth)){return g(e,k.innerWidth);}if((e=m.width)&&(j=f.clientWidth)){return g(e,j);}return false;function g(b,d){return(parseInt(b,10)/parseInt(d,10)*100).toFixed();}}};a.layout.onReady.push(a.layout.browserZoom._init);})(jQuery);(function(a){if(a.effects){a.layout.defaults.panes.useOffscreenClose=false;if(a.layout.plugins){a.layout.plugins.effects.slideOffscreen=true;}a.layout.effects.slideOffscreen=a.extend(true,{},a.layout.effects.slide);a.effects.slideOffscreen=function(b){return this.queue(function(){var h=a.effects,d=b.options,t=a(this),f=t.data("layoutEdge"),c=t.data("parentLayout").state,m=c[f].size,r=this.style,n=["top","bottom","left","right"],j=h.setMode(t,d.mode||"show"),q=(j=="show"),g=d.direction||"left",e=(g=="up"||g=="down")?"top":"left",o=(g=="up"||g=="left"),p=a.layout.config.offscreenCSS||{},l=a.layout.config.offscreenReset,k="offscreenResetTop",i={};i[e]=(q?(o?"+=":"-="):(o?"-=":"+="))+m;if(q){t.data(k,{top:r.top,bottom:r.bottom});if(o){t.css(e,isNaN(m)?"-"+m:-m);}else{if(g==="right"){t.css({left:c.container.layoutWidth,right:"auto"});}else{t.css({top:c.container.layoutHeight,bottom:"auto"});}}if(e==="top"){t.css(t.data(l)||{});}}else{t.data(k,{top:r.top,bottom:r.bottom});t.data(l,{left:r.left,right:r.right});}t.show().animate(i,{queue:false,duration:b.duration,easing:d.easing,complete:function(){if(t.data(k)){t.css(t.data(k)).removeData(k);}if(q){t.css(t.data(l)||{}).removeData(l);}else{t.css(p);}if(b.callback){b.callback.apply(this,arguments);}t.dequeue();}});});};}})(jQuery);
/*!
 * jQuery Form Plugin
 * version: 3.51.0-2014.06.20
 * Requires jQuery v1.5 or later
 * Copyright (c) 2014 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a);}else{a((typeof(jQuery)!="undefined")?jQuery:window.Zepto);}}(function(f){var c={};c.fileapi=f("<input type='file'/>").get(0).files!==undefined;c.formdata=window.FormData!==undefined;var e=!!f.fn.prop;f.fn.attr2=function(){if(!e){return this.attr.apply(this,arguments);}var g=this.prop.apply(this,arguments);if((g&&g.jquery)||typeof g==="string"){return g;}return this.attr.apply(this,arguments);};f.fn.ajaxSubmit=function(j){if(!this.length){d("ajaxSubmit: skipping submit process - no element selected");return this;}var i,D,m,o=this;if(typeof j=="function"){j={success:j};}else{if(j===undefined){j={};}}i=j.type||this.attr2("method");D=j.url||this.attr2("action");m=(typeof D==="string")?f.trim(D):"";m=m||window.location.href||"";if(m){m=(m.match(/^([^#]+)/)||[])[1];}j=f.extend(true,{url:m,success:f.ajaxSettings.success,type:i||f.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},j);var v={};this.trigger("form-pre-serialize",[this,j,v]);if(v.veto){d("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this;}if(j.beforeSerialize&&j.beforeSerialize(this,j)===false){d("ajaxSubmit: submit aborted via beforeSerialize callback");return this;}var n=j.traditional;if(n===undefined){n=f.ajaxSettings.traditional;}var t=[];var F,G=this.formToArray(j.semantic,t);if(j.data){j.extraData=j.data;F=f.param(j.data,n);}if(j.beforeSubmit&&j.beforeSubmit(G,this,j)===false){d("ajaxSubmit: submit aborted via beforeSubmit callback");return this;}this.trigger("form-submit-validate",[G,this,j,v]);if(v.veto){d("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this;}var z=f.param(G,n);if(F){z=(z?(z+"&"+F):F);}if(j.type.toUpperCase()=="GET"){j.url+=(j.url.indexOf("?")>=0?"&":"?")+z;j.data=null;}else{j.data=z;}var I=[];if(j.resetForm){I.push(function(){o.resetForm();});}if(j.clearForm){I.push(function(){o.clearForm(j.includeHidden);});}if(!j.dataType&&j.target){var l=j.success||function(){};I.push(function(q){var k=j.replaceTarget?"replaceWith":"html";f(j.target)[k](q).each(l,arguments);});}else{if(j.success){I.push(j.success);}}j.success=function(L,q,M){var K=j.context||this;for(var J=0,k=I.length;J<k;J++){I[J].apply(K,[L,q,M||o,o]);}};if(j.error){var A=j.error;j.error=function(K,k,q){var J=j.context||this;A.apply(J,[K,k,q,o]);};}if(j.complete){var h=j.complete;j.complete=function(J,k){var q=j.context||this;h.apply(q,[J,k,o]);};}var E=f("input[type=file]:enabled",this).filter(function(){return f(this).val()!=="";});var p=E.length>0;var C="multipart/form-data";var y=(o.attr("enctype")==C||o.attr("encoding")==C);var x=c.fileapi&&c.formdata;d("fileAPI :"+x);var r=(p||y)&&!x;var w;if(j.iframe!==false&&(j.iframe||r)){if(j.closeKeepAlive){f.get(j.closeKeepAlive,function(){w=H(G);});}else{w=H(G);}}else{if((p||y)&&x){w=u(G);}else{w=f.ajax(j);}}o.removeData("jqxhr").data("jqxhr",w);for(var B=0;B<t.length;B++){t[B]=null;}this.trigger("form-submit-notify",[this,j]);return this;function g(L){var M=f.param(L,j.traditional).split("&");var q=M.length;var k=[];var K,J;for(K=0;K<q;K++){M[K]=M[K].replace(/\+/g," ");J=M[K].split("=");k.push([decodeURIComponent(J[0]),decodeURIComponent(J[1])]);}return k;}function u(q){var k=new FormData();for(var J=0;J<q.length;J++){k.append(q[J].name,q[J].value);}if(j.extraData){var M=g(j.extraData);for(J=0;J<M.length;J++){if(M[J]){k.append(M[J][0],M[J][1]);}}}j.data=null;var L=f.extend(true,{},f.ajaxSettings,j,{contentType:false,processData:false,cache:false,type:i||"POST"});if(j.uploadProgress){L.xhr=function(){var N=f.ajaxSettings.xhr();if(N.upload){N.upload.addEventListener("progress",function(R){var Q=0;var O=R.loaded||R.position;var P=R.total;if(R.lengthComputable){Q=Math.ceil(O/P*100);}j.uploadProgress(R,O,P,Q);},false);}return N;};}L.data=null;var K=L.beforeSend;L.beforeSend=function(O,N){if(j.formData){N.data=j.formData;}else{N.data=k;}if(K){K.call(this,O,N);}};return f.ajax(L);}function H(ag){var M=o[0],L,ac,W,ae,Z,O,R,P,Q,aa,ad,U;var aj=f.Deferred();aj.abort=function(ak){P.abort(ak);};if(ag){for(ac=0;ac<t.length;ac++){L=f(t[ac]);if(e){L.prop("disabled",false);}else{L.removeAttr("disabled");}}}W=f.extend(true,{},f.ajaxSettings,j);W.context=W.context||W;Z="jqFormIO"+(new Date().getTime());if(W.iframeTarget){O=f(W.iframeTarget);aa=O.attr2("name");if(!aa){O.attr2("name",Z);}else{Z=aa;}}else{O=f('<iframe name="'+Z+'" src="'+W.iframeSrc+'" />');O.css({position:"absolute",top:"-1000px",left:"-1000px"});}R=O[0];P={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(ak){var al=(ak==="timeout"?"timeout":"aborted");d("aborting upload... "+al);this.aborted=1;try{if(R.contentWindow.document.execCommand){R.contentWindow.document.execCommand("Stop");}}catch(am){}O.attr("src",W.iframeSrc);P.error=al;if(W.error){W.error.call(W.context,P,al,ak);}if(ae){f.event.trigger("ajaxError",[P,W,al]);}if(W.complete){W.complete.call(W.context,P,al);}}};ae=W.global;if(ae&&0===f.active++){f.event.trigger("ajaxStart");}if(ae){f.event.trigger("ajaxSend",[P,W]);}if(W.beforeSend&&W.beforeSend.call(W.context,P,W)===false){if(W.global){f.active--;}aj.reject();return aj;}if(P.aborted){aj.reject();return aj;}Q=M.clk;if(Q){aa=Q.name;if(aa&&!Q.disabled){W.extraData=W.extraData||{};W.extraData[aa]=Q.value;if(Q.type=="image"){W.extraData[aa+".x"]=M.clk_x;W.extraData[aa+".y"]=M.clk_y;}}}var V=1;var S=2;function T(am){var al=null;try{if(am.contentWindow){al=am.contentWindow.document;}}catch(ak){d("cannot get iframe.contentWindow document: "+ak);}if(al){return al;}try{al=am.contentDocument?am.contentDocument:am.document;}catch(ak){d("cannot get iframe.contentDocument: "+ak);al=am.document;}return al;}var K=f("meta[name=csrf-token]").attr("content");var J=f("meta[name=csrf-param]").attr("content");if(J&&K){W.extraData=W.extraData||{};W.extraData[J]=K;}function ab(){var au=o.attr2("target"),ao=o.attr2("action"),am="multipart/form-data",ap=o.attr("enctype")||o.attr("encoding")||am;M.setAttribute("target",Z);if(!i||/post/i.test(i)){M.setAttribute("method","POST");}if(ao!=W.url){M.setAttribute("action",W.url);}if(!W.skipEncodingOverride&&(!i||/post/i.test(i))){o.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});}if(W.timeout){U=setTimeout(function(){ad=true;Y(V);},W.timeout);}function aq(){try{var av=T(R).readyState;d("state = "+av);if(av&&av.toLowerCase()=="uninitialized"){setTimeout(aq,50);}}catch(aw){d("Server abort: ",aw," (",aw.name,")");Y(S);if(U){clearTimeout(U);}U=undefined;}}var at=[];try{if(W.extraData){for(var al in W.extraData){if(W.extraData.hasOwnProperty(al)){if(f.isPlainObject(W.extraData[al])&&W.extraData[al].hasOwnProperty("name")&&W.extraData[al].hasOwnProperty("value")){at.push(f('<input type="hidden" name="'+W.extraData[al].name+'">').val(W.extraData[al].value).appendTo(M)[0]);}else{at.push(f('<input type="hidden" name="'+al+'">').val(W.extraData[al]).appendTo(M)[0]);}}}}if(!W.iframeTarget){O.appendTo("body");}if(R.attachEvent){R.attachEvent("onload",Y);}else{R.addEventListener("load",Y,false);}setTimeout(aq,15);try{M.submit();}catch(an){var ak=document.createElement("form").submit;ak.apply(M);}}finally{M.setAttribute("action",ao);M.setAttribute("enctype",ap);if(au){M.setAttribute("target",au);}else{o.removeAttr("target");}f(at).remove();}}if(W.forceSync){ab();}else{setTimeout(ab,10);}var ah,ai,af=50,N;function Y(aq){if(P.aborted||N){return;}ai=T(R);if(!ai){d("cannot access response document");aq=S;}if(aq===V&&P){P.abort("timeout");aj.reject(P,"timeout");return;}else{if(aq==S&&P){P.abort("server abort");aj.reject(P,"error","server abort");return;}}if(!ai||ai.location.href==W.iframeSrc){if(!ad){return;}}if(R.detachEvent){R.detachEvent("onload",Y);}else{R.removeEventListener("load",Y,false);}var ao="success",au;try{if(ad){throw"timeout";}var an=W.dataType=="xml"||ai.XMLDocument||f.isXMLDoc(ai);d("isXml="+an);if(!an&&window.opera&&(ai.body===null||!ai.body.innerHTML)){if(--af){d("requeing onLoad callback, DOM not available");setTimeout(Y,250);return;}}var av=ai.body?ai.body:ai.documentElement;P.responseText=av?av.innerHTML:null;P.responseXML=ai.XMLDocument?ai.XMLDocument:ai;if(an){W.dataType="xml";}P.getResponseHeader=function(ay){var ax={"content-type":W.dataType};return ax[ay.toLowerCase()];};if(av){P.status=Number(av.getAttribute("status"))||P.status;P.statusText=av.getAttribute("statusText")||P.statusText;}var ak=(W.dataType||"").toLowerCase();var at=/(json|script|text)/.test(ak);if(at||W.textarea){var ap=ai.getElementsByTagName("textarea")[0];if(ap){P.responseText=ap.value;P.status=Number(ap.getAttribute("status"))||P.status;P.statusText=ap.getAttribute("statusText")||P.statusText;}else{if(at){var al=ai.getElementsByTagName("pre")[0];var aw=ai.getElementsByTagName("body")[0];if(al){P.responseText=al.textContent?al.textContent:al.innerText;}else{if(aw){P.responseText=aw.textContent?aw.textContent:aw.innerText;}}}}}else{if(ak=="xml"&&!P.responseXML&&P.responseText){P.responseXML=X(P.responseText);}}try{ah=k(P,ak,W);}catch(am){ao="parsererror";P.error=au=(am||ao);}}catch(am){d("error caught: ",am);ao="error";P.error=au=(am||ao);}if(P.aborted){d("upload aborted");ao=null;}if(P.status){ao=(P.status>=200&&P.status<300||P.status===304)?"success":"error";}if(ao==="success"){if(W.success){W.success.call(W.context,ah,"success",P);}aj.resolve(P.responseText,"success",P);if(ae){f.event.trigger("ajaxSuccess",[P,W]);}}else{if(ao){if(au===undefined){au=P.statusText;}if(W.error){W.error.call(W.context,P,ao,au);}aj.reject(P,"error",au);if(ae){f.event.trigger("ajaxError",[P,W,au]);}}}if(ae){f.event.trigger("ajaxComplete",[P,W]);}if(ae&&!--f.active){f.event.trigger("ajaxStop");}if(W.complete){W.complete.call(W.context,P,ao);}N=true;if(W.timeout){clearTimeout(U);}setTimeout(function(){if(!W.iframeTarget){O.remove();}else{O.attr("src",W.iframeSrc);}P.responseXML=null;},100);}var X=f.parseXML||function(ak,al){if(window.ActiveXObject){al=new ActiveXObject("Microsoft.XMLDOM");al.async="false";al.loadXML(ak);}else{al=(new DOMParser()).parseFromString(ak,"text/xml");}return(al&&al.documentElement&&al.documentElement.nodeName!="parsererror")?al:null;};var q=f.parseJSON||function(ak){return window["eval"]("("+ak+")");};var k=function(ap,an,am){var al=ap.getResponseHeader("content-type")||"",ak=an==="xml"||!an&&al.indexOf("xml")>=0,ao=ak?ap.responseXML:ap.responseText;if(ak&&ao.documentElement.nodeName==="parsererror"){if(f.error){f.error("parsererror");}}if(am&&am.dataFilter){ao=am.dataFilter(ao,an);}if(typeof ao==="string"){if(an==="json"||!an&&al.indexOf("json")>=0){ao=q(ao);}else{if(an==="script"||!an&&al.indexOf("javascript")>=0){f.globalEval(ao);}}}return ao;};return aj;}};f.fn.ajaxForm=function(g){g=g||{};g.delegation=g.delegation&&f.isFunction(f.fn.on);if(!g.delegation&&this.length===0){var h={s:this.selector,c:this.context};if(!f.isReady&&h.s){d("DOM not ready, queuing ajaxForm");f(function(){f(h.s,h.c).ajaxForm(g);});return this;}d("terminating; zero elements found by selector"+(f.isReady?"":" (DOM not ready)"));return this;}if(g.delegation){f(document).off("submit.form-plugin",this.selector,b).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,g,b).on("click.form-plugin",this.selector,g,a);return this;}return this.ajaxFormUnbind().bind("submit.form-plugin",g,b).bind("click.form-plugin",g,a);};function b(h){var g=h.data;if(!h.isDefaultPrevented()){h.preventDefault();f(h.target).ajaxSubmit(g);}}function a(k){var j=k.target;var h=f(j);if(!(h.is("[type=submit],[type=image]"))){var g=h.closest("[type=submit]");if(g.length===0){return;}j=g[0];}var i=this;i.clk=j;if(j.type=="image"){if(k.offsetX!==undefined){i.clk_x=k.offsetX;i.clk_y=k.offsetY;}else{if(typeof f.fn.offset=="function"){var l=h.offset();i.clk_x=k.pageX-l.left;i.clk_y=k.pageY-l.top;}else{i.clk_x=k.pageX-j.offsetLeft;i.clk_y=k.pageY-j.offsetTop;}}}setTimeout(function(){i.clk=i.clk_x=i.clk_y=null;},100);}f.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin");};f.fn.formToArray=function(y,g){var x=[];if(this.length===0){return x;}var l=this[0];var A=this.attr("id");var q=y?l.getElementsByTagName("*"):l.elements;var B;if(q&&!/MSIE [678]/.test(navigator.userAgent)){if(typeof document.documentMode=="undefined"||document.documentMode>8){q=f(q).get();}}if(A){B=f(':input[form="'+A+'"]').get();if(B.length){q=(q||[]).concat(B);}}if(!q||!q.length){return x;}var r,p,o,z,m,u,k;for(r=0,u=q.length;r<u;r++){m=q[r];o=m.name;if(!o||m.disabled){continue;}if(y&&l.clk&&m.type=="image"){if(l.clk==m){x.push({name:o,value:f(m).val(),type:m.type});x.push({name:o+".x",value:l.clk_x},{name:o+".y",value:l.clk_y});}continue;}z=f.fieldValue(m,true);if(z&&z.constructor==Array){if(g){g.push(m);}for(p=0,k=z.length;p<k;p++){x.push({name:o,value:z[p]});}}else{if(c.fileapi&&m.type=="file"){if(g){g.push(m);}var h=m.files;if(h.length){for(p=0;p<h.length;p++){x.push({name:o,value:h[p],type:m.type});}}else{x.push({name:o,value:"",type:m.type});}}else{if(z!==null&&typeof z!="undefined"){if(g){g.push(m);}x.push({name:o,value:z,type:m.type,required:m.required});}}}}if(!y&&l.clk){var t=f(l.clk),w=t[0];o=w.name;if(o&&!w.disabled&&w.type=="image"){x.push({name:o,value:t.val()});x.push({name:o+".x",value:l.clk_x},{name:o+".y",value:l.clk_y});}}return x;};f.fn.formSerialize=function(g){return f.param(this.formToArray(g));};f.fn.fieldSerialize=function(h){var g=[];this.each(function(){var m=this.name;if(!m){return;}var k=f.fieldValue(this,h);if(k&&k.constructor==Array){for(var l=0,j=k.length;l<j;l++){g.push({name:m,value:k[l]});}}else{if(k!==null&&typeof k!="undefined"){g.push({name:this.name,value:k});}}});return f.param(g);};f.fn.fieldValue=function(m){for(var l=[],j=0,g=this.length;j<g;j++){var k=this[j];var h=f.fieldValue(k,m);if(h===null||typeof h=="undefined"||(h.constructor==Array&&!h.length)){continue;}if(h.constructor==Array){f.merge(l,h);}else{l.push(h);}}return l;};f.fieldValue=function(g,o){var j=g.name,w=g.type,x=g.tagName.toLowerCase();if(o===undefined){o=true;}if(o&&(!j||g.disabled||w=="reset"||w=="button"||(w=="checkbox"||w=="radio")&&!g.checked||(w=="submit"||w=="image")&&g.form&&g.form.clk!=g||x=="select"&&g.selectedIndex==-1)){return null;}if(x=="select"){var p=g.selectedIndex;if(p<0){return null;}var r=[],h=g.options;var l=(w=="select-one");var q=(l?p+1:h.length);for(var k=(l?p:0);k<q;k++){var m=h[k];if(m.selected){var u=m.value;if(!u){u=(m.attributes&&m.attributes.value&&!(m.attributes.value.specified))?m.text:m.value;}if(l){return u;}r.push(u);}}return r;}return f(g).val();};f.fn.clearForm=function(g){return this.each(function(){f("input,select,textarea",this).clearFields(g);});};f.fn.clearFields=f.fn.clearInputs=function(g){var h=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var j=this.type,i=this.tagName.toLowerCase();if(h.test(j)||i=="textarea"){this.value="";}else{if(j=="checkbox"||j=="radio"){this.checked=false;}else{if(i=="select"){this.selectedIndex=-1;}else{if(j=="file"){if(/MSIE/.test(navigator.userAgent)){f(this).replaceWith(f(this).clone(true));}else{f(this).val("");}}else{if(g){if((g===true&&/hidden/.test(j))||(typeof g=="string"&&f(this).is(g))){this.value="";}}}}}}});};f.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset();}});};f.fn.enable=function(g){if(g===undefined){g=true;}return this.each(function(){this.disabled=!g;});};f.fn.selected=function(g){if(g===undefined){g=true;}return this.each(function(){var h=this.type;if(h=="checkbox"||h=="radio"){this.checked=g;}else{if(this.tagName.toLowerCase()=="option"){var i=f(this).parent("select");if(g&&i[0]&&i[0].type=="select-one"){i.find("option").selected(false);}this.selected=g;}}});};f.fn.ajaxSubmit.debug=false;function d(){if(!f.fn.ajaxSubmit.debug){return;}var g="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(g);}else{if(window.opera&&window.opera.postError){window.opera.postError(g);}}}}));(function(b,a,c){(function(d){if(typeof define==="function"&&define.amd){define(["jquery"],d);}else{if(jQuery&&!jQuery.fn.qtip){d(jQuery);}}}(function(ao){var P=true,E=false,ab=null,V="x",U="y",J="width",av="height",m="top",d="left",ap="bottom",k="right",G="center",r="flip",T="flipinvert",n="shift",x,ax,ah,h,aD={},o="qtip",B="data-hasqtip",Z="data-qtip-id",ag=["ui-widget","ui-tooltip"],w="."+o,aa="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),z=o+"-fixed",N=o+"-default",L=o+"-focus",aC=o+"-hover",R=o+"-disabled",aB="_replacedByqTip",D="oldtitle",aA,q={ie:(function(){for(var C=4,X=a.createElement("div");(X.innerHTML="<!--[if gt IE "+C+"]><i></i><![endif]-->")&&X.getElementsByTagName("i")[0];C+=1){}return C>4?C:NaN;}()),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||E};function at(Y,X,aE,C){this.id=aE;this.target=Y;this.tooltip=ab;this.elements={target:Y};this._id=o+"-"+aE;this.timers={img:{}};this.options=X;this.plugins={};this.cache={event:{},target:ao(),disabled:E,attr:C,onTooltip:E,lastClass:""};this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=E;}ax=at.prototype;ax._when=function(C){return ao.when.apply(ao,C);};ax.render=function(aG){if(this.rendered||this.destroyed){return this;}var aJ=this,aM=this.options,X=this.cache,C=this.elements,aI=aM.content.text,aF=aM.content.title,aE=aM.content.button,aH=aM.position,Y="."+this._id+" ",aL=[],aK;ao.attr(this.target[0],"aria-describedby",this._id);X.posClass=this._createPosClass((this.position={my:aH.my,at:aH.at}).my);this.tooltip=C.tooltip=aK=ao("<div/>",{id:this._id,"class":[o,N,aM.style.classes,X.posClass].join(" "),width:aM.style.width||"",height:aM.style.height||"",tracking:aH.target==="mouse"&&aH.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":E,"aria-describedby":this._id+"-content","aria-hidden":P}).toggleClass(R,this.disabled).attr(Z,this.id).data(o,this).appendTo(aH.container).append(C.content=ao("<div />",{"class":o+"-content",id:this._id+"-content","aria-atomic":P}));this.rendered=-1;this.positioning=P;if(aF){this._createTitle();if(!ao.isFunction(aF)){aL.push(this._updateTitle(aF,E));}}if(aE){this._createButton();}if(!ao.isFunction(aI)){aL.push(this._updateContent(aI,E));}this.rendered=P;this._setWidget();ao.each(aD,function(aO){var aN;if(this.initialize==="render"&&(aN=this(aJ))){aJ.plugins[aO]=aN;}});this._unassignEvents();this._assignEvents();this._when(aL).then(function(){aJ._trigger("render");aJ.positioning=E;if(!aJ.hiddenDuringWait&&(aM.show.ready||aG)){aJ.toggle(P,X.event,E);}aJ.hiddenDuringWait=E;});x.api[this.id]=this;return this;};ax.destroy=function(C){if(this.destroyed){return this.target;}function X(){if(this.destroyed){return;}this.destroyed=P;var Y=this.target,aE=Y.attr(D),aF;if(this.rendered){this.tooltip.stop(1,0).find("*").remove().end().remove();}ao.each(this.plugins,function(aG){this.destroy&&this.destroy();});for(aF in this.timers){clearTimeout(this.timers[aF]);}Y.removeData(o).removeAttr(Z).removeAttr(B).removeAttr("aria-describedby");if(this.options.suppress&&aE){Y.attr("title",aE).removeAttr(D);}this._unassignEvents();this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=ab;delete x.api[this.id];}if((C!==P||this.triggering==="hide")&&this.rendered){this.tooltip.one("tooltiphidden",ao.proxy(X,this));!this.triggering&&this.hide();}else{X.call(this);}return this.target;};function y(C){return C===ab||ao.type(C)!=="object";}function O(C){return !(ao.isFunction(C)||(C&&C.attr)||C.length||(ao.type(C)==="object"&&(C.jquery||C.then)));}function t(Y){var X,aF,aE,C;if(y(Y)){return E;}if(y(Y.metadata)){Y.metadata={type:Y.metadata};}if("content" in Y){X=Y.content;if(y(X)||X.jquery||X.done){X=Y.content={text:(aF=O(X)?E:X)};}else{aF=X.text;}if("ajax" in X){aE=X.ajax;C=aE&&aE.once!==E;delete X.ajax;X.text=function(aI,aH){var aJ=aF||ao(this).attr(aH.options.content.attr)||"Loading...",aG=ao.ajax(ao.extend({},aE,{context:aH})).then(aE.success,ab,aE.error).then(function(aK){if(aK&&C){aH.set("content.text",aK);}return aK;},function(aM,aK,aL){if(aH.destroyed||aM.status===0){return;}aH.set("content.text",aK+": "+aL);});return !C?(aH.set("content.text",aJ),aG):aJ;};}if("title" in X){if(ao.isPlainObject(X.title)){X.button=X.title.button;X.title=X.title.text;}if(O(X.title||E)){X.title=E;}}}if("position" in Y&&y(Y.position)){Y.position={my:Y.position,at:Y.position};}if("show" in Y&&y(Y.show)){Y.show=Y.show.jquery?{target:Y.show}:Y.show===P?{ready:P}:{event:Y.show};}if("hide" in Y&&y(Y.hide)){Y.hide=Y.hide.jquery?{target:Y.hide}:{event:Y.hide};}if("style" in Y&&y(Y.style)){Y.style={classes:Y.style};}ao.each(aD,function(){this.sanitize&&this.sanitize(Y);});return Y;}h=ax.checks={builtin:{"^id$":function(aE,aF,X,Y){var aG=X===P?x.nextid:X,C=o+"-"+aG;if(aG!==E&&aG.length>0&&!ao("#"+C).length){this._id=C;if(this.rendered){this.tooltip[0].id=this._id;this.elements.content[0].id=this._id+"-content";this.elements.title[0].id=this._id+"-title";}}else{aE[aF]=Y;}},"^prerender":function(X,Y,C){C&&!this.rendered&&this.render(this.options.show.ready);},"^content.text$":function(X,Y,C){this._updateContent(C);},"^content.attr$":function(Y,aE,C,X){if(this.options.content.text===this.target.attr(X)){this._updateContent(this.target.attr(C));}},"^content.title$":function(X,Y,C){if(!C){return this._removeTitle();}C&&!this.elements.title&&this._createTitle();this._updateTitle(C);},"^content.button$":function(X,Y,C){this._updateButton(C);},"^content.title.(text|button)$":function(X,Y,C){this.set("content."+Y,C);},"^position.(my|at)$":function(X,Y,C){"string"===typeof C&&(this.position[Y]=X[Y]=new ah(C,Y==="at"));},"^position.container$":function(X,Y,C){this.rendered&&this.tooltip.appendTo(C);},"^show.ready$":function(X,Y,C){C&&(!this.rendered&&this.render(P)||this.toggle(P));},"^style.classes$":function(Y,aE,C,X){this.rendered&&this.tooltip.removeClass(X).addClass(C);},"^style.(width|height)":function(X,Y,C){this.rendered&&this.tooltip.css(Y,C);},"^style.widget|content.title":function(){this.rendered&&this._setWidget();},"^style.def":function(X,Y,C){this.rendered&&this.tooltip.toggleClass(N,!!C);},"^events.(render|show|move|hide|focus|blur)$":function(X,Y,C){this.rendered&&this.tooltip[(ao.isFunction(C)?"":"un")+"bind"]("tooltip"+Y,C);},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(!this.rendered){return;}var C=this.options.position;this.tooltip.attr("tracking",C.target==="mouse"&&C.adjust.mouse);this._unassignEvents();this._assignEvents();}}};function ai(C,aE){var X=0,aG,Y=C,aF=aE.split(".");while(Y=Y[aF[X++]]){if(X<aF.length){aG=Y;}}return[aG||C,aF.pop()];}ax.get=function(X){if(this.destroyed){return this;}var Y=ai(this.options,X.toLowerCase()),C=Y[0][Y[1]];return C.precedance?C.string():C;};function W(aE,X){var Y,aF,C;for(Y in this.checks){for(aF in this.checks[Y]){if(C=(new RegExp(aF,"i")).exec(aE)){X.push(C);if(Y==="builtin"||this.plugins[Y]){this.checks[Y][aF].apply(this.plugins[Y]||this,X);}}}}}var v=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,p=/^prerender|show\.ready/i;ax.set=function(aF,aG){if(this.destroyed){return this;}var aH=this.rendered,C=E,aE=this.options,Y=this.checks,X;if("string"===typeof aF){X=aF;aF={};aF[X]=aG;}else{aF=ao.extend({},aF);}ao.each(aF,function(aJ,aK){if(aH&&p.test(aJ)){delete aF[aJ];return;}var aL=ai(aE,aJ.toLowerCase()),aI;aI=aL[0][aL[1]];aL[0][aL[1]]=aK&&aK.nodeType?ao(aK):aK;C=v.test(aJ)||C;aF[aJ]=[aL[0],aL[1],aK,aI];});t(aE);this.positioning=P;ao.each(aF,ao.proxy(W,this));this.positioning=E;if(this.rendered&&this.tooltip[0].offsetWidth>0&&C){this.reposition(aE.position.target==="mouse"?ab:this.cache.event);}return this;};ax._update=function(aF,aE,C){var Y=this,X=this.cache;if(!this.rendered||!aF){return E;}if(ao.isFunction(aF)){aF=aF.call(this.elements.target,X.event,this)||"";}if(ao.isFunction(aF.then)){X.waiting=P;return aF.then(function(aG){X.waiting=E;return Y._update(aG,aE);},ab,function(aG){return Y._update(aG,aE);});}if(aF===E||(!aF&&aF!=="")){return E;}if(aF.jquery&&aF.length>0){aE.empty().append(aF.css({display:"block",visibility:"visible"}));}else{aE.html(aF);}return this._waitForContent(aE).then(function(aG){if(Y.rendered&&Y.tooltip[0].offsetWidth>0){Y.reposition(X.event,!aG.length);}});};ax._waitForContent=function(X){var C=this.cache;C.waiting=P;return(ao.fn.imagesLoaded?X.imagesLoaded():ao.Deferred().resolve([])).done(function(){C.waiting=E;}).promise();};ax._updateContent=function(X,C){this._update(X,this.elements.content,C);};ax._updateTitle=function(X,C){if(this._update(X,this.elements.title,C)===E){this._removeTitle(E);}};ax._createTitle=function(){var C=this.elements,X=this._id+"-title";if(C.titlebar){this._removeTitle();}C.titlebar=ao("<div />",{"class":o+"-titlebar "+(this.options.style.widget?az("header"):"")}).append(C.title=ao("<div />",{id:X,"class":o+"-title","aria-atomic":P})).insertBefore(C.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(Y){ao(this).toggleClass("ui-state-active ui-state-focus",Y.type.substr(-4)==="down");}).delegate(".qtip-close","mouseover mouseout",function(Y){ao(this).toggleClass("ui-state-hover",Y.type==="mouseover");});if(this.options.content.button){this._createButton();}};ax._removeTitle=function(C){var X=this.elements;if(X.title){X.titlebar.remove();X.titlebar=X.title=X.button=ab;if(C!==E){this.reposition();}}};ax._createPosClass=function(C){return o+"-pos-"+(C||this.options.position.my).abbrev();};ax.reposition=function(aV,aS){if(!this.rendered||this.positioning||this.destroyed){return this;}this.positioning=P;var aR=this.cache,aG=this.tooltip,aY=this.options.position,a0=aY.target,aP=aY.my,aQ=aY.at,aX=aY.viewport,aN=aY.container,aU=aY.adjust,X=aU.method.split(" "),aW=aG.outerWidth(E),aT=aG.outerHeight(E),aI=0,aJ=0,Y=aG.css("position"),aZ={left:0,top:0},C=aG[0].offsetWidth>0,aO=aV&&aV.type==="scroll",aF=ao(b),a1=aN[0].ownerDocument,aM=this.mouse,aL,aH,aE,aK;if(ao.isArray(a0)&&a0.length===2){aQ={x:d,y:m};aZ={left:a0[0],top:a0[1]};}else{if(a0==="mouse"){aQ={x:d,y:m};if((!aU.mouse||this.options.hide.distance)&&aR.origin&&aR.origin.pageX){aV=aR.origin;}else{if(!aV||(aV&&(aV.type==="resize"||aV.type==="scroll"))){aV=aR.event;}else{if(aM&&aM.pageX){aV=aM;}}}if(Y!=="static"){aZ=aN.offset();}if(a1.body.offsetWidth!==(b.innerWidth||a1.documentElement.clientWidth)){aH=ao(a.body).offset();}aZ={left:aV.pageX-aZ.left+(aH&&aH.left||0),top:aV.pageY-aZ.top+(aH&&aH.top||0)};if(aU.mouse&&aO&&aM){aZ.left-=(aM.scrollX||0)-aF.scrollLeft();aZ.top-=(aM.scrollY||0)-aF.scrollTop();}}else{if(a0==="event"){if(aV&&aV.target&&aV.type!=="scroll"&&aV.type!=="resize"){aR.target=ao(aV.target);}else{if(!aV.target){aR.target=this.elements.target;}}}else{if(a0!=="event"){aR.target=ao(a0.jquery?a0:this.elements.target);}}a0=aR.target;a0=ao(a0).eq(0);if(a0.length===0){return this;}else{if(a0[0]===a||a0[0]===b){aI=q.iOS?b.innerWidth:a0.width();aJ=q.iOS?b.innerHeight:a0.height();if(a0[0]===b){aZ={top:(aX||a0).scrollTop(),left:(aX||a0).scrollLeft()};}}else{if(aD.imagemap&&a0.is("area")){aL=aD.imagemap(this,a0,aQ,aD.viewport?X:E);}else{if(aD.svg&&a0&&a0[0].ownerSVGElement){aL=aD.svg(this,a0,aQ,aD.viewport?X:E);}else{aI=a0.outerWidth(E);aJ=a0.outerHeight(E);aZ=a0.offset();}}}}if(aL){aI=aL.width;aJ=aL.height;aH=aL.offset;aZ=aL.position;}aZ=this.reposition.offset(a0,aZ,aN);if((q.iOS>3.1&&q.iOS<4.1)||(q.iOS>=4.3&&q.iOS<4.33)||(!q.iOS&&Y==="fixed")){aZ.left-=aF.scrollLeft();aZ.top-=aF.scrollTop();}if(!aL||(aL&&aL.adjustable!==E)){aZ.left+=aQ.x===k?aI:aQ.x===G?aI/2:0;aZ.top+=aQ.y===ap?aJ:aQ.y===G?aJ/2:0;}}}aZ.left+=aU.x+(aP.x===k?-aW:aP.x===G?-aW/2:0);aZ.top+=aU.y+(aP.y===ap?-aT:aP.y===G?-aT/2:0);if(aD.viewport){aE=aZ.adjusted=aD.viewport(this,aZ,aY,aI,aJ,aW,aT);if(aH&&aE.left){aZ.left+=aH.left;}if(aH&&aE.top){aZ.top+=aH.top;}if(aE.my){this.position.my=aE.my;}}else{aZ.adjusted={left:0,top:0};}if(aR.posClass!==(aK=this._createPosClass(this.position.my))){aG.removeClass(aR.posClass).addClass((aR.posClass=aK));}if(!this._trigger("move",[aZ,aX.elem||aX],aV)){return this;}delete aZ.adjusted;if(aS===E||!C||isNaN(aZ.left)||isNaN(aZ.top)||a0==="mouse"||!ao.isFunction(aY.effect)){aG.css(aZ);}else{if(ao.isFunction(aY.effect)){aY.effect.call(aG,this,ao.extend({},aZ));aG.queue(function(a2){ao(this).css({opacity:"",height:""});if(q.ie){this.style.removeAttribute("filter");}a2();});}}this.positioning=E;return this;};ax.reposition.offset=function(aE,aI,X){if(!X[0]){return aI;}var aL=ao(aE[0].ownerDocument),aH=!!q.ie&&a.compatMode!=="CSS1Compat",aK=X[0],Y,aG,C,aF;function aJ(aN,aM){aI.left+=aM*aN.scrollLeft();aI.top+=aM*aN.scrollTop();}do{if((aG=ao.css(aK,"position"))!=="static"){if(aG==="fixed"){C=aK.getBoundingClientRect();aJ(aL,-1);}else{C=ao(aK).position();C.left+=(parseFloat(ao.css(aK,"borderLeftWidth"))||0);C.top+=(parseFloat(ao.css(aK,"borderTopWidth"))||0);}aI.left-=C.left+(parseFloat(ao.css(aK,"marginLeft"))||0);aI.top-=C.top+(parseFloat(ao.css(aK,"marginTop"))||0);if(!Y&&(aF=ao.css(aK,"overflow"))!=="hidden"&&aF!=="visible"){Y=ao(aK);}}}while((aK=aK.offsetParent));if(Y&&(Y[0]!==aL[0]||aH)){aJ(Y,1);}return aI;};var ad=(ah=ax.reposition.Corner=function(X,C){X=(""+X).replace(/([A-Z])/," $1").replace(/middle/gi,G).toLowerCase();this.x=(X.match(/left|right/i)||X.match(/center/)||["inherit"])[0].toLowerCase();this.y=(X.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();this.forceY=!!C;var Y=X.charAt(0);this.precedance=(Y==="t"||Y==="b"?U:V);}).prototype;ad.invert=function(X,C){this[X]=this[X]===d?k:this[X]===k?d:C||this[X];};ad.string=function(Y){var X=this.x,aE=this.y;var C=X!==aE?(X==="center"||aE!=="center"&&(this.precedance===U||this.forceY)?[aE,X]:[X,aE]):[X];return Y!==false?C.join(" "):C;};ad.abbrev=function(){var C=this.string(false);return C[0].charAt(0)+(C[1]&&C[1].charAt(0)||"");};ad.clone=function(){return new ah(this.string(),this.forceY);};ax.toggle=function(aH,aP){var aN=this.cache,Y=this.options,aG=this.tooltip;if(aP){if((/over|enter/).test(aP.type)&&aN.event&&(/out|leave/).test(aN.event.type)&&Y.show.target.add(aP.target).length===Y.show.target.length&&aG.has(aP.relatedTarget).length){return this;}aN.event=ao.event.fix(aP);}this.waiting&&!aH&&(this.hiddenDuringWait=P);if(!this.rendered){return aH?this.render(1):this;}else{if(this.destroyed||this.disabled){return this;}}var aF=aH?"show":"hide",aM=this.options[aF],aL=this.options[!aH?"show":"hide"],aR=this.options.position,aJ=this.options.content,aO=this.tooltip.css("width"),C=this.tooltip.is(":visible"),aI=aH||aM.target.length===1,aK=!aP||aM.target.length<2||aN.target[0]===aP.target,aQ,aT,aE,aS,X;if((typeof aH).search("boolean|number")){aH=!C;}aQ=!aG.is(":animated")&&C===aH&&aK;aT=!aQ?!!this._trigger(aF,[90]):ab;if(this.destroyed){return this;}if(aT!==E&&aH){this.focus(aP);}if(!aT||aQ){return this;}ao.attr(aG[0],"aria-hidden",!!!aH);if(aH){this.mouse&&(aN.origin=ao.event.fix(this.mouse));if(ao.isFunction(aJ.text)){this._updateContent(aJ.text,E);}if(ao.isFunction(aJ.title)){this._updateTitle(aJ.title,E);}if(!aA&&aR.target==="mouse"&&aR.adjust.mouse){ao(a).bind("mousemove."+o,this._storeMouse);aA=P;}if(!aO){aG.css("width",aG.outerWidth(E));}this.reposition(aP,arguments[2]);if(!aO){aG.css("width","");}if(!!aM.solo){(typeof aM.solo==="string"?ao(aM.solo):ao(w,aM.solo)).not(aG).not(aM.target).qtip("hide",ao.Event("tooltipsolo"));}}else{clearTimeout(this.timers.show);delete aN.origin;if(aA&&!ao(w+'[tracking="true"]:visible',aM.solo).not(aG).length){ao(a).unbind("mousemove."+o);aA=E;}this.blur(aP);}X=ao.proxy(function(){if(aH){if(q.ie){aG[0].style.removeAttribute("filter");}aG.css("overflow","");if("string"===typeof aM.autofocus){ao(this.options.show.autofocus,aG).focus();}this.options.show.target.trigger("qtip-"+this.id+"-inactive");}else{aG.css({display:"",visibility:"",opacity:"",left:"",top:""});}this._trigger(aH?"visible":"hidden");},this);if(aM.effect===E||aI===E){aG[aF]();X();}else{if(ao.isFunction(aM.effect)){aG.stop(1,1);aM.effect.call(aG,this);aG.queue("fx",function(aU){X();aU();});}else{aG.fadeTo(90,aH?1:0,X);}}if(aH){aM.target.trigger("qtip-"+this.id+"-inactive");}return this;};ax.show=function(C){return this.toggle(P,C);};ax.hide=function(C){return this.toggle(E,C);};ax.focus=function(aE){if(!this.rendered||this.destroyed){return this;}var aG=ao(w),aF=this.tooltip,Y=parseInt(aF[0].style.zIndex,10),X=x.zindex+aG.length,C;if(!aF.hasClass(L)){if(this._trigger("focus",[X],aE)){if(Y!==X){aG.each(function(){if(this.style.zIndex>Y){this.style.zIndex=this.style.zIndex-1;}});aG.filter("."+L).qtip("blur",aE);}aF.addClass(L)[0].style.zIndex=X;}}return this;};ax.blur=function(C){if(!this.rendered||this.destroyed){return this;}this.tooltip.removeClass(L);this._trigger("blur",[this.tooltip.css("zIndex")],C);return this;};ax.disable=function(C){if(this.destroyed){return this;}if(C==="toggle"){C=!(this.rendered?this.tooltip.hasClass(R):this.disabled);}else{if("boolean"!==typeof C){C=P;}}if(this.rendered){this.tooltip.toggleClass(R,C).attr("aria-disabled",C);}this.disabled=!!C;return this;};ax.enable=function(){return this.disable(E);};ax._createButton=function(){var X=this,aF=this.elements,aE=aF.tooltip,Y=this.options.content.button,C=typeof Y==="string",aG=C?Y:"Close tooltip";if(aF.button){aF.button.remove();}if(Y.jquery){aF.button=Y;}else{aF.button=ao("<a />",{"class":"qtip-close "+(this.options.style.widget?"":o+"-icon"),title:aG,"aria-label":aG}).prepend(ao("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"}));}aF.button.appendTo(aF.titlebar||aE).attr("role","button").click(function(aH){if(!aE.hasClass(R)){X.hide(aH);}return E;});};ax._updateButton=function(C){if(!this.rendered){return E;}var X=this.elements.button;if(C){this._createButton();}else{X.remove();}};function az(C){return ag.concat("").join(C?"-"+C+" ":" ");}ax._setWidget=function(){var C=this.options.style.widget,aE=this.elements,Y=aE.tooltip,X=Y.hasClass(R);Y.removeClass(R);R=C?"ui-state-disabled":"qtip-disabled";Y.toggleClass(R,X);Y.toggleClass("ui-helper-reset "+az(),C).toggleClass(N,this.options.style.def&&!C);if(aE.content){aE.content.toggleClass(az("content"),C);}if(aE.titlebar){aE.titlebar.toggleClass(az("header"),C);}if(aE.button){aE.button.toggleClass(o+"-icon",!C);}};function e(X,C){if(C>0){return setTimeout(ao.proxy(X,this),C);}else{X.call(this);}}function I(C){if(this.tooltip.hasClass(R)){return;}clearTimeout(this.timers.show);clearTimeout(this.timers.hide);this.timers.show=e.call(this,function(){this.toggle(P,C);},this.options.show.delay);}function g(aE){if(this.tooltip.hasClass(R)||this.destroyed){return;}var X=ao(aE.relatedTarget),C=X.closest(w)[0]===this.tooltip[0],Y=X[0]===this.options.show.target[0];clearTimeout(this.timers.show);clearTimeout(this.timers.hide);if(this!==X[0]&&(this.options.position.target==="mouse"&&C)||(this.options.hide.fixed&&((/mouse(out|leave|move)/).test(aE.type)&&(C||Y)))){try{aE.preventDefault();aE.stopImmediatePropagation();}catch(aF){}return;}this.timers.hide=e.call(this,function(){this.toggle(E,aE);},this.options.hide.delay,this);}function i(C){if(this.tooltip.hasClass(R)||!this.options.hide.inactive){return;}clearTimeout(this.timers.inactive);this.timers.inactive=e.call(this,function(){this.hide(C);},this.options.hide.inactive);}function ae(C){if(this.rendered&&this.tooltip[0].offsetWidth>0){this.reposition(C);}}ax._storeMouse=function(C){(this.mouse=ao.event.fix(C)).type="mousemove";return this;};ax._bind=function(C,Y,aG,aF,X){if(!C||!aG||!Y.length){return;}var aE="."+this._id+(aF?"-"+aF:"");ao(C).bind((Y.split?Y:Y.join(aE+" "))+aE,ao.proxy(aG,X||this));return this;};ax._unbind=function(C,X){C&&ao(C).unbind("."+this._id+(X?"-"+X:""));return this;};function al(C,X,Y){ao(a.body).delegate(C,(X.split?X:X.join("."+o+" "))+"."+o,function(){var aE=x.api[ao.attr(this,Z)];aE&&!aE.disabled&&Y.apply(aE,arguments);});}ax._trigger=function(X,C,Y){var aE=ao.Event("tooltip"+X);aE.originalEvent=(Y&&ao.extend({},Y))||this.cache.event||ab;this.triggering=X;this.tooltip.trigger(aE,[this].concat(C||[]));this.triggering=E;return !aE.isDefaultPrevented();};ax._bindEvents=function(C,aI,X,Y,aF,aE){var aH=X.filter(Y).add(Y.filter(X)),aG=[];if(aH.length){ao.each(aI,function(aK,aL){var aJ=ao.inArray(aL,C);aJ>-1&&aG.push(C.splice(aJ,1)[0]);});if(aG.length){this._bind(aH,aG,function(aJ){var aK=this.rendered?this.tooltip[0].offsetWidth>0:false;(aK?aE:aF).call(this,aJ);});X=X.not(aH);Y=Y.not(aH);}}this._bind(X,C,aF);this._bind(Y,aI,aE);};ax._assignInitialEvents=function(aF){var X=this.options,aE=X.show.target,Y=X.hide.target,C=X.show.event?ao.trim(""+X.show.event).split(" "):[],aH=X.hide.event?ao.trim(""+X.hide.event).split(" "):[];this._bind(this.elements.target,["remove","removeqtip"],function(aI){this.destroy(true);},"destroy");if(/mouse(over|enter)/i.test(X.show.event)&&!/mouse(out|leave)/i.test(X.hide.event)){aH.push("mouseleave");}this._bind(aE,"mousemove",function(aI){this._storeMouse(aI);this.cache.onTarget=P;});function aG(aI){if(this.disabled||this.destroyed){return E;}this.cache.event=aI&&ao.event.fix(aI);this.cache.target=aI&&ao(aI.target);clearTimeout(this.timers.show);this.timers.show=e.call(this,function(){this.render(typeof aI==="object"||X.show.ready);},X.prerender?0:X.show.delay);}this._bindEvents(C,aH,aE,Y,aG,function(){if(!this.timers){return E;}clearTimeout(this.timers.show);});if(X.show.ready||X.prerender){aG.call(this,aF);}};ax._assignEvents=function(){var aL=this,aN=this.options,aJ=aN.position,aM=this.tooltip,aF=aN.show.target,aI=aN.hide.target,aG=aJ.container,X=aJ.viewport,aE=ao(a),Y=ao(a.body),aH=ao(b),C=aN.show.event?ao.trim(""+aN.show.event).split(" "):[],aK=aN.hide.event?ao.trim(""+aN.hide.event).split(" "):[];ao.each(aN.events,function(aO,aP){aL._bind(aM,aO==="toggle"?["tooltipshow","tooltiphide"]:["tooltip"+aO],aP,null,aM);});if(/mouse(out|leave)/i.test(aN.hide.event)&&aN.hide.leave==="window"){this._bind(aE,["mouseout","blur"],function(aO){if(!/select|option/.test(aO.target.nodeName)&&!aO.relatedTarget){this.hide(aO);}});}if(aN.hide.fixed){aI=aI.add(aM.addClass(z));}else{if(/mouse(over|enter)/i.test(aN.show.event)){this._bind(aI,"mouseleave",function(){clearTimeout(this.timers.show);});}}if((""+aN.hide.event).indexOf("unfocus")>-1){this._bind(aG.closest("html"),["mousedown","touchstart"],function(aR){var aQ=ao(aR.target),aP=this.rendered&&!this.tooltip.hasClass(R)&&this.tooltip[0].offsetWidth>0,aO=aQ.parents(w).filter(this.tooltip[0]).length>0;if(aQ[0]!==this.target[0]&&aQ[0]!==this.tooltip[0]&&!aO&&!this.target.has(aQ[0]).length&&aP){this.hide(aR);}});}if("number"===typeof aN.hide.inactive){this._bind(aF,"qtip-"+this.id+"-inactive",i,"inactive");this._bind(aI.add(aM),x.inactiveEvents,i);}this._bindEvents(C,aK,aF,aI,I,g);this._bind(aF.add(aM),"mousemove",function(aR){if("number"===typeof aN.hide.distance){var aQ=this.cache.origin||{},aP=this.options.hide.distance,aO=Math.abs;if(aO(aR.pageX-aQ.pageX)>=aP||aO(aR.pageY-aQ.pageY)>=aP){this.hide(aR);}}this._storeMouse(aR);});if(aJ.target==="mouse"){if(aJ.adjust.mouse){if(aN.hide.event){this._bind(aF,["mouseenter","mouseleave"],function(aO){if(!this.cache){return E;}this.cache.onTarget=aO.type==="mouseenter";});}this._bind(aE,"mousemove",function(aO){if(this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(R)&&this.tooltip[0].offsetWidth>0){this.reposition(aO);}});}}if(aJ.adjust.resize||X.length){this._bind(ao.event.special.resize?X:aH,"resize",ae);}if(aJ.adjust.scroll){this._bind(aH.add(aJ.container),"scroll",ae);}};ax._unassignEvents=function(){var X=this.options,Y=X.show.target,aE=X.hide.target,C=ao.grep([this.elements.target[0],this.rendered&&this.tooltip[0],X.position.container[0],X.position.viewport[0],X.position.container.closest("html")[0],b,a],function(aF){return typeof aF==="object";});if(Y&&Y.toArray){C=C.concat(Y.toArray());}if(aE&&aE.toArray){C=C.concat(aE.toArray());}this._unbind(C)._unbind(C,"destroy")._unbind(C,"inactive");};ao(function(){al(w,["mouseenter","mouseleave"],function(X){var aE=X.type==="mouseenter",Y=ao(X.currentTarget),aF=ao(X.relatedTarget||X.target),C=this.options;if(aE){this.focus(X);Y.hasClass(z)&&!Y.hasClass(R)&&clearTimeout(this.timers.hide);}else{if(C.position.target==="mouse"&&C.position.adjust.mouse&&C.hide.event&&C.show.target&&!aF.closest(C.show.target[0]).length){this.hide(X);}}Y.toggleClass(aC,aE);});al("["+Z+"]",aa,i);});function ac(aE,X,C){var aF,aO,aJ,Y,aM,aG=ao(a.body),aL=aE[0]===a?aG:aE,aK=(aE.metadata)?aE.metadata(C.metadata):ab,aN=C.metadata.type==="html5"&&aK?aK[C.metadata.name]:ab,aH=aE.data(C.metadata.name||"qtipopts");try{aH=typeof aH==="string"?ao.parseJSON(aH):aH;}catch(aI){}Y=ao.extend(P,{},x.defaults,C,typeof aH==="object"?t(aH):ab,t(aN||aK));aO=Y.position;Y.id=X;if("boolean"===typeof Y.content.text){aJ=aE.attr(Y.content.attr);if(Y.content.attr!==E&&aJ){Y.content.text=aJ;}else{return E;}}if(!aO.container.length){aO.container=aG;}if(aO.target===E){aO.target=aL;}if(Y.show.target===E){Y.show.target=aL;}if(Y.show.solo===P){Y.show.solo=aO.container.closest("body");}if(Y.hide.target===E){Y.hide.target=aL;}if(Y.position.viewport===P){Y.position.viewport=aO.container;}aO.container=aO.container.eq(0);aO.at=new ah(aO.at,P);aO.my=new ah(aO.my);if(aE.data(o)){if(Y.overwrite){aE.qtip("destroy",true);}else{if(Y.overwrite===E){return E;}}}aE.attr(B,X);if(Y.suppress&&(aM=aE.attr("title"))){aE.removeAttr("title").attr(D,aM).attr("title","");}aF=new at(aE,Y,X,!!aJ);aE.data(o,aF);return aF;}x=ao.fn.qtip=function(X,aG,aH){var aI=(""+X).toLowerCase(),aF=ab,C=ao.makeArray(arguments).slice(1),aE=C[C.length-1],Y=this[0]?ao.data(this[0],o):ab;if((!arguments.length&&Y)||aI==="api"){return Y;}else{if("string"===typeof X){this.each(function(){var aJ=ao.data(this,o);if(!aJ){return P;}if(aE&&aE.timeStamp){aJ.cache.event=aE;}if(aG&&(aI==="option"||aI==="options")){if(aH!==c||ao.isPlainObject(aG)){aJ.set(aG,aH);}else{aF=aJ.get(aG);return E;}}else{if(aJ[aI]){aJ[aI].apply(aJ,C);}}});return aF!==ab?aF:this;}else{if("object"===typeof X||!arguments.length){Y=t(ao.extend(P,{},X));return this.each(function(aJ){var aK,aL;aL=ao.isArray(Y.id)?Y.id[aJ]:Y.id;aL=!aL||aL===E||aL.length<1||x.api[aL]?x.nextid++:aL;aK=ac(ao(this),aL,Y);if(aK===E){return P;}else{x.api[aL]=aK;}ao.each(aD,function(){if(this.initialize==="initialize"){this(aK);}});aK._assignInitialEvents(aE);});}}}};ao.qtip=at;x.api={};ao.each({attr:function(C,aF){if(this.length){var X=this[0],aE="title",Y=ao.data(X,"qtip");if(C===aE&&Y&&"object"===typeof Y&&Y.options.suppress){if(arguments.length<2){return ao.attr(X,D);}if(Y&&Y.options.content.attr===aE&&Y.cache.attr){Y.set("content.text",aF);}return this.attr(D,aF);}}return ao.fn["attr"+aB].apply(this,arguments);},clone:function(X){var aE=ao([]),Y="title",C=ao.fn["clone"+aB].apply(this,arguments);if(!X){C.filter("["+D+"]").attr("title",function(){return ao.attr(this,D);}).removeAttr(D);}return C;}},function(X,Y){if(!Y||ao.fn[X+aB]){return P;}var C=ao.fn[X+aB]=ao.fn[X];ao.fn[X]=function(){return Y.apply(this,arguments)||C.apply(this,arguments);};});if(!ao.ui){ao["cleanData"+aB]=ao.cleanData;ao.cleanData=function(C){for(var X=0,Y;(Y=ao(C[X])).length;X++){if(Y.attr(B)){try{Y.triggerHandler("removeqtip");}catch(aE){}}}ao["cleanData"+aB].apply(this,arguments);};}x.version="2.2.1";x.nextid=0;x.inactiveEvents=aa;x.zindex=15000;x.defaults={prerender:E,id:E,overwrite:P,suppress:P,content:{text:P,attr:"title",title:E,button:E},position:{my:"top left",at:"bottom right",target:E,container:E,viewport:E,adjust:{x:0,y:0,mouse:P,scroll:P,resize:P,method:"flipinvert flipinvert"},effect:function(X,Y,C){ao(this).animate(Y,{duration:200,queue:E});}},show:{target:E,event:"mouseenter",effect:P,delay:90,solo:E,ready:E,autofocus:E},hide:{target:E,event:"mouseleave",effect:P,delay:0,fixed:E,inactive:E,leave:"window",distance:E},style:{classes:"",widget:E,width:E,height:E,def:P},events:{render:ab,move:ab,show:ab,hide:ab,toggle:ab,visible:ab,hidden:ab,focus:ab,blur:ab}};var j,Q=".qtip-tip",M="margin",au="border",an="color",aj="background-color",af="transparent",am=" !important",aq=!!a.createElement("canvas").getContext,f=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i;function S(C){return C.charAt(0).toUpperCase()+C.slice(1);}var A={},F=["Webkit","O","Moz","ms"];function l(aE,aH){var C=aH.charAt(0).toUpperCase()+aH.slice(1),Y=(aH+" "+F.join(C+" ")+C).split(" "),aG,aF,X=0;if(A[aH]){return aE.css(A[aH]);}while((aG=Y[X++])){if((aF=aE.css(aG))!==c){return A[aH]=aG,aF;}}}function H(C,X){return Math.ceil(parseFloat(l(C,X)));}if(!aq){var aw=function(C,Y,X){return"<qtipvml:"+C+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(Y||"")+' style="behavior: url(#default#VML); '+(X||"")+'" />';};}else{var u=b.devicePixelRatio||1,ay=(function(){var C=a.createElement("canvas").getContext("2d");return C.backingStorePixelRatio||C.webkitBackingStorePixelRatio||C.mozBackingStorePixelRatio||C.msBackingStorePixelRatio||C.oBackingStorePixelRatio||1;}()),K=u/ay;}function ak(X,C){this._ns="tip";this.options=C;this.offset=C.offset;this.size=[C.width,C.height];this.init((this.qtip=X));}ao.extend(ak.prototype,{init:function(Y){var C,X;X=this.element=Y.elements.tip=ao("<div />",{"class":o+"-tip"}).prependTo(Y.tooltip);if(aq){C=ao("<canvas />").appendTo(this.element)[0].getContext("2d");C.lineJoin="miter";C.miterLimit=100000;C.save();}else{C=aw("shape",'coordorigin="0,0"',"position:absolute;");this.element.html(C+C);Y._bind(ao("*",X).add(X),["click","mousedown"],function(aE){aE.stopPropagation();},this._ns);}Y._bind(Y.tooltip,"tooltipmove",this.reposition,this._ns,this);this.create();},_swapDimensions:function(){this.size[0]=this.options.height;this.size[1]=this.options.width;},_resetDimensions:function(){this.size[0]=this.options.width;this.size[1]=this.options.height;},_useTitle:function(C){var X=this.qtip.elements.titlebar;return X&&(C.y===m||(C.y===G&&this.element.position().top+(this.size[1]/2)+this.options.offset<X.outerHeight(P)));},_parseCorner:function(C){var X=this.qtip.options.position.my;if(C===E||X===E){C=E;}else{if(C===P){C=new ah(X.string());}else{if(!C.string){C=new ah(C);C.fixed=P;}}}return C;},_parseWidth:function(Y,X,C){var aE=this.qtip.elements,aF=au+S(X)+"Width";return(C?H(C,aF):(H(aE.content,aF)||H(this._useTitle(Y)&&aE.titlebar||aE.content,aF)||H(aE.tooltip,aF)))||0;},_parseRadius:function(C){var X=this.qtip.elements,Y=au+S(C.y)+S(C.x)+"Radius";return q.ie<9?0:H(this._useTitle(C)&&X.titlebar||X.content,Y)||H(X.tooltip,Y)||0;},_invalidColour:function(C,aE,X){var Y=C.css(aE);return !Y||(X&&Y===C.css(X))||f.test(Y)?E:Y;},_parseColours:function(aF){var aH=this.qtip.elements,aG=this.element.css("cssText",""),aE=au+S(aF[aF.precedance])+S(an),X=this._useTitle(aF)&&aH.titlebar||aH.content,Y=this._invalidColour,C=[];C[0]=Y(aG,aj)||Y(X,aj)||Y(aH.content,aj)||Y(aH.tooltip,aj)||aG.css(aj);C[1]=Y(aG,aE,an)||Y(X,aE,an)||Y(aH.content,aE,an)||Y(aH.tooltip,aE,an)||aH.tooltip.css(aE);ao("*",aG).add(aG).css("cssText",aj+":"+af+am+";"+au+":0"+am+";");return C;},_calculateSize:function(aK){var aI=aK.precedance===U,X=this.options.width,aL=this.options.height,aH=aK.abbrev()==="c",C=(aI?X:aL)*(aH?0.5:1),aE=Math.pow,aM=Math.round,aJ,aG,aN,Y=Math.sqrt(aE(C,2)+aE(aL,2)),aF=[(this.border/C)*Y,(this.border/aL)*Y];aF[2]=Math.sqrt(aE(aF[0],2)-aE(this.border,2));aF[3]=Math.sqrt(aE(aF[1],2)-aE(this.border,2));aJ=Y+aF[2]+aF[3]+(aH?0:aF[0]);aG=aJ/Y;aN=[aM(aG*X),aM(aG*aL)];return aI?aN:aN.reverse();},_calculateTip:function(aH,Y,aI){aI=aI||1;Y=Y||this.size;var aF=Y[0]*aI,X=Y[1]*aI,aE=Math.ceil(aF/2),aG=Math.ceil(X/2),C={br:[0,0,aF,X,aF,0],bl:[0,0,aF,0,0,X],tr:[0,X,aF,0,aF,X],tl:[0,0,0,X,aF,X],tc:[0,X,aE,0,aF,X],bc:[0,0,aF,0,aE,X],rc:[0,0,aF,aG,0,X],lc:[aF,0,aF,X,0,aG]};C.lt=C.br;C.rt=C.bl;C.lb=C.tr;C.rb=C.tl;return C[aH.abbrev()];},_drawCoords:function(C,X){C.beginPath();C.moveTo(X[0],X[1]);C.lineTo(X[2],X[3]);C.lineTo(X[4],X[5]);C.closePath();},create:function(){var C=this.corner=(aq||q.ie)&&this._parseCorner(this.options.corner);if((this.enabled=!!this.corner&&this.corner.abbrev()!=="c")){this.qtip.cache.corner=C.clone();this.update();}this.element.toggle(this.enabled);return this.corner;},update:function(aE,aS){if(!this.enabled){return this;}var aH=this.qtip.elements,aG=this.element,aR=aG.children(),Y=this.options,aK=this.size,aP=Y.mimic,aQ=Math.round,aM,aI,X,aO,aJ,aF,C,aL,aN;if(!aE){aE=this.qtip.cache.corner||this.corner;}if(aP===E){aP=aE;}else{aP=new ah(aP);aP.precedance=aE.precedance;if(aP.x==="inherit"){aP.x=aE.x;}else{if(aP.y==="inherit"){aP.y=aE.y;}else{if(aP.x===aP.y){aP[aE.precedance]=aE[aE.precedance];}}}}aI=aP.precedance;if(aE.precedance===V){this._swapDimensions();}else{this._resetDimensions();}aM=this.color=this._parseColours(aE);if(aM[1]!==af){aL=this.border=this._parseWidth(aE,aE[aE.precedance]);if(Y.border&&aL<1&&!f.test(aM[1])){aM[0]=aM[1];}this.border=aL=Y.border!==P?Y.border:aL;}else{this.border=aL=0;}C=this.size=this._calculateSize(aE);aG.css({width:C[0],height:C[1],lineHeight:C[1]+"px"});if(aE.precedance===U){aF=[aQ(aP.x===d?aL:aP.x===k?C[0]-aK[0]-aL:(C[0]-aK[0])/2),aQ(aP.y===m?C[1]-aK[1]:0)];}else{aF=[aQ(aP.x===d?C[0]-aK[0]:0),aQ(aP.y===m?aL:aP.y===ap?C[1]-aK[1]-aL:(C[1]-aK[1])/2)];}if(aq){X=aR[0].getContext("2d");X.restore();X.save();X.clearRect(0,0,6000,6000);aO=this._calculateTip(aP,aK,K);aJ=this._calculateTip(aP,this.size,K);aR.attr(J,C[0]*K).attr(av,C[1]*K);aR.css(J,C[0]).css(av,C[1]);this._drawCoords(X,aJ);X.fillStyle=aM[1];X.fill();X.translate(aF[0]*K,aF[1]*K);this._drawCoords(X,aO);X.fillStyle=aM[0];X.fill();}else{aO=this._calculateTip(aP);aO="m"+aO[0]+","+aO[1]+" l"+aO[2]+","+aO[3]+" "+aO[4]+","+aO[5]+" xe";aF[2]=aL&&/^(r|b)/i.test(aE.string())?q.ie===8?2:1:0;aR.css({coordsize:(C[0]+aL)+" "+(C[1]+aL),antialias:""+(aP.string().indexOf(G)>-1),left:aF[0]-(aF[2]*Number(aI===V)),top:aF[1]-(aF[2]*Number(aI===U)),width:C[0]+aL,height:C[1]+aL}).each(function(aT){var aU=ao(this);aU[aU.prop?"prop":"attr"]({coordsize:(C[0]+aL)+" "+(C[1]+aL),path:aO,fillcolor:aM[0],filled:!!aT,stroked:!aT}).toggle(!!(aL||aT));!aT&&aU.html(aw("stroke",'weight="'+(aL*2)+'px" color="'+aM[1]+'" miterlimit="1000" joinstyle="miter"'));});}b.opera&&setTimeout(function(){aH.tip.css({display:"inline-block",visibility:"visible"});},1);if(aS!==E){this.calculate(aE,C);}},calculate:function(aI,aK){if(!this.enabled){return E;}var aJ=this,C=this.qtip.elements,aH=this.element,X=this.options.offset,aE=C.tooltip.hasClass("ui-widget"),aG={},Y,aF;aI=aI||this.corner;Y=aI.precedance;aK=aK||this._calculateSize(aI);aF=[aI.x,aI.y];if(Y===V){aF.reverse();}ao.each(aF,function(aO,aN){var aL,aP,aM;if(aN===G){aL=Y===U?d:m;aG[aL]="50%";aG[M+"-"+aL]=-Math.round(aK[Y===U?0:1]/2)+X;}else{aL=aJ._parseWidth(aI,aN,C.tooltip);aP=aJ._parseWidth(aI,aN,C.content);aM=aJ._parseRadius(aI);aG[aN]=Math.max(-aJ.border,aO?aP:(X+(aM>aL?aM:-aL)));}});aG[aI[Y]]-=aK[Y===V?0:1];aH.css({margin:"",top:"",bottom:"",left:"",right:""}).css(aG);return aG;},reposition:function(aE,aK,aO,aL){if(!this.enabled){return;}var X=aK.cache,aQ=this.corner.clone(),aP=aO.adjusted,C=aK.options.position.adjust.method.split(" "),Y=C[0],aG=C[1]||C[0],aF={left:E,top:E,x:0,y:0},aI,aJ={},aM;function aN(aU,aR,aV,aS,aT){if(aU===n&&aQ.precedance===aR&&aP[aS]&&aQ[aV]!==G){aQ.precedance=aQ.precedance===V?U:V;}else{if(aU!==n&&aP[aS]){aQ[aR]=aQ[aR]===G?(aP[aS]>0?aS:aT):(aQ[aR]===aS?aT:aS);}}}function aH(aT,aR,aS){if(aQ[aT]===G){aJ[M+"-"+aR]=aF[aT]=aI[M+"-"+aR]-aP[aR];}else{aM=aI[aS]!==c?[aP[aR],-aI[aR]]:[-aP[aR],aI[aR]];if((aF[aT]=Math.max(aM[0],aM[1]))>aM[0]){aO[aR]-=aP[aR];aF[aR]=E;}aJ[aI[aS]!==c?aS:aR]=aF[aT];}}if(this.corner.fixed!==P){aN(Y,V,U,d,k);aN(aG,U,V,m,ap);if(aQ.string()!==X.corner.string()||X.cornerTop!==aP.top||X.cornerLeft!==aP.left){this.update(aQ,E);}}aI=this.calculate(aQ);if(aI.right!==c){aI.left=-aI.right;}if(aI.bottom!==c){aI.top=-aI.bottom;}aI.user=this.offset;if(aF.left=(Y===n&&!!aP.left)){aH(V,d,k);}if(aF.top=(aG===n&&!!aP.top)){aH(U,m,ap);}this.element.css(aJ).toggle(!((aF.x&&aF.y)||(aQ.x===G&&aF.y)||(aQ.y===G&&aF.x)));aO.left-=aI.left.charAt?aI.user:Y!==n||aF.top||!aF.left&&!aF.top?aI.left+this.border:0;aO.top-=aI.top.charAt?aI.user:aG!==n||aF.left||!aF.left&&!aF.top?aI.top+this.border:0;X.cornerLeft=aP.left;X.cornerTop=aP.top;X.corner=aQ.clone();},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns);if(this.qtip.elements.tip){this.qtip.elements.tip.find("*").remove().end().remove();}}});j=aD.tip=function(C){return new ak(C,C.options.style.tip);};j.initialize="render";j.sanitize=function(C){if(C.style&&"tip" in C.style){var X=C.style.tip;if(typeof X!=="object"){X=C.style.tip={corner:X};}if(!(/string|boolean/i).test(typeof X.corner)){X.corner=P;}}};h.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create();this.qtip.reposition();},"^style.tip.(height|width)$":function(C){this.size=[C.width,C.height];this.update();this.qtip.reposition();},"^content.title|style.(classes|widget)$":function(){this.update();}};ao.extend(P,x.defaults,{style:{tip:{corner:P,mimic:E,width:6,height:6,border:P,offset:0}}});aD.viewport=function(aQ,a2,aZ,aH,aI,aW,aV){var a1=aZ.target,aF=aQ.elements.tooltip,aO=aZ.my,aR=aZ.at,aU=aZ.adjust,X=aU.method.split(" "),aM=X[0],aK=X[1]||X[0],aY=aZ.viewport,aN=aZ.container,aP=aQ.cache,aE={left:0,top:0},Y,aJ,aG,a0,aT,C,aS,aX;if(!aY.jquery||a1[0]===b||a1[0]===a.body||aU.method==="none"){return aE;}aG=aN.offset()||aE;a0=aN.css("position")==="static";Y=aF.css("position")==="fixed";aT=aY[0]===b?aY.width():aY.outerWidth(E);C=aY[0]===b?aY.height():aY.outerHeight(E);aS={left:Y?0:aY.scrollLeft(),top:Y?0:aY.scrollTop()};aX=aY.offset()||aE;function aL(a4,a3,a6,bi,bb,a9,bh,bk,bd){var a7=a2[bb],be=aO[a4],bj=aR[a4],bl=a6===n,ba=be===bb?bd:be===a9?-bd:-bd/2,bf=bj===bb?bk:bj===a9?-bk:-bk/2,bg=aS[bb]+aX[bb]-(a0?0:aG[bb]),a8=bg-a7,a5=a7+bd-(bh===J?aT:C)-bg,bc=ba-(aO.precedance===a4||be===aO[a3]?bf:0)-(bj===G?bk/2:0);if(bl){bc=(be===bb?1:-1)*ba;a2[bb]+=a8>0?a8:a5>0?-a5:0;a2[bb]=Math.max(-aG[bb]+aX[bb],a7-bc,Math.min(Math.max(-aG[bb]+aX[bb]+(bh===J?aT:C),a7+bc),a2[bb],be==="center"?a7-ba:1000000000));}else{bi*=(a6===T?2:0);if(a8>0&&(be!==bb||a5>0)){a2[bb]-=bc+bi;aJ.invert(a4,bb);}else{if(a5>0&&(be!==a9||a8>0)){a2[bb]-=(be===G?-bc:bc)+bi;aJ.invert(a4,a9);}}if(a2[bb]<aS&&-a2[bb]>a5){a2[bb]=a7;aJ=aO.clone();}}return a2[bb]-a7;}if(aM!=="shift"||aK!=="shift"){aJ=aO.clone();}aE={left:aM!=="none"?aL(V,U,aM,aU.x,d,k,J,aH,aW):0,top:aK!=="none"?aL(U,V,aK,aU.y,m,ap,av,aI,aV):0,my:aJ};return aE;};}));}(window,document));
/*!
 * jquery.fancytree.js
 * Dynamic tree view control, with support for lazy loading of branches.
 * https://github.com/mar10/fancytree/
 *
 * Copyright (c) 2008-2015, Martin Wendt (http://wwWendt.de)
 * Released under the MIT license
 * https://github.com/mar10/fancytree/wiki/LicenseInfo
 *
 * @version 2.8.0
 * @date 2015-02-08T17:56
 */
;(function(g,o,r,l){if(g.ui&&g.ui.fancytree){g.ui.fancytree.warn("Fancytree: ignored duplicate include");return;}function p(i,F){if(!i){F=F?": "+F:"";g.error("Fancytree assertion failed"+F);}}p(g.ui,"Fancytree requires jQuery UI (http://jqueryui.com)");function z(K,F){var G,I,H=o.console?o.console[K]:null;if(H){try{H.apply(o.console,F);}catch(J){I="";for(G=0;G<F.length;G++){I+=F[G];}H(I);}}}function e(i){return !!(i.tree&&i.statusNodeType!==l);}function q(K,J,I,G){var H,L,N,M=g.map(g.trim(K).split("."),function(i){return parseInt(i,10);}),F=g.map(Array.prototype.slice.call(arguments,1),function(i){return parseInt(i,10);});for(H=0;H<F.length;H++){L=M[H]||0;N=F[H]||0;if(L!==N){return(L>N);}}return true;}function y(F,i,I,J,H){var G=(function(){var K=i[F],N=J[F],O=i.ext[H],L=function(){return K.apply(i,arguments);},M=function(P){return K.apply(i,P);};return function(){var R=i._local,Q=i._super,P=i._superApply;try{i._local=O;i._super=L;i._superApply=M;return N.apply(i,arguments);}finally{i._local=R;i._super=Q;i._superApply=P;}};})();return G;}function h(i,H,I,G){for(var F in I){if(typeof I[F]==="function"){if(typeof i[F]==="function"){i[F]=y(F,i,H,I,G);}else{if(F.charAt(0)==="_"){i.ext[G][F]=y(F,i,H,I,G);}else{g.error("Could not override tree."+F+". Use prefix '_' to create tree."+G+"._"+F);}}}else{if(F!=="options"){i.ext[G][F]=I[F];}}}}function D(F,i){if(F===l){return g.Deferred(function(){this.resolve();}).promise();}else{return g.Deferred(function(){this.resolveWith(F,i);}).promise();}}function u(F,i){if(F===l){return g.Deferred(function(){this.reject();}).promise();}else{return g.Deferred(function(){this.rejectWith(F,i);}).promise();}}function x(i,F){return function(){i.resolveWith(F);};}function A(F){var G=g.extend({},F.data()),i=G.json;delete G.fancytree;if(i){delete G.json;G=g.extend(G,i);}return G;}function C(i){i=i.toLowerCase();return function(F){return F.title.toLowerCase().indexOf(i)>=0;};}function f(F){var i=new RegExp("^"+F,"i");return function(G){return i.test(G.title);};}var v,a=null,j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},d={16:true,17:true,18:true},c={8:"backspace",9:"tab",10:"return",13:"return",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},B={0:"",1:"left",2:"middle",3:"right"},E="active expanded focus folder hideCheckbox lazy selected unselectable".split(" "),k={},t="expanded extraClasses folder hideCheckbox key lazy refKey selected title tooltip unselectable".split(" "),n={},w={active:true,children:true,data:true,focus:true};for(v=0;v<E.length;v++){k[E[v]]=true;}for(v=0;v<t.length;v++){n[t[v]]=true;}function b(J,K){var I,G,H,F;this.parent=J;this.tree=J.tree;this.ul=null;this.li=null;this.statusNodeType=null;this._isLoading=false;this._error=null;this.data={};for(I=0,G=t.length;I<G;I++){H=t[I];this[H]=K[H];}if(K.data){g.extend(this.data,K.data);}for(H in K){if(!n[H]&&!g.isFunction(K[H])&&!w[H]){this.data[H]=K[H];}}if(this.key==null){if(this.tree.options.defaultKey){this.key=this.tree.options.defaultKey(this);p(this.key,"defaultKey() must return a unique key");}else{this.key="_"+(a._nextNodeKey++);}}else{this.key=""+this.key;}if(K.active){p(this.tree.activeNode===null,"only one active node allowed");this.tree.activeNode=this;}if(K.selected){this.tree.lastSelectedNode=this;}this.children=null;F=K.children;if(F&&F.length){this._setChildren(F);}this.tree._callHook("treeRegisterNode",this.tree,true,this);}b.prototype={_findDirectChild:function(I){var H,G,F=this.children;if(F){if(typeof I==="string"){for(H=0,G=F.length;H<G;H++){if(F[H].key===I){return F[H];}}}else{if(typeof I==="number"){return this.children[I];}else{if(I.parent===this){return I;}}}}return null;},_setChildren:function(H){p(H&&(!this.children||this.children.length===0),"only init supported");this.children=[];for(var G=0,F=H.length;G<F;G++){this.children.push(new b(this,H[G]));}},addChildren:function(J,H){var I,F,L,K=null,G=[];if(g.isPlainObject(J)){J=[J];}if(!this.children){this.children=[];}for(I=0,F=J.length;I<F;I++){G.push(new b(this,J[I]));}K=G[0];if(H==null){this.children=this.children.concat(G);}else{H=this._findDirectChild(H);L=g.inArray(H,this.children);p(L>=0,"insertBefore must be an existing child");this.children.splice.apply(this.children,[L,0].concat(G));}if(!this.parent||this.parent.ul||this.tr){this.render();}if(this.tree.options.selectMode===3){this.fixSelection3FromEndNodes();}return K;},addNode:function(F,G){if(G===l||G==="over"){G="child";}switch(G){case"after":return this.getParent().addChildren(F,this.getNextSibling());case"before":return this.getParent().addChildren(F,this);case"firstChild":var i=(this.children?this.children[0]:null);return this.addChildren(F,i);case"child":case"over":return this.addChildren(F);}p(false,"Invalid mode: "+G);},appendSibling:function(i){return this.addNode(i,"after");},applyPatch:function(I){if(I===null){this.remove();return D(this);}var F,H,i,G={children:true,expanded:true,parent:true};for(F in I){i=I[F];if(!G[F]&&!g.isFunction(i)){if(n[F]){this[F]=i;}else{this.data[F]=i;}}}if(I.hasOwnProperty("children")){this.removeChildren();if(I.children){this._setChildren(I.children);}}if(this.isVisible()){this.renderTitle();this.renderStatus();}if(I.hasOwnProperty("expanded")){H=this.setExpanded(I.expanded);}else{H=D(this);}return H;},collapseSiblings:function(){return this.tree._callHook("nodeCollapseSiblings",this);},copyTo:function(i,G,F){return i.addNode(this.toDict(true,F),G);},countChildren:function(H){var G=this.children,I,F,J;if(!G){return 0;}J=G.length;if(H!==false){for(I=0,F=J;I<F;I++){J+=G[I].countChildren();}}return J;},debug:function(i){if(this.tree.options.debugLevel>=2){Array.prototype.unshift.call(arguments,this.toString());z("log",arguments);}},discard:function(){this.warn("FancytreeNode.discard() is deprecated since 2014-02-16. Use .resetLazy() instead.");return this.resetLazy();},findAll:function(i){i=g.isFunction(i)?i:C(i);var F=[];this.visit(function(G){if(i(G)){F.push(G);}});return F;},findFirst:function(i){i=g.isFunction(i)?i:C(i);var F=null;this.visit(function(G){if(i(G)){F=G;return false;}});return F;},_changeSelectStatusAttrs:function(i){var F=false;switch(i){case false:F=(this.selected||this.partsel);this.selected=false;this.partsel=false;break;case true:F=(!this.selected||!this.partsel);this.selected=true;this.partsel=true;break;case l:F=(this.selected||!this.partsel);this.selected=false;this.partsel=true;break;default:p(false,"invalid state: "+i);}if(F){this.renderStatus();}return F;},fixSelection3AfterClick:function(){var i=this.isSelected();this.visit(function(F){F._changeSelectStatusAttrs(i);});this.fixSelection3FromEndNodes();},fixSelection3FromEndNodes:function(){p(this.tree.options.selectMode===3,"expected selectMode 3");function i(I){var L,J,H,N,F,M,K,G=I.children;if(G&&G.length){M=true;K=false;for(L=0,J=G.length;L<J;L++){H=G[L];N=i(H);if(N!==false){K=true;}if(N!==true){M=false;}}F=M?true:(K?l:false);}else{F=!!I.selected;}I._changeSelectStatusAttrs(F);return F;}i(this);this.visitParents(function(K){var J,G,M,L,I=K.children,H=true,F=false;for(J=0,G=I.length;J<G;J++){M=I[J];if(M.selected||M.partsel){F=true;}if(!M.unselectable&&!M.selected){H=false;}}L=H?true:(F?l:false);K._changeSelectStatusAttrs(L);});},fromDict:function(F){for(var i in F){if(n[i]){this[i]=F[i];}else{if(i==="data"){g.extend(this.data,F.data);}else{if(!g.isFunction(F[i])&&!w[i]){this.data[i]=F[i];}}}}if(F.children){this.removeChildren();this.addChildren(F.children);}this.renderTitle();},getChildren:function(){if(this.hasChildren()===l){return l;}return this.children;},getFirstChild:function(){return this.children?this.children[0]:null;},getIndex:function(){return g.inArray(this,this.parent.children);},getIndexHier:function(F){F=F||".";var i=[];g.each(this.getParentList(false,true),function(G,H){i.push(H.getIndex()+1);});return i.join(F);},getKeyPath:function(G){var F=[],i=this.tree.options.keyPathSeparator;this.visitParents(function(H){if(H.parent){F.unshift(H.key);}},!G);return i+F.join(i);},getLastChild:function(){return this.children?this.children[this.children.length-1]:null;},getLevel:function(){var F=0,i=this.parent;while(i){F++;i=i.parent;}return F;},getNextSibling:function(){if(this.parent){var G,F,H=this.parent.children;for(G=0,F=H.length-1;G<F;G++){if(H[G]===this){return H[G+1];}}}return null;},getParent:function(){return this.parent;},getParentList:function(F,G){var i=[],H=G?this:this.parent;while(H){if(F||H.parent){i.unshift(H);}H=H.parent;}return i;},getPrevSibling:function(){if(this.parent){var G,F,H=this.parent.children;for(G=1,F=H.length;G<F;G++){if(H[G]===this){return H[G-1];}}}return null;},hasChildren:function(){if(this.lazy){if(this.children==null){return l;}else{if(this.children.length===0){return false;}else{if(this.children.length===1&&this.children[0].isStatusNode()){return l;}}}return true;}return !!(this.children&&this.children.length);},hasFocus:function(){return(this.tree.hasFocus()&&this.tree.focusNode===this);},info:function(i){if(this.tree.options.debugLevel>=1){Array.prototype.unshift.call(arguments,this.toString());z("info",arguments);}},isActive:function(){return(this.tree.activeNode===this);},isChildOf:function(i){return(this.parent&&this.parent===i);},isDescendantOf:function(i){if(!i||i.tree!==this.tree){return false;}var F=this.parent;while(F){if(F===i){return true;}F=F.parent;}return false;},isExpanded:function(){return !!this.expanded;},isFirstSibling:function(){var i=this.parent;return !i||i.children[0]===this;},isFolder:function(){return !!this.folder;},isLastSibling:function(){var i=this.parent;return !i||i.children[i.children.length-1]===this;},isLazy:function(){return !!this.lazy;},isLoaded:function(){return !this.lazy||this.hasChildren()!==l;},isLoading:function(){return !!this._isLoading;},isRoot:function(){return this.isRootNode();},isRootNode:function(){return(this.tree.rootNode===this);},isSelected:function(){return !!this.selected;},isStatusNode:function(){return !!this.statusNodeType;},isTopLevel:function(){return(this.tree.rootNode===this.parent);},isUndefined:function(){return this.hasChildren()===l;},isVisible:function(){var H,F,G=this.getParentList(false,false);for(H=0,F=G.length;H<F;H++){if(!G[H].expanded){return false;}}return true;},lazyLoad:function(i){this.warn("FancytreeNode.lazyLoad() is deprecated since 2014-02-16. Use .load() instead.");return this.load(i);},load:function(H){var i,G,F=this;p(this.isLazy(),"load() requires a lazy node");if(!H&&!this.isUndefined()){return D(this);}if(this.isLoaded()){this.resetLazy();}G=this.tree._triggerNodeEvent("lazyLoad",this);if(G===false){return D(this);}p(typeof G!=="boolean","lazyLoad event must return source in data.result");i=this.tree._callHook("nodeLoadChildren",this,G);if(this.expanded){i.always(function(){F.render();});}return i;},makeVisible:function(F){var H,I=this,N=[],M=new g.Deferred(),L=this.getParentList(false,false),J=L.length,G=!(F&&F.noAnimation===true),K=!(F&&F.scrollIntoView===false);for(H=J-1;H>=0;H--){N.push(L[H].setExpanded(true,F));}g.when.apply(g,N).done(function(){if(K){I.scrollIntoView(G).done(function(){M.resolve();});}else{M.resolve();}});return M.promise();},moveTo:function(H,I,G){if(I===l||I==="over"){I="child";}var J,i=this.parent,F=(I==="child")?H:H.parent;if(this===H){return;}else{if(!this.parent){throw"Cannot move system root";}else{if(F.isDescendantOf(this)){throw"Cannot move a node to its own descendant";}}}if(this.parent.children.length===1){if(this.parent===F){return;}this.parent.children=this.parent.lazy?[]:null;this.parent.expanded=false;}else{J=g.inArray(this,this.parent.children);p(J>=0);this.parent.children.splice(J,1);}this.parent=F;if(F.hasChildren()){switch(I){case"child":F.children.push(this);break;case"before":J=g.inArray(H,F.children);p(J>=0);F.children.splice(J,0,this);break;case"after":J=g.inArray(H,F.children);p(J>=0);F.children.splice(J+1,0,this);break;default:throw"Invalid mode "+I;}}else{F.children=[this];}if(G){H.visit(G,true);}if(this.tree!==H.tree){this.warn("Cross-tree moveTo is experimantal!");this.visit(function(K){K.tree=H.tree;},true);}if(!i.isDescendantOf(F)){i.render();}if(!F.isDescendantOf(i)&&F!==i){F.render();}},navigate:function(I,L){var J,H,M=true,K=g.ui.keyCode,G=null;function F(N){if(N){try{N.makeVisible();}catch(i){}if(!g(N.span).is(":visible")){N.debug("Navigate: skipping hidden node");N.navigate(I,L);return;}return L===false?N.setFocus():N.setActive();}}switch(I){case K.BACKSPACE:if(this.parent&&this.parent.parent){F(this.parent);}break;case K.LEFT:if(this.expanded){this.setExpanded(false);F(this);}else{if(this.parent&&this.parent.parent){F(this.parent);}}break;case K.RIGHT:if(!this.expanded&&(this.children||this.lazy)){this.setExpanded();F(this);}else{if(this.children&&this.children.length){F(this.children[0]);}}break;case K.UP:G=this.getPrevSibling();while(G&&!g(G.span).is(":visible")){G=G.getPrevSibling();}while(G&&G.expanded&&G.children&&G.children.length){G=G.children[G.children.length-1];}if(!G&&this.parent&&this.parent.parent){G=this.parent;}F(G);break;case K.DOWN:if(this.expanded&&this.children&&this.children.length){G=this.children[0];}else{H=this.getParentList(false,true);for(J=H.length-1;J>=0;J--){G=H[J].getNextSibling();while(G&&!g(G.span).is(":visible")){G=G.getNextSibling();}if(G){break;}}}F(G);break;default:M=false;}},remove:function(){return this.parent.removeChild(this);},removeChild:function(i){return this.tree._callHook("nodeRemoveChild",this,i);},removeChildren:function(){return this.tree._callHook("nodeRemoveChildren",this);},render:function(F,i){return this.tree._callHook("nodeRender",this,F,i);},renderTitle:function(){return this.tree._callHook("nodeRenderTitle",this);},renderStatus:function(){return this.tree._callHook("nodeRenderStatus",this);},resetLazy:function(){this.removeChildren();this.expanded=false;this.lazy=true;this.children=l;this.renderStatus();},scheduleAction:function(G,F){if(this.tree.timer){clearTimeout(this.tree.timer);}this.tree.timer=null;var i=this;switch(G){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){i.tree.debug("setTimeout: trigger expand");i.setExpanded(true);},F);break;case"activate":this.tree.timer=setTimeout(function(){i.tree.debug("setTimeout: trigger activate");i.setActive(true);},F);break;default:throw"Invalid mode "+G;}},scrollIntoView:function(T,G){if(G!==l&&e(G)){this.warn("scrollIntoView() with 'topNode' option is deprecated since 2014-05-08. Use 'options.topNode' instead.");G={topNode:G};}var W,H,I,N,O=g.extend({effects:(T===true)?{duration:200,queue:false}:T,scrollOfs:this.tree.options.scrollOfs,scrollParent:this.tree.options.scrollParent||this.tree.$container,topNode:null},G),U=new g.Deferred(),K=this,J=g(this.span).height(),S=g(O.scrollParent),L=O.scrollOfs.top||0,M=O.scrollOfs.bottom||0,P=S.height(),i=S.scrollTop(),V=S,Q=S[0]===o,F=O.topNode||null,R=null;if(!g(this.span).is(":visible")){this.warn("scrollIntoView(): node is invisible.");return D();}if(Q){H=g(this.span).offset().top;W=(F&&F.span)?g(F.span).offset().top:0;V=g("html,body");}else{p(S[0]!==r&&S[0]!==r.body,"scrollParent should be an simple element or `window`, not document or body.");N=S.offset().top,H=g(this.span).offset().top-N+i;W=F?g(F.span).offset().top-N+i:0;I=Math.max(0,(S.innerHeight()-S[0].clientHeight));P-=I;}if(H<(i+L)){R=H-L;}else{if((H+J)>(i+P-M)){R=H+J-P+M;if(F){p(F.isRoot()||g(F.span).is(":visible"),"topNode must be visible");if(W<R){R=W-L;}}}}if(R!==null){if(O.effects){O.effects.complete=function(){U.resolveWith(K);};V.stop(true).animate({scrollTop:R},O.effects);}else{V[0].scrollTop=R;U.resolveWith(this);}}else{U.resolveWith(this);}return U.promise();},setActive:function(i,F){return this.tree._callHook("nodeSetActive",this,i,F);},setExpanded:function(i,F){return this.tree._callHook("nodeSetExpanded",this,i,F);},setFocus:function(i){return this.tree._callHook("nodeSetFocus",this,i);},setSelected:function(i){return this.tree._callHook("nodeSetSelected",this,i);},setStatus:function(i,G,F){return this.tree._callHook("nodeSetStatus",this,i,G,F);},setTitle:function(i){this.title=i;this.renderTitle();},sortChildren:function(J,H){var I,G,F=this.children;if(!F){return;}J=J||function(L,K){var i=L.title.toLowerCase(),M=K.title.toLowerCase();return i===M?0:i>M?1:-1;};F.sort(J);if(H){for(I=0,G=F.length;I<G;I++){if(F[I].children){F[I].sortChildren(J,"$norender$");}}}if(H!=="$norender$"){this.render();}},toDict:function(H,L){var I,F,J,K={},G=this;g.each(t,function(N,M){if(G[M]||G[M]===false){K[M]=G[M];}});if(!g.isEmptyObject(this.data)){K.data=g.extend({},this.data);if(g.isEmptyObject(K.data)){delete K.data;}}if(L){L(K);}if(H){if(this.hasChildren()){K.children=[];for(I=0,F=this.children.length;I<F;I++){J=this.children[I];if(!J.isStatusNode()){K.children.push(J.toDict(true,L));}}}else{}}return K;},toggleExpanded:function(){return this.tree._callHook("nodeToggleExpanded",this);},toggleSelected:function(){return this.tree._callHook("nodeToggleSelected",this);},toString:function(){return"<FancytreeNode(#"+this.key+", '"+this.title+"')>";},visit:function(K,G){var J,F,I=true,H=this.children;if(G===true){I=K(this);if(I===false||I==="skip"){return I;}}if(H){for(J=0,F=H.length;J<F;J++){I=H[J].visit(K,true);if(I===false){break;}}}return I;},visitAndLoad:function(J,H,G){var F,I,i,K=this;if(J&&H===true){I=J(K);if(I===false||I==="skip"){return G?I:D();}}if(!K.children&&!K.lazy){return D();}F=new g.Deferred();i=[];K.load().done(function(){for(var M=0,L=K.children.length;M<L;M++){I=K.children[M].visitAndLoad(J,true,true);if(I===false){F.reject();break;}else{if(I!=="skip"){i.push(I);}}}g.when.apply(this,i).then(function(){F.resolve();});});return F.promise();},visitParents:function(F,i){if(i&&F(this)===false){return false;}var G=this.parent;while(G){if(F(G)===false){return false;}G=G.parent;}return true;},warn:function(i){Array.prototype.unshift.call(arguments,this.toString());z("warn",arguments);}};function m(G){this.widget=G;this.$div=G.element;this.options=G.options;if(this.options){if(g.isFunction(this.options.lazyload)&&!g.isFunction(this.options.lazyLoad)){this.options.lazyLoad=function(){a.warn("The 'lazyload' event is deprecated since 2014-02-25. Use 'lazyLoad' (with uppercase L) instead.");return G.options.lazyload.apply(this,arguments);};}if(g.isFunction(this.options.loaderror)){g.error("The 'loaderror' event was renamed since 2014-07-03. Use 'loadError' (with uppercase E) instead.");}if(this.options.fx!==l){a.warn("The 'fx' options was replaced by 'toggleEffect' since 2014-11-30.");}}this.ext={};this.data=A(this.$div);this._id=g.ui.fancytree._nextId++;this._ns=".fancytree-"+this._id;this.activeNode=null;this.focusNode=null;this._hasFocus=null;this.lastSelectedNode=null;this.systemFocusElement=null;this.lastQuicksearchTerm="";this.lastQuicksearchTime=0;this.statusClassPropName="span";this.ariaPropName="li";this.nodeContainerAttrName="li";this.$div.find(">ul.fancytree-container").remove();var i={tree:this},F;this.rootNode=new b(i,{title:"root",key:"root_"+this._id,children:null,expanded:true});this.rootNode.parent=null;F=g("<ul>",{"class":"ui-fancytree fancytree-container"}).appendTo(this.$div);this.$container=F;this.rootNode.ul=F[0];if(this.options.debugLevel==null){this.options.debugLevel=a.debugLevel;}this.$container.attr("tabindex",this.options.tabbable?"0":"-1");if(this.options.aria){this.$container.attr("role","tree").attr("aria-multiselectable",true);}}m.prototype={_makeHookContext:function(I,G,F){var H,i;if(I.node!==l){if(G&&I.originalEvent!==G){g.error("invalid args");}H=I;}else{if(I.tree){i=I.tree;H={node:I,tree:i,widget:i.widget,options:i.widget.options,originalEvent:G};}else{if(I.widget){H={node:null,tree:I,widget:I.widget,options:I.widget.options,originalEvent:G};}else{g.error("invalid args");}}}if(F){g.extend(H,F);}return H;},_callHook:function(J,I,G){var i=this._makeHookContext(I),H=this[J],F=Array.prototype.slice.call(arguments,2);if(!g.isFunction(H)){g.error("_callHook('"+J+"') is not a function");}F.unshift(i);return H.apply(this,F);},_requireExtension:function(i,J,K,M){K=!!K;var F=this._local.name,H=this.options.extensions,G=g.inArray(i,H)<g.inArray(F,H),L=J&&this.ext[i]==null,I=!L&&K!=null&&(K!==G);p(F&&F!==i);if(L||I){if(!M){if(L||J){M="'"+F+"' extension requires '"+i+"'";if(I){M+=" to be registered "+(K?"before":"after")+" itself";}}else{M="If used together, `"+i+"` must be registered "+(K?"before":"after")+" `"+F+"`";}}g.error(M);return false;}return true;},activateKey:function(i){var F=this.getNodeByKey(i);if(F){F.setActive();}else{if(this.activeNode){this.activeNode.setActive(false);}}return F;},applyPatch:function(G){var N,K,L,M,H,I,F=G.length,J=[];for(K=0;K<F;K++){L=G[K];p(L.length===2,"patchList must be an array of length-2-arrays");M=L[0];H=L[1];I=(M===null)?this.rootNode:this.getNodeByKey(M);if(I){N=new g.Deferred();J.push(N);I.applyPatch(H).always(x(N,I));}else{this.warn("could not find node with key '"+M+"'");}}return g.when.apply(g,J).promise();},count:function(){return this.rootNode.countChildren();},debug:function(i){if(this.options.debugLevel>=2){Array.prototype.unshift.call(arguments,this.toString());z("log",arguments);}},findNextNode:function(H,G,J){var F=null,i=G.parent.children,K=null,I=function(Q,M,P){var O,S,N=Q.children,L=N.length,R=N[M];if(R&&P(R)===false){return false;}if(R&&R.children&&R.expanded){if(I(R,0,P)===false){return false;}}for(O=M+1;O<L;O++){if(I(Q,O,P)===false){return false;}}S=Q.parent;if(S){return I(S,S.children.indexOf(Q)+1,P);}else{return I(Q,0,P);}};H=(typeof H==="string")?f(H):H;G=G||this.getFirstChild();I(G.parent,i.indexOf(G),function(L){if(L===F){return false;}F=F||L;if(!g(L.span).is(":visible")){L.debug("quicksearch: skipping hidden node");return;}if(H(L)){K=L;if(K!==G){return false;}}});return K;},generateFormElements:function(H,J){var F,G=(H!==false)?"ft_"+this._id+"[]":H,I=(J!==false)?"ft_"+this._id+"_active":J,K="fancytree_result_"+this._id,i=g("#"+K);if(i.length){i.empty();}else{i=g("<div>",{id:K}).hide().insertAfter(this.$container);}if(G){F=this.getSelectedNodes(this.options.selectMode===3);g.each(F,function(L,M){i.append(g("<input>",{type:"checkbox",name:G,value:M.key,checked:true}));});}if(I&&this.activeNode){i.append(g("<input>",{type:"radio",name:I,value:this.activeNode.key,checked:true}));}},getActiveNode:function(){return this.activeNode;},getFirstChild:function(){return this.rootNode.getFirstChild();},getFocusNode:function(){return this.focusNode;},getNodeByKey:function(F,H){var G,i;if(!H){G=r.getElementById(this.options.idPrefix+F);if(G){return G.ftnode?G.ftnode:null;}}H=H||this.rootNode;i=null;H.visit(function(I){if(I.key===F){i=I;return false;}},true);return i;},getRootNode:function(){return this.rootNode;},getSelectedNodes:function(i){var F=[];this.rootNode.visit(function(G){if(G.selected){F.push(G);if(i===true){return"skip";}}});return F;},hasFocus:function(){return !!this._hasFocus;},info:function(i){if(this.options.debugLevel>=1){Array.prototype.unshift.call(arguments,this.toString());z("info",arguments);}},loadKeyPath:function(M,P,I){var K,Q,L,T,O,J,H,N,G,S=this.options.keyPathSeparator,R=this;if(!g.isArray(M)){M=[M];}J={};for(L=0;L<M.length;L++){N=I||this.rootNode;T=M[L];if(T.charAt(0)===S){T=T.substr(1);}G=T.split(S);while(G.length){O=G.shift();H=N._findDirectChild(O);if(!H){this.warn("loadKeyPath: key not found: "+O+" (parent: "+N+")");P.call(this,O,"error");break;}else{if(G.length===0){P.call(this,H,"ok");break;}else{if(!H.lazy||(H.hasChildren()!==l)){P.call(this,H,"loaded");N=H;}else{P.call(this,H,"loaded");if(J[O]){J[O].push(G.join(S));}else{J[O]=[G.join(S)];}break;}}}}}K=[];function F(U,V,i){P.call(R,V,"loading");V.load().done(function(){R.loadKeyPath.call(R,J[U],P,V).always(x(i,R));}).fail(function(W){R.warn("loadKeyPath: error loading: "+U+" (parent: "+N+")");P.call(R,V,"error");i.reject();});}for(O in J){H=N._findDirectChild(O);Q=new g.Deferred();K.push(Q);F(O,H,Q);}return g.when.apply(g,K).promise();},reactivate:function(i){var F,G=this.activeNode;if(!G){return D();}this.activeNode=null;F=G.setActive();if(i){G.setFocus();}return F;},reload:function(i){this._callHook("treeClear",this);return this._callHook("treeLoad",this,i);},render:function(F,i){return this.rootNode.render(F,i);},setFocus:function(i){return this._callHook("treeSetFocus",this,i);},toDict:function(i,G){var F=this.rootNode.toDict(true,G);return i?F:F.children;},toString:function(){return"<Fancytree(#"+this._id+")>";},_triggerNodeEvent:function(I,J,F,i){var G=this._makeHookContext(J,F,i),H=this.widget._trigger(I,F,G);if(H!==false&&G.result!==l){return G.result;}return H;},_triggerTreeEvent:function(I,F,i){var G=this._makeHookContext(this,F,i),H=this.widget._trigger(I,F,G);if(H!==false&&G.result!==l){return G.result;}return H;},visit:function(i){return this.rootNode.visit(i,false);},warn:function(i){Array.prototype.unshift.call(arguments,this.toString());z("warn",arguments);}};g.extend(m.prototype,{nodeClick:function(i){var G,F,I=i.targetType,H=i.node;if(I==="expander"){this._callHook("nodeToggleExpanded",i);}else{if(I==="checkbox"){this._callHook("nodeToggleSelected",i);if(i.options.focusOnSelect){this._callHook("nodeSetFocus",i,true);}}else{F=false;G=true;if(H.folder){switch(i.options.clickFolderMode){case 2:F=true;G=false;break;case 3:G=true;F=true;break;}}if(G){this.nodeSetFocus(i);this._callHook("nodeSetActive",i,true);}if(F){if(!G){}this._callHook("nodeToggleExpanded",i);}}}},nodeCollapseSiblings:function(H,F){var K,I,G,J=H.node;if(J.parent){K=J.parent.children;for(I=0,G=K.length;I<G;I++){if(K[I]!==J&&K[I].expanded){this._callHook("nodeSetExpanded",K[I],false,F);}}}},nodeDblclick:function(i){if(i.targetType==="title"&&i.options.clickFolderMode===4){this._callHook("nodeToggleExpanded",i);}if(i.targetType==="title"){i.originalEvent.preventDefault();}},nodeKeydown:function(Q){var O,F,P,G=Q.originalEvent,I=Q.node,R=Q.tree,i=Q.options,K=G.which,N=String.fromCharCode(K),M=!(G.altKey||G.ctrlKey||G.metaKey||G.shiftKey),H=g(G.target),L=true,J=!(G.ctrlKey||!i.autoActivate);if(!I){(this.getActiveNode()||this.getFirstChild()).setFocus();I=Q.node=this.focusNode;I.debug("Keydown force focus on active node");}if(i.quicksearch&&M&&/\w/.test(N)&&!H.is(":input:enabled")){F=new Date().getTime();if(F-R.lastQuicksearchTime>500){R.lastQuicksearchTerm="";}R.lastQuicksearchTime=F;R.lastQuicksearchTerm+=N;O=R.findNextNode(R.lastQuicksearchTerm,R.getActiveNode());if(O){O.setActive();}G.preventDefault();return;}switch(a.eventToString(G)){case"+":case"=":R.nodeSetExpanded(Q,true);break;case"-":R.nodeSetExpanded(Q,false);break;case"space":if(i.checkbox){R.nodeToggleSelected(Q);}else{R.nodeSetActive(Q,true);}break;case"enter":R.nodeSetActive(Q,true);break;case"backspace":case"left":case"right":case"up":case"down":P=I.navigate(G.which,J);break;default:L=false;}if(L){G.preventDefault();}},nodeLoadChildren:function(G,K){var J,H,F,i=G.tree,I=G.node;if(g.isFunction(K)){K=K();}if(K.url){J=g.extend({},G.options.ajax,K);if(J.debugDelay){H=J.debugDelay;if(g.isArray(H)){H=H[0]+Math.random()*(H[1]-H[0]);}I.debug("nodeLoadChildren waiting debug delay "+Math.round(H)+"ms");J.debugDelay=false;F=g.Deferred(function(L){setTimeout(function(){g.ajax(J).done(function(){L.resolveWith(this,arguments);}).fail(function(){L.rejectWith(this,arguments);});},H);});}else{F=g.ajax(J);}K=new g.Deferred();F.done(function(O,P,N){var M,L;if(typeof O==="string"){g.error("Ajax request returned a string (did you get the JSON dataType wrong?).");}if(G.options.postProcess){L=i._triggerNodeEvent("postProcess",G,G.originalEvent,{response:O,error:null,dataType:this.dataType});if(L.error){M=g.isPlainObject(L.error)?L.error:{message:L.error};M=i._makeHookContext(I,null,M);K.rejectWith(this,[M]);return;}O=g.isArray(L)?L:O;}else{if(O&&O.hasOwnProperty("d")&&G.options.enableAspx){O=(typeof O.d==="string")?g.parseJSON(O.d):O.d;}}K.resolveWith(this,[O]);}).fail(function(M,O,N){var L=i._makeHookContext(I,null,{error:M,args:Array.prototype.slice.call(arguments),message:N,details:M.status+": "+N});K.rejectWith(this,[L]);});}if(g.isFunction(K.then)&&g.isFunction(K["catch"])){F=K;K=new g.Deferred();F.then(function(L){K.resolve(L);},function(L){K.reject(L);});}if(g.isFunction(K.promise)){p(!I.isLoading());i.nodeSetStatus(G,"loading");K.done(function(L){i.nodeSetStatus(G,"ok");}).fail(function(L){var M;if(L.node&&L.error&&L.message){M=L;}else{M=i._makeHookContext(I,null,{error:L,args:Array.prototype.slice.call(arguments),message:L?(L.message||L.toString()):""});}if(i._triggerNodeEvent("loadError",M,null)!==false){i.nodeSetStatus(G,"error",M.message,M.details);}});}return g.when(K).done(function(M){var L;if(g.isPlainObject(M)){p(g.isArray(M.children),"source must contain (or be) an array of children");p(I.isRoot(),"source may only be an object for root nodes");L=M;M=M.children;delete L.children;g.extend(i.data,L);}p(g.isArray(M),"expected array of children");I._setChildren(M);i._triggerNodeEvent("loadChildren",I);});},nodeLoadKeyPath:function(i,F){},nodeRemoveChild:function(F,H){var i,K=F.node,J=F.options,I=g.extend({},F,{node:H}),G=K.children;if(G.length===1){p(H===G[0]);return this.nodeRemoveChildren(F);}if(this.activeNode&&(H===this.activeNode||this.activeNode.isDescendantOf(H))){this.activeNode.setActive(false);}if(this.focusNode&&(H===this.focusNode||this.focusNode.isDescendantOf(H))){this.focusNode=null;}this.nodeRemoveMarkup(I);this.nodeRemoveChildren(I);i=g.inArray(H,G);p(i>=0);H.visit(function(L){L.parent=null;},true);this._callHook("treeRegisterNode",this,false,H);if(J.removeNode){J.removeNode.call(F.tree,{type:"removeNode"},I);}G.splice(i,1);},nodeRemoveChildMarkup:function(i){var F=i.node;if(F.ul){if(F.isRoot()){g(F.ul).empty();}else{g(F.ul).remove();F.ul=null;}F.visit(function(G){G.li=G.ul=null;});}},nodeRemoveChildren:function(F){var J,i=F.tree,I=F.node,G=I.children,H=F.options;if(!G){return;}if(this.activeNode&&this.activeNode.isDescendantOf(I)){this.activeNode.setActive(false);}if(this.focusNode&&this.focusNode.isDescendantOf(I)){this.focusNode=null;}this.nodeRemoveChildMarkup(F);J=g.extend({},F);I.visit(function(K){K.parent=null;i._callHook("treeRegisterNode",i,false,K);if(H.removeNode){J.node=K;H.removeNode.call(F.tree,{type:"removeNode"},J);}});if(I.lazy){I.children=[];}else{I.children=null;}this.nodeRenderStatus(F);},nodeRemoveMarkup:function(i){var F=i.node;if(F.li){g(F.li).remove();F.li=null;}this.nodeRemoveChildMarkup(i);},nodeRender:function(U,F,W,J,H){var K,O,N,X,V,R,Y,T=U.node,Q=U.tree,P=U.options,G=P.aria,L=false,M=T.parent,S=!M,I=T.children;if(!S&&!M.ul){return;}p(S||M.ul,"parent UL must exist");if(!S){if(T.li&&(F||(T.li.parentNode!==T.parent.ul))){if(T.li.parentNode!==T.parent.ul){this.debug("Unlinking "+T+" (must be child of "+T.parent+")");}this.nodeRemoveMarkup(U);}if(!T.li){L=true;T.li=r.createElement("li");T.li.ftnode=T;if(G){}if(T.key&&P.generateIds){T.li.id=P.idPrefix+T.key;}T.span=r.createElement("span");T.span.className="fancytree-node";if(G){g(T.span).attr("aria-labelledby","ftal_"+T.key);}T.li.appendChild(T.span);this.nodeRenderTitle(U);if(P.createNode){P.createNode.call(Q,{type:"createNode"},U);}}else{this.nodeRenderStatus(U);}if(P.renderNode){P.renderNode.call(Q,{type:"renderNode"},U);}}if(I){if(S||T.expanded||W===true){if(!T.ul){T.ul=r.createElement("ul");if((J===true&&!H)||!T.expanded){T.ul.style.display="none";}if(G){g(T.ul).attr("role","group");}if(T.li){T.li.appendChild(T.ul);}else{T.tree.$div.append(T.ul);}}for(X=0,V=I.length;X<V;X++){Y=g.extend({},U,{node:I[X]});this.nodeRender(Y,F,W,false,true);}K=T.ul.firstChild;while(K){N=K.ftnode;if(N&&N.parent!==T){T.debug("_fixParent: remove missing "+N,K);R=K.nextSibling;K.parentNode.removeChild(K);K=R;}else{K=K.nextSibling;}}K=T.ul.firstChild;for(X=0,V=I.length-1;X<V;X++){O=I[X];N=K.ftnode;if(O!==N){T.ul.insertBefore(O.li,N.li);}else{K=K.nextSibling;}}}}else{if(T.ul){this.warn("remove child markup for "+T);this.nodeRemoveChildMarkup(U);}}if(!S){if(L){M.ul.appendChild(T.li);}}},nodeRenderTitle:function(P,O){var G,M,L,K,J,S,H=P.node,R=P.tree,i=P.options,N=i.aria,F=H.getLevel(),I=[],Q=H.data.icon;if(O!==l){H.title=O;}if(!H.span){return;}if(F<i.minExpandLevel){if(!H.lazy){H.expanded=true;}if(F>1){if(N){I.push("<span role='button' class='fancytree-expander fancytree-expander-fixed'></span>");}else{I.push("<span class='fancytree-expander fancytree-expander-fixed''></span>");}}}else{if(N){I.push("<span role='button' class='fancytree-expander'></span>");}else{I.push("<span class='fancytree-expander'></span>");}}if(i.checkbox&&H.hideCheckbox!==true&&!H.isStatusNode()){if(N){I.push("<span role='checkbox' class='fancytree-checkbox'></span>");}else{I.push("<span class='fancytree-checkbox'></span>");}}K=N?" role='img'":"";if(Q===true||(Q!==false&&i.icons!==false)){if(Q&&typeof Q==="string"){Q=(Q.charAt(0)==="/")?Q:((i.imagePath||"")+Q);I.push("<img src='"+Q+"' class='fancytree-icon' alt='' />");}else{M=(i.iconClass&&i.iconClass.call(R,H,P))||H.data.iconclass||null;if(M){I.push("<span "+K+" class='fancytree-custom-icon "+M+"'></span>");}else{I.push("<span "+K+" class='fancytree-icon'></span>");}}}L="";if(i.renderTitle){L=i.renderTitle.call(R,{type:"renderTitle"},P)||"";}if(!L){S=H.tooltip?" title='"+a.escapeHtml(H.tooltip)+"'":"";G=N?" id='ftal_"+H.key+"'":"";K=N?" role='treeitem'":"";J=i.titlesTabbable?" tabindex='0'":"";L="<span "+K+" class='fancytree-title'"+G+S+J+">"+H.title+"</span>";}I.push(L);H.span.innerHTML=I.join("");this.nodeRenderStatus(P);},nodeRenderStatus:function(N){var F=N.node,O=N.tree,i=N.options,H=F.hasChildren(),J=F.isLastSibling(),K=i.aria,G=g(F.span).find(".fancytree-title"),M=i._classNames,L=[],I=F[O.statusClassPropName];if(!I){return;}L.push(M.node);if(O.activeNode===F){L.push(M.active);}if(O.focusNode===F){L.push(M.focused);if(K){G.attr("aria-activedescendant",true);}}else{if(K){G.removeAttr("aria-activedescendant");}}if(F.expanded){L.push(M.expanded);if(K){G.attr("aria-expanded",true);}}else{if(K){G.removeAttr("aria-expanded");}}if(F.folder){L.push(M.folder);}if(H!==false){L.push(M.hasChildren);}if(J){L.push(M.lastsib);}if(F.lazy&&F.children==null){L.push(M.lazy);}if(F.partsel){L.push(M.partsel);}if(F.unselectable){L.push(M.unselectable);}if(F._isLoading){L.push(M.loading);}if(F._error){L.push(M.error);}if(F.selected){L.push(M.selected);if(K){G.attr("aria-selected",true);}}else{if(K){G.attr("aria-selected",false);}}if(F.extraClasses){L.push(F.extraClasses);}if(H===false){L.push(M.combinedExpanderPrefix+"n"+(J?"l":""));}else{L.push(M.combinedExpanderPrefix+(F.expanded?"e":"c")+(F.lazy&&F.children==null?"d":"")+(J?"l":""));}L.push(M.combinedIconPrefix+(F.expanded?"e":"c")+(F.folder?"f":""));I.className=L.join(" ");if(F.li){F.li.className=J?M.lastsib:"";}},nodeSetActive:function(M,I,K){K=K||{};var H,F=M.node,N=M.tree,i=M.options,J=(K.noEvents===true),G=(K.noFocus===true),L=(F===N.activeNode);I=(I!==false);if(L===I){return D(F);}else{if(I&&!J&&this._triggerNodeEvent("beforeActivate",F,M.originalEvent)===false){return u(F,["rejected"]);}}if(I){if(N.activeNode){p(N.activeNode!==F,"node was active (inconsistency)");H=g.extend({},M,{node:N.activeNode});N.nodeSetActive(H,false);p(N.activeNode===null,"deactivate was out of sync?");}if(i.activeVisible){F.makeVisible({scrollIntoView:false});}N.activeNode=F;N.nodeRenderStatus(M);if(!G){N.nodeSetFocus(M);}if(!J){N._triggerNodeEvent("activate",F,M.originalEvent);}}else{p(N.activeNode===F,"node was not active (inconsistency)");N.activeNode=null;this.nodeRenderStatus(M);if(!J){M.tree._triggerNodeEvent("deactivate",F,M.originalEvent);}}},nodeSetExpanded:function(R,M,P){P=P||{};var O,Q,K,I,N,G,H=R.node,S=R.tree,F=R.options,J=(P.noAnimation===true),L=(P.noEvents===true);M=(M!==false);if((H.expanded&&M)||(!H.expanded&&!M)){return D(H);}else{if(M&&!H.lazy&&!H.hasChildren()){return D(H);}else{if(!M&&H.getLevel()<F.minExpandLevel){return u(H,["locked"]);}else{if(!L&&this._triggerNodeEvent("beforeExpand",H,R.originalEvent)===false){return u(H,["rejected"]);}}}}if(!J&&!H.isVisible()){J=P.noAnimation=true;}Q=new g.Deferred();if(M&&!H.expanded&&F.autoCollapse){N=H.getParentList(false,true);G=F.autoCollapse;try{F.autoCollapse=false;for(K=0,I=N.length;K<I;K++){this._callHook("nodeCollapseSiblings",N[K],P);}}finally{F.autoCollapse=G;}}Q.done(function(){if(M&&F.autoScroll&&!J){H.getLastChild().scrollIntoView(true,{topNode:H}).always(function(){if(!L){R.tree._triggerNodeEvent(M?"expand":"collapse",R);}});}else{if(!L){R.tree._triggerNodeEvent(M?"expand":"collapse",R);}}});O=function(V){var i,U,T=F.toggleEffect;H.expanded=M;S._callHook("nodeRender",R,false,false,true);if(H.ul){i=(H.ul.style.display!=="none");U=!!H.expanded;if(i===U){H.warn("nodeSetExpanded: UL.style.display already set");}else{if(!T||J){H.ul.style.display=(H.expanded||!parent)?"":"none";}else{g(H.ul).toggle(T.effect,T.options,T.duration,function(){V();});return;}}}V();};if(M&&H.lazy&&H.hasChildren()===l){H.load().done(function(){if(Q.notifyWith){Q.notifyWith(H,["loaded"]);}O(function(){Q.resolveWith(H);});}).fail(function(i){O(function(){Q.rejectWith(H,["load failed ("+i+")"]);});});}else{O(function(){Q.resolveWith(H);});}return Q.promise();},nodeSetFocus:function(H,G){var F,i=H.tree,I=H.node;G=(G!==false);if(i.focusNode){if(i.focusNode===I&&G){return;}F=g.extend({},H,{node:i.focusNode});i.focusNode=null;this._triggerNodeEvent("blur",F);this._callHook("nodeRenderStatus",F);}if(G){if(!this.hasFocus()){I.debug("nodeSetFocus: forcing container focus");this._callHook("treeSetFocus",H,true,{calledByNode:true});}I.makeVisible({scrollIntoView:false});i.focusNode=I;this._triggerNodeEvent("focus",H);if(H.options.autoScroll){I.scrollIntoView();}this._callHook("nodeRenderStatus",H);}},nodeSetSelected:function(G,F){var I=G.node,i=G.tree,H=G.options;F=(F!==false);I.debug("nodeSetSelected("+F+")",G);if(I.unselectable){return;}if((I.selected&&F)||(!I.selected&&!F)){return !!I.selected;}else{if(this._triggerNodeEvent("beforeSelect",I,G.originalEvent)===false){return !!I.selected;}}if(F&&H.selectMode===1){if(i.lastSelectedNode){i.lastSelectedNode.setSelected(false);}}else{if(H.selectMode===3){I.selected=F;I.fixSelection3AfterClick();}}I.selected=F;this.nodeRenderStatus(G);i.lastSelectedNode=F?I:null;i._triggerNodeEvent("select",G);},nodeSetStatus:function(H,G,K,I){var J=H.node,i=H.tree;function L(){var N=(J.children?J.children[0]:null);if(N&&N.isStatusNode()){try{if(J.ul){J.ul.removeChild(N.li);N.li=null;}}catch(M){}if(J.children.length===1){J.children=[];}else{J.children.shift();}}}function F(N,M){var O=(J.children?J.children[0]:null);if(O&&O.isStatusNode()){g.extend(O,N);i._callHook("nodeRenderTitle",O);}else{N.key="_statusNode";J._setChildren([N]);J.children[0].statusNodeType=M;i.render();}return J.children[0];}switch(G){case"ok":L();J._isLoading=false;J._error=null;J.renderStatus();break;case"loading":if(!J.parent){F({title:i.options.strings.loading+(K?" ("+K+") ":""),tooltip:I,extraClasses:"fancytree-statusnode-wait"},G);}J._isLoading=true;J._error=null;J.renderStatus();break;case"error":F({title:i.options.strings.loadError+(K?" ("+K+") ":""),tooltip:I,extraClasses:"fancytree-statusnode-error"},G);J._isLoading=false;J._error={message:K,details:I};J.renderStatus();break;default:g.error("invalid node status "+G);}},nodeToggleExpanded:function(i){return this.nodeSetExpanded(i,!i.node.expanded);},nodeToggleSelected:function(i){return this.nodeSetSelected(i,!i.node.selected);},treeClear:function(F){var i=F.tree;i.activeNode=null;i.focusNode=null;i.$div.find(">ul.fancytree-container").empty();i.rootNode.children=null;},treeCreate:function(i){},treeDestroy:function(i){},treeInit:function(i){this.treeLoad(i);},treeLoad:function(H,K){var J,I,G=H.tree,L=H.widget.element,F,i=g.extend({},H,{node:this.rootNode});if(G.rootNode.children){this.treeClear(H);}K=K||this.options.source;if(!K){J=L.data("type")||"html";switch(J){case"html":I=L.find(">ul:first");I.addClass("ui-fancytree-source ui-helper-hidden");K=g.ui.fancytree.parseHtml(I);this.data=g.extend(this.data,A(I));break;case"json":K=g.parseJSON(L.text());if(K.children){if(K.title){G.title=K.title;}K=K.children;}break;default:g.error("Invalid data-type: "+J);}}else{if(typeof K==="string"){g.error("Not implemented");}}F=this.nodeLoadChildren(i,K).done(function(){G.render();if(H.options.selectMode===3){G.rootNode.fixSelection3FromEndNodes();}G._triggerTreeEvent("init",null,{status:true});}).fail(function(){G.render();G._triggerTreeEvent("init",null,{status:false});});return F;},treeRegisterNode:function(i,G,F){},treeSetFocus:function(G,F,i){F=(F!==false);if(F!==this.hasFocus()){this._hasFocus=F;if(!F&&this.focusNode){this.focusNode.setFocus(false);}this.$container.toggleClass("fancytree-treefocus",F);this._triggerTreeEvent(F?"focusTree":"blurTree");}}});g.widget("ui.fancytree",{options:{activeVisible:true,ajax:{type:"GET",cache:false,dataType:"json"},aria:false,autoActivate:true,autoCollapse:false,autoScroll:false,checkbox:false,clickFolderMode:4,debugLevel:null,disabled:false,enableAspx:true,extensions:[],toggleEffect:{effect:"blind",options:{direction:"vertical",scale:"box"},duration:200},generateIds:false,icons:true,idPrefix:"ft_",focusOnSelect:false,keyboard:true,keyPathSeparator:"/",minExpandLevel:1,quicksearch:false,scrollOfs:{top:0,bottom:0},scrollParent:null,selectMode:2,strings:{loading:"Loading&#8230;",loadError:"Load error!"},tabbable:true,titlesTabbable:false,_classNames:{node:"fancytree-node",folder:"fancytree-folder",combinedExpanderPrefix:"fancytree-exp-",combinedIconPrefix:"fancytree-ico-",hasChildren:"fancytree-has-children",active:"fancytree-active",selected:"fancytree-selected",expanded:"fancytree-expanded",lazy:"fancytree-lazy",focused:"fancytree-focused",partsel:"fancytree-partsel",unselectable:"fancytree-unselectable",lastsib:"fancytree-lastsib",loading:"fancytree-loading",error:"fancytree-error"},lazyLoad:null,postProcess:null},_create:function(){this.tree=new m(this);this.$source=this.source||this.element.data("type")==="json"?this.element:this.element.find(">ul:first");var J,H,F,G=this.options.extensions,I=this.tree;for(F=0;F<G.length;F++){H=G[F];J=g.ui.fancytree._extensions[H];if(!J){g.error("Could not apply extension '"+H+"' (it is not registered, did you forget to include it?)");}this.tree.options[H]=g.extend(true,{},J.options,this.tree.options[H]);p(this.tree.ext[H]===l,"Extension name must not exist as Fancytree.ext attribute: '"+H+"'");this.tree.ext[H]={};h(this.tree,I,J,H);I=J;}this.tree._callHook("treeCreate",this.tree);},_init:function(){this.tree._callHook("treeInit",this.tree);this._bind();},_setOption:function(i,G){var H=true,F=false;switch(i){case"aria":case"checkbox":case"icons":case"minExpandLevel":case"tabbable":this.tree._callHook("treeCreate",this.tree);F=true;break;case"source":H=false;this.tree._callHook("treeLoad",this.tree,G);break;}this.tree.debug("set option "+i+"="+G+" <"+typeof(G)+">");if(H){g.Widget.prototype._setOption.apply(this,arguments);}if(F){this.tree.render(true,false);}},destroy:function(){this._unbind();this.tree._callHook("treeDestroy",this.tree);this.tree.$div.find(">ul.fancytree-container").remove();this.$source&&this.$source.removeClass("ui-helper-hidden");g.Widget.prototype.destroy.call(this);},_unbind:function(){var i=this.tree._ns;this.element.unbind(i);this.tree.$container.unbind(i);g(r).unbind(i);},_bind:function(){var H=this,G=this.options,i=this.tree,F=i._ns;this._unbind();i.$container.on("focusin"+F+" focusout"+F,function(K){var J=a.getNode(K),I=(K.type==="focusin");if(J){i._callHook("nodeSetFocus",J,I);}else{i._callHook("treeSetFocus",i,I);}}).on("selectstart"+F,"span.fancytree-title",function(I){I.preventDefault();}).on("keydown"+F,function(M){if(G.disabled||G.keyboard===false){return true;}var K,L=i.focusNode,I=i._makeHookContext(L||i,M),J=i.phase;try{i.phase="userEvent";if(L){K=i._triggerNodeEvent("keydown",L,M);}else{K=i._triggerTreeEvent("keydown",M);}if(K==="preventNav"){K=true;}else{if(K!==false){K=i._callHook("nodeKeydown",I);}}return K;}finally{i.phase=J;}}).on("click"+F+" dblclick"+F,function(M){if(G.disabled){return true;}var J,N=a.getEventTarget(M),L=N.node,I=H.tree,K=I.phase;if(!L){return true;}J=I._makeHookContext(L,M);try{I.phase="userEvent";switch(M.type){case"click":J.targetType=N.type;return(I._triggerNodeEvent("click",J,M)===false)?false:I._callHook("nodeClick",J);case"dblclick":J.targetType=N.type;return(I._triggerNodeEvent("dblclick",J,M)===false)?false:I._callHook("nodeDblclick",J);}}finally{I.phase=K;}});},getActiveNode:function(){return this.tree.activeNode;},getNodeByKey:function(i){return this.tree.getNodeByKey(i);},getRootNode:function(){return this.tree.rootNode;},getTree:function(){return this.tree;}});a=g.ui.fancytree;g.extend(g.ui.fancytree,{version:"2.8.0",buildType:"production",debugLevel:1,_nextId:1,_nextNodeKey:1,_extensions:{},_FancytreeClass:m,_FancytreeNodeClass:b,jquerySupports:{positionMyOfs:q(g.ui.version,1,9)},assert:function(i,F){return p(i,F);},debounce:function(G,F,H,i){var I;if(arguments.length===3&&typeof H!=="boolean"){i=H;H=false;}return function(){var J=arguments;i=i||this;H&&!I&&F.apply(i,J);clearTimeout(I);I=setTimeout(function(){H||F.apply(i,J);I=null;},G);};},debug:function(i){(g.ui.fancytree.debugLevel>=2)&&z("log",arguments);},error:function(i){z("error",arguments);},escapeHtml:function(i){return(""+i).replace(/[&<>"'\/]/g,function(F){return j[F];});},fixPositionOptions:function(H){if(H.offset||(""+H.my+H.at).indexOf("%")>=0){g.error("expected new position syntax (but '%' is not supported)");}if(!g.ui.fancytree.jquerySupports.positionMyOfs){var G=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(H.my),I=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(H.at),F=(G[2]?(+G[2]):0)+(I[2]?(+I[2]):0),i=(G[4]?(+G[4]):0)+(I[4]?(+I[4]):0);H=g.extend({},H,{my:G[1]+" "+G[3],at:I[1]+" "+I[3]});if(F||i){H.offset=""+F+" "+i;}}return H;},getEventTargetType:function(i){return this.getEventTarget(i).type;},getEventTarget:function(F){var G=F&&F.target?F.target.className:"",i={node:this.getNode(F.target),type:l};if(/\bfancytree-title\b/.test(G)){i.type="title";}else{if(/\bfancytree-expander\b/.test(G)){i.type=(i.node.hasChildren()===false?"prefix":"expander");}else{if(/\bfancytree-checkbox\b/.test(G)||/\bfancytree-radio\b/.test(G)){i.type="checkbox";}else{if(/\bfancytree-icon\b/.test(G)){i.type="icon";}else{if(/\bfancytree-node\b/.test(G)){i.type="title";}else{if(F&&F.target&&g(F.target).closest(".fancytree-title").length){i.type="title";}}}}}}return i;},getNode:function(i){if(i instanceof b){return i;}else{if(i.selector!==l){i=i[0];}else{if(i.originalEvent!==l){i=i.target;}}}while(i){if(i.ftnode){return i.ftnode;}i=i.parentNode;}return null;},info:function(i){(g.ui.fancytree.debugLevel>=1)&&z("info",arguments);},eventToString:function(F){var H=F.which,G=F.type,i=[];if(F.altKey){i.push("alt");}if(F.ctrlKey){i.push("ctrl");}if(F.metaKey){i.push("meta");}if(F.shiftKey){i.push("shift");}if(G==="click"||G==="dblclick"){i.push(B[F.button]+G);}else{if(!d[H]){i.push(c[H]||String.fromCharCode(H).toLowerCase());}}return i.join("+");},keyEventToString:function(i){this.warn("keyEventToString() is deprecated: use eventToString()");return this.eventToString(i);},parseHtml:function(N){var J,L,I,K,M,G,H,O,P=N.find(">li"),F=[];P.each(function(){var R,T=g(this),Q=T.find(">span:first",this),i=Q.length?null:T.find(">a:first"),S={tooltip:null,data:{}};if(Q.length){S.title=Q.html();}else{if(i&&i.length){S.title=i.html();S.data.href=i.attr("href");S.data.target=i.attr("target");S.tooltip=i.attr("title");}else{S.title=T.html();K=S.title.search(/<ul/i);if(K>=0){S.title=S.title.substring(0,K);}}}S.title=g.trim(S.title);for(L=0,I=E.length;L<I;L++){S[E[L]]=l;}H=this.className.split(" ");J=[];for(L=0,I=H.length;L<I;L++){O=H[L];if(k[O]){S[O]=true;}else{J.push(O);}}S.extraClasses=J.join(" ");M=T.attr("title");if(M){S.tooltip=M;}M=T.attr("id");if(M){S.key=M;}R=A(T);if(R&&!g.isEmptyObject(R)){for(L=0,I=t.length;L<I;L++){M=t[L];G=R[M];if(G!=null){delete R[M];S[M]=G;}}g.extend(S.data,R);}N=T.find(">ul:first");if(N.length){S.children=g.ui.fancytree.parseHtml(N);}else{S.children=S.lazy?l:null;}F.push(S);});return F;},registerExtension:function(i){p(i.name!=null,"extensions must have a `name` property.");p(i.version!=null,"extensions must have a `version` property.");g.ui.fancytree._extensions[i.name]=i;},unescapeHtml:function(i){var F=r.createElement("div");F.innerHTML=i;return F.childNodes.length===0?"":F.childNodes[0].nodeValue;},warn:function(i){z("warn",arguments);}});}(jQuery,window,document));
/*!
 * jquery.fancytree.childcounter.js
 *
 * Add a child counter bubble to tree nodes.
 * (Extension module for jquery.fancytree.js: https://github.com/mar10/fancytree/)
 *
 * Copyright (c) 2008-2015, Martin Wendt (http://wwWendt.de)
 *
 * Released under the MIT license
 * https://github.com/mar10/fancytree/wiki/LicenseInfo
 *
 * @version 2.8.0
 * @date 2015-02-08T17:56
 */
;(function(a,b){a.ui.fancytree._FancytreeClass.prototype.countSelected=function(d){var c=this,e=c.options;return c.getSelectedNodes(d).length;};a.ui.fancytree._FancytreeNodeClass.prototype.toUpper=function(){var c=this;return c.setTitle(c.title.toUpperCase());};a.ui.fancytree.prototype.widgetMethod1=function(d){var c=this.tree;return d;};a.ui.fancytree.registerExtension({name:"childcounter",version:"1.0.0",options:{deep:true,hideZeros:true,hideExpanded:false},foo:42,_appendCounter:function(d){var c=this;},treeInit:function(d){var c=this,e=d.options,f=d.options.childcounter;this._superApply(arguments);this.$container.addClass("fancytree-ext-childcounter");},treeDestroy:function(c){this._superApply(arguments);},nodeRenderTitle:function(c,g){var e=c.node,f=c.options.childcounter,d=(e.data.childCounter==null)?e.countChildren(f.deep):+e.data.childCounter;this._superApply(arguments);if((d||!f.hideZeros)&&(!e.isExpanded()||!f.hideExpanded)){a("span.fancytree-icon",e.span).append(a("<span class='fancytree-childcounter'/>").text(d));}},nodeSetExpanded:function(e,d,g){var c=e.tree,f=e.node;return this._superApply(arguments).always(function(){c.nodeRenderTitle(e);});}});}(jQuery));
/*!
 *
 * jquery.fancytree.clones.js
 * Support faster lookup of nodes by key and shared ref-ids.
 * (Extension module for jquery.fancytree.js: https://github.com/mar10/fancytree/)
 *
 * Copyright (c) 2008-2015, Martin Wendt (http://wwWendt.de)
 *
 * Released under the MIT license
 * https://github.com/mar10/fancytree/wiki/LicenseInfo
 *
 * @version 2.8.0
 * @date 2015-02-08T17:56
 */
;(function(f,e,b,g){function d(i,j){if(!i){j=j?": "+j:"";f.error("Assertion failed"+j);}}function h(j,l){var k;for(k=j.length-1;k>=0;k--){if(j[k]===l){j.splice(k,1);return true;}}return false;}function c(r,p,n){var j,o,t=r.length&3,u=r.length-t,q=n,m=3432918353,k=461845907,l=0;while(l<u){o=((r.charCodeAt(l)&255))|((r.charCodeAt(++l)&255)<<8)|((r.charCodeAt(++l)&255)<<16)|((r.charCodeAt(++l)&255)<<24);++l;o=((((o&65535)*m)+((((o>>>16)*m)&65535)<<16)))&4294967295;o=(o<<15)|(o>>>17);o=((((o&65535)*k)+((((o>>>16)*k)&65535)<<16)))&4294967295;q^=o;q=(q<<13)|(q>>>19);j=((((q&65535)*5)+((((q>>>16)*5)&65535)<<16)))&4294967295;q=(((j&65535)+27492)+((((j>>>16)+58964)&65535)<<16));}o=0;switch(t){case 3:o^=(r.charCodeAt(l+2)&255)<<16;case 2:o^=(r.charCodeAt(l+1)&255)<<8;case 1:o^=(r.charCodeAt(l)&255);o=(((o&65535)*m)+((((o>>>16)*m)&65535)<<16))&4294967295;o=(o<<15)|(o>>>17);o=(((o&65535)*k)+((((o>>>16)*k)&65535)<<16))&4294967295;q^=o;}q^=r.length;q^=q>>>16;q=(((q&65535)*2246822507)+((((q>>>16)*2246822507)&65535)<<16))&4294967295;q^=q>>>13;q=((((q&65535)*3266489909)+((((q>>>16)*3266489909)&65535)<<16)))&4294967295;q^=q>>>16;if(p){return("0000000"+(q>>>0).toString(16)).substr(-8);}return q>>>0;}function a(j){var i,k=f.map(j.getParentList(false,true),function(l){return l.refKey||l.key;});k=k.join("/");i="id_"+c(k,true);return i;}f.ui.fancytree._FancytreeNodeClass.prototype.getCloneList=function(k){var l,i=this.tree,j=i.refMap[this.refKey]||null,m=i.keyMap;if(j){l=this.key;if(k){j=f.map(j,function(n){return m[n];});}else{j=f.map(j,function(n){return n===l?null:m[n];});if(j.length<1){j=null;}}}return j;};f.ui.fancytree._FancytreeNodeClass.prototype.isClone=function(){var i=this.refKey||null,j=i&&this.tree.refMap[i]||null;return !!(j&&j.length>1);};f.ui.fancytree._FancytreeNodeClass.prototype.reRegister=function(n,i){n=(n==null)?null:""+n;i=(i==null)?null:""+i;var q=this.tree,p=this.key,l=this.refKey,j=q.keyMap,k=q.refMap,o=k[l]||null,m=false;if(n!=null&&n!==this.key){if(j[n]){f.error("[ext-clones] reRegister("+n+"): already exists: "+this);}delete j[p];j[n]=this;if(o){k[l]=f.map(o,function(r){return r===p?n:r;});}this.key=n;m=true;}if(i!=null&&i!==this.refKey){if(o){if(o.length===1){delete k[l];}else{k[l]=f.map(o,function(r){return r===p?null:r;});}}if(k[i]){k[i].append(n);}else{k[i]=[this.key];}this.refKey=i;m=true;}return m;};f.ui.fancytree._FancytreeClass.prototype.getNodesByRef=function(i,j){var l=this.keyMap,k=this.refMap[i]||null;if(k){if(j){k=f.map(k,function(n){var m=l[n];return m.isDescendantOf(j)?m:null;});}else{k=f.map(k,function(m){return l[m];});}if(k.length<1){k=null;}}return k;};f.ui.fancytree._FancytreeClass.prototype.changeRefKey=function(j,k){var m,n,o=this.keyMap,l=this.refMap[j]||null;if(l){for(m=0;m<l.length;m++){n=o[l[m]];n.refKey=k;}delete this.refMap[j];this.refMap[k]=l;}};f.ui.fancytree.registerExtension({name:"clones",version:"0.0.3",options:{highlightActiveClones:true,highlightClones:false},treeCreate:function(i){this._superApply(arguments);i.tree.refMap={};i.tree.keyMap={};},treeInit:function(i){this.$container.addClass("fancytree-ext-clones");d(i.options.defaultKey==null);i.options.defaultKey=function(j){return a(j);};this._superApply(arguments);},treeClear:function(i){i.tree.refMap={};i.tree.keyMap={};return this._superApply(arguments);},treeRegisterNode:function(q,p,i){var o,k,r=q.tree,l=r.keyMap,m=r.refMap,n=i.key,j=(i&&i.refKey!=null)?""+i.refKey:null;if(n==="_statusNode"){return this._superApply(arguments);}if(p){if(l[i.key]!=null){f.error("clones.treeRegisterNode: node.key already exists: "+i);}l[n]=i;if(j){o=m[j];if(o){o.push(n);if(o.length===2&&q.options.clones.highlightClones){l[o[0]].renderStatus();}}else{m[j]=[n];}}}else{if(l[n]==null){f.error("clones.treeRegisterNode: node.key not registered: "+i.key);}delete l[n];if(j){o=m[j];if(o){k=o.length;if(k<=1){d(k===1);d(o[0]===n);delete m[j];}else{h(o,n);if(k===2&&q.options.clones.highlightClones){l[o[0]].renderStatus();}}}}}return this._superApply(arguments);},nodeRenderStatus:function(j){var i,k,l=j.node;k=this._superApply(arguments);if(j.options.clones.highlightClones){i=f(l[j.tree.statusClassPropName]);if(i.length&&l.isClone()){i.addClass("fancytree-clone");}}return k;},nodeSetActive:function(j,i){var k,m=j.tree.statusClassPropName,l=j.node;k=this._superApply(arguments);if(j.options.clones.highlightActiveClones&&l.isClone()){f.each(l.getCloneList(true),function(o,p){f(p[m]).toggleClass("fancytree-active-clone",i!==false);});}return k;}});}(jQuery,window,document));
/*!
 * jquery.fancytree.dnd.js
 *
 * Drag-and-drop support.
 * (Extension module for jquery.fancytree.js: https://github.com/mar10/fancytree/)
 *
 * Copyright (c) 2008-2015, Martin Wendt (http://wwWendt.de)
 *
 * Released under the MIT license
 * https://github.com/mar10/fancytree/wiki/LicenseInfo
 *
 * @version 2.8.0
 * @date 2015-02-08T17:56
 */
;(function(e,c,a,g){var h=false;function b(i){return i===0?"":((i>0)?("+"+i):(""+i));}function d(i){var j=i.options.dnd||null;if(j){f();}if(j&&j.dragStart){i.widget.element.draggable(e.extend({addClasses:false,appendTo:i.$container,containment:false,delay:0,distance:4,revert:false,scroll:true,scrollSpeed:7,scrollSensitivity:10,connectToFancytree:true,helper:function(l){var n,k=e.ui.fancytree.getNode(l.target),m=e(k.span);if(!k){return"<div>ERROR?: helper requested but sourceNode not found</div>";}n=e("<div class='fancytree-drag-helper'><span class='fancytree-drag-helper-img' /></div>").css({zIndex:3,position:"relative"}).append(m.find("span.fancytree-title").clone());n.data("ftSourceNode",k);return n;},start:function(l,m){var k=m.helper.data("ftSourceNode");return !!k;}},i.options.dnd.draggable));}if(j&&j.dragDrop){i.widget.element.droppable(e.extend({addClasses:false,tolerance:"intersect",greedy:false},i.options.dnd.droppable));}}function f(){if(h){return;}e.ui.plugin.add("draggable","connectToFancytree",{start:function(k,l){var i=e(this).data("ui-draggable")||e(this).data("draggable"),j=l.helper.data("ftSourceNode")||null;if(j){i.offset.click.top=-2;i.offset.click.left=+16;return j.tree.ext.dnd._onDragEvent("start",j,null,k,l,i);}},drag:function(m,n){var k,j,i=e(this).data("ui-draggable")||e(this).data("draggable"),l=n.helper.data("ftSourceNode")||null,p=n.helper.data("ftTargetNode")||null,o=e.ui.fancytree.getNode(m.target);if(m.target&&!o){k=e(m.target).closest("div.fancytree-drag-helper,#fancytree-drop-marker").length>0;if(k){j=l||p||e.ui.fancytree;j.debug("Drag event over helper: ignored.");return;}}n.helper.data("ftTargetNode",o);if(p&&p!==o){p.tree.ext.dnd._onDragEvent("leave",p,l,m,n,i);}if(o){if(!o.tree.options.dnd.dragDrop){}else{if(o===p){o.tree.ext.dnd._onDragEvent("over",o,l,m,n,i);}else{o.tree.ext.dnd._onDragEvent("enter",o,l,m,n,i);}}}},stop:function(m,n){var j,i=e(this).data("ui-draggable")||e(this).data("draggable"),l=n.helper.data("ftSourceNode")||null,o=n.helper.data("ftTargetNode")||null,k=m.type,p=(k==="mouseup"&&m.which===1);if(!p){j=l||o||e.ui.fancytree;j.debug("Drag was cancelled");}if(o){if(p){o.tree.ext.dnd._onDragEvent("drop",o,l,m,n,i);}o.tree.ext.dnd._onDragEvent("leave",o,l,m,n,i);}if(l){l.tree.ext.dnd._onDragEvent("stop",l,null,m,n,i);}}});h=true;}e.ui.fancytree.registerExtension({name:"dnd",version:"0.1.0",options:{autoExpandMS:1000,draggable:null,droppable:null,focusOnClick:false,preventVoidMoves:true,preventRecursiveMoves:true,dragStart:null,dragStop:null,dragEnter:null,dragOver:null,dragDrop:null,dragLeave:null},treeInit:function(j){var i=j.tree;this._superApply(arguments);if(i.options.dnd.dragStart){i.$container.on("mousedown",function(l){if(!i.hasFocus()&&j.options.dnd.focusOnClick){var k=e.ui.fancytree.getNode(l);k.debug("Re-enable focus that was prevented by jQuery UI draggable.");setTimeout(function(){e(l.target).closest(":tabbable").focus();},10);}});}d(i);},nodeKeydown:function(i){var j=i.originalEvent;if(j.which===e.ui.keyCode.ESCAPE){this._local._cancelDrag();}return this._superApply(arguments);},nodeClick:function(i){return this._superApply(arguments);},_setDndStatus:function(k,q,j,m,l){var o=0,n=5,r="center",t=this._local,p=k?e(k.span):null,i=e(q.span);if(!t.$dropMarker){t.$dropMarker=e("<div id='fancytree-drop-marker'></div>").hide().css({"z-index":1000}).prependTo(e(this.$div).parent());}if(m==="after"||m==="before"||m==="over"){switch(m){case"before":t.$dropMarker.removeClass("fancytree-drop-after fancytree-drop-over").addClass("fancytree-drop-before");r="top";break;case"after":t.$dropMarker.removeClass("fancytree-drop-before fancytree-drop-over").addClass("fancytree-drop-after");r="bottom";break;default:t.$dropMarker.removeClass("fancytree-drop-after fancytree-drop-before").addClass("fancytree-drop-over");i.addClass("fancytree-drop-target");o=8;}t.$dropMarker.show().position(e.ui.fancytree.fixPositionOptions({my:"left"+b(o)+" center"+b(n),at:"left "+r,of:i}));}else{i.removeClass("fancytree-drop-target");t.$dropMarker.hide();}if(m==="after"){i.addClass("fancytree-drop-after");}else{i.removeClass("fancytree-drop-after");}if(m==="before"){i.addClass("fancytree-drop-before");}else{i.removeClass("fancytree-drop-before");}if(l===true){if(p){p.addClass("fancytree-drop-accept");}i.addClass("fancytree-drop-accept");j.addClass("fancytree-drop-accept");}else{if(p){p.removeClass("fancytree-drop-accept");}i.removeClass("fancytree-drop-accept");j.removeClass("fancytree-drop-accept");}if(l===false){if(p){p.addClass("fancytree-drop-reject");}i.addClass("fancytree-drop-reject");j.addClass("fancytree-drop-reject");}else{if(p){p.removeClass("fancytree-drop-reject");}i.removeClass("fancytree-drop-reject");j.removeClass("fancytree-drop-reject");}},_onDragEvent:function(u,m,p,k,x,A){if(u!=="over"){this.debug("tree.ext.dnd._onDragEvent(%s, %o, %o) - %o",u,m,p,this);}var n,y,t,w,q,j,i=this.options,l=i.dnd,z=this._makeHookContext(m,k,{otherNode:p,ui:x,draggable:A}),v=null,o=e(m.span);switch(u){case"start":if(m.isStatusNode()){v=false;}else{if(l.dragStart){v=l.dragStart(m,z);}}if(v===false){this.debug("tree.dragStart() cancelled");x.helper.trigger("mouseup").hide();}else{o.addClass("fancytree-drag-source");}break;case"enter":if(l.preventRecursiveMoves&&m.isDescendantOf(p)){j=false;}else{j=l.dragEnter?l.dragEnter(m,z):null;}if(!j){v=false;}else{if(e.isArray(j)){v={over:(e.inArray("over",j)>=0),before:(e.inArray("before",j)>=0),after:(e.inArray("after",j)>=0)};}else{v={over:((j===true)||(j==="over")),before:((j===true)||(j==="before")),after:((j===true)||(j==="after"))};}}x.helper.data("enterResponse",v);this.debug("helper.enterResponse: %o",v);break;case"over":w=x.helper.data("enterResponse");q=null;if(w===false){}else{if(typeof w==="string"){q=w;}else{n=o.offset();y={x:k.pageX-n.left,y:k.pageY-n.top};t={x:y.x/o.width(),y:y.y/o.height()};if(w.after&&t.y>0.75){q="after";}else{if(!w.over&&w.after&&t.y>0.5){q="after";}else{if(w.before&&t.y<=0.25){q="before";}else{if(!w.over&&w.before&&t.y<=0.5){q="before";}else{if(w.over){q="over";}}}}}if(l.preventVoidMoves){if(m===p){this.debug("    drop over source node prevented");q=null;}else{if(q==="before"&&p&&m===p.getNextSibling()){this.debug("    drop after source node prevented");q=null;}else{if(q==="after"&&p&&m===p.getPrevSibling()){this.debug("    drop before source node prevented");q=null;}else{if(q==="over"&&p&&p.parent===m&&p.isLastSibling()){this.debug("    drop last child over own parent prevented");q=null;}}}}}x.helper.data("hitMode",q);}}if(q==="over"&&l.autoExpandMS&&m.hasChildren()!==false&&!m.expanded){m.scheduleAction("expand",l.autoExpandMS);}if(q&&l.dragOver){z.hitMode=q;v=l.dragOver(m,z);}this._local._setDndStatus(p,m,x.helper,q,v!==false&&q!==null);break;case"drop":q=x.helper.data("hitMode");if(q&&l.dragDrop){z.hitMode=q;l.dragDrop(m,z);}break;case"leave":m.scheduleAction("cancel");x.helper.data("enterResponse",null);x.helper.data("hitMode",null);this._local._setDndStatus(p,m,x.helper,"out",g);if(l.dragLeave){l.dragLeave(m,z);}break;case"stop":o.removeClass("fancytree-drag-source");if(l.dragStop){l.dragStop(m,z);}break;default:e.error("Unsupported drag event: "+u);}return v;},_cancelDrag:function(){var i=e.ui.ddmanager.current;if(i){i.cancel();}}});}(jQuery,window,document));
/*!
 * jquery.fancytree.edit.js
 *
 * Make node titles editable.
 * (Extension module for jquery.fancytree.js: https://github.com/mar10/fancytree/)
 *
 * Copyright (c) 2008-2015, Martin Wendt (http://wwWendt.de)
 *
 * Released under the MIT license
 * https://github.com/mar10/fancytree/wiki/LicenseInfo
 *
 * @version 2.8.0
 * @date 2015-02-08T17:56
 */
;(function(f,e,b,g){var d=/Mac/.test(navigator.platform),a=f.ui.fancytree.escapeHtml,c=f.ui.fancytree.unescapeHtml;f.ui.fancytree._FancytreeNodeClass.prototype.editStart=function(){var n,m=this,i=this.tree,j=i.ext.edit,h=i.options.edit,l=f(".fancytree-title",m.span),k={node:m,tree:i,options:i.options,isNew:f(m.span).hasClass("fancytree-edit-new"),orgTitle:m.title,input:null,dirty:false};if(h.beforeEdit.call(m,{type:"beforeEdit"},k)===false){return false;}f.ui.fancytree.assert(!j.currentNode,"recursive edit");j.currentNode=this;j.eventData=k;i.widget._unbind();f(b).on("mousedown.fancytree-edit",function(o){if(!f(o.target).hasClass("fancytree-edit-input")){m.editEnd(true,o);}});n=f("<input />",{"class":"fancytree-edit-input",type:"text",value:c(k.orgTitle)});j.eventData.input=n;if(h.adjustWidthOfs!=null){n.width(l.width()+h.adjustWidthOfs);}if(h.inputCss!=null){n.css(h.inputCss);}l.html(n);n.focus().change(function(o){n.addClass("fancytree-edit-dirty");}).keydown(function(o){switch(o.which){case f.ui.keyCode.ESCAPE:m.editEnd(false,o);break;case f.ui.keyCode.ENTER:m.editEnd(true,o);return false;}o.stopPropagation();}).blur(function(o){return m.editEnd(true,o);});h.edit.call(m,{type:"edit"},k);};f.ui.fancytree._FancytreeNodeClass.prototype.editEnd=function(p,j){var h,i=this,q=this.tree,n=q.ext.edit,o=n.eventData,k=q.options.edit,m=f(".fancytree-title",i.span),l=m.find("input.fancytree-edit-input");if(k.trim){l.val(f.trim(l.val()));}h=l.val();o.dirty=(h!==i.title);if(p===false){o.save=false;}else{if(o.isNew){o.save=(h!=="");}else{o.save=o.dirty&&(h!=="");}}if(k.beforeClose.call(i,{type:"beforeClose"},o)===false){return false;}if(o.save&&k.save.call(i,{type:"save"},o)===false){return false;}l.removeClass("fancytree-edit-dirty").unbind();f(b).off(".fancytree-edit");if(o.save){i.setTitle(a(h));i.setFocus();}else{if(o.isNew){i.remove();i=o.node=null;n.relatedNode.setFocus();}else{i.renderTitle();i.setFocus();}}n.eventData=null;n.currentNode=null;n.relatedNode=null;q.widget._bind();f(q.$container).focus();o.input=null;k.close.call(i,{type:"close"},o);return true;};f.ui.fancytree._FancytreeNodeClass.prototype.editCreateNode=function(k,j){var h,i=this;k=k||"child";if(j==null){j={title:""};}else{if(typeof j==="string"){j={title:j};}else{f.ui.fancytree.assert(f.isPlainObject(j));}}if(k==="child"&&!this.isExpanded()&&this.hasChildren()!==false){this.setExpanded().done(function(){i.editCreateNode(k,j);});return;}h=this.addNode(j,k);h.makeVisible();f(h.span).addClass("fancytree-edit-new");this.tree.ext.edit.relatedNode=this;h.editStart();};f.ui.fancytree._FancytreeClass.prototype.isEditing=function(){return this.ext.edit.currentNode;};f.ui.fancytree._FancytreeNodeClass.prototype.isEditing=function(){return this.tree.ext.edit.currentNode===this;};f.ui.fancytree.registerExtension({name:"edit",version:"0.2.0",options:{adjustWidthOfs:4,allowEmpty:false,inputCss:{minWidth:"3em"},triggerCancel:["esc","tab","click"],triggerStart:["f2","shift+click","mac+enter"],trim:true,beforeClose:f.noop,beforeEdit:f.noop,close:f.noop,edit:f.noop,save:f.noop},currentNode:null,treeInit:function(h){this._superApply(arguments);this.$container.addClass("fancytree-ext-edit");},nodeClick:function(h){if(f.inArray("shift+click",h.options.edit.triggerStart)>=0){if(h.originalEvent.shiftKey){h.node.editStart();return false;}}return this._superApply(arguments);},nodeDblclick:function(h){if(f.inArray("dblclick",h.options.edit.triggerStart)>=0){h.node.editStart();return false;}return this._superApply(arguments);},nodeKeydown:function(h){switch(h.originalEvent.which){case 113:if(f.inArray("f2",h.options.edit.triggerStart)>=0){h.node.editStart();return false;}break;case f.ui.keyCode.ENTER:if(f.inArray("mac+enter",h.options.edit.triggerStart)>=0&&d){h.node.editStart();return false;}break;}return this._superApply(arguments);}});}(jQuery,window,document));
/*!
 * jquery.fancytree.filter.js
 *
 * Remove or highlight tree nodes, based on a filter.
 * (Extension module for jquery.fancytree.js: https://github.com/mar10/fancytree/)
 *
 * Copyright (c) 2008-2015, Martin Wendt (http://wwWendt.de)
 *
 * Released under the MIT license
 * https://github.com/mar10/fancytree/wiki/LicenseInfo
 *
 * @version 2.8.0
 * @date 2015-02-08T17:56
 */
;(function(d,c,b,e){function a(f){return(f+"").replace(/([.?*+\^\$\[\]\\(){}|-])/g,"\\$1");}d.ui.fancytree._FancytreeClass.prototype._applyFilterImpl=function(j,l,h){var g,i,k=0,f=this.options.filter.mode==="hide";h=!!h&&!l;if(typeof j==="string"){g=a(j);i=new RegExp(".*"+g+".*","i");j=function(m){return !!i.exec(m.title);};}this.enableFilter=true;this.lastFilterArgs=arguments;this.$div.addClass("fancytree-ext-filter");if(f){this.$div.addClass("fancytree-ext-filter-hide");}else{this.$div.addClass("fancytree-ext-filter-dimm");}this.visit(function(m){delete m.match;delete m.subMatch;});this.visit(function(m){if((!h||m.children==null)&&j(m)){k++;m.match=true;m.visitParents(function(n){n.subMatch=true;});if(l){m.visit(function(n){n.match=true;});return"skip";}}});this.render();return k;};d.ui.fancytree._FancytreeClass.prototype.filterNodes=function(g,f){return this._applyFilterImpl(g,false,f);};d.ui.fancytree._FancytreeClass.prototype.applyFilter=function(f){this.warn("Fancytree.applyFilter() is deprecated since 2014-05-10. Use .filterNodes() instead.");return this.filterNodes.apply(this,arguments);};d.ui.fancytree._FancytreeClass.prototype.filterBranches=function(f){return this._applyFilterImpl(f,true,null);};d.ui.fancytree._FancytreeClass.prototype.clearFilter=function(){this.visit(function(f){delete f.match;delete f.subMatch;});this.enableFilter=false;this.lastFilterArgs=null;this.$div.removeClass("fancytree-ext-filter fancytree-ext-filter-dimm fancytree-ext-filter-hide");this.render();};d.ui.fancytree.registerExtension({name:"filter",version:"0.3.0",options:{autoApply:true,mode:"dimm"},treeInit:function(f){this._superApply(arguments);},nodeLoadChildren:function(f,g){return this._superApply(arguments).done(function(){if(f.tree.enableFilter&&f.tree.lastFilterArgs&&f.options.filter.autoApply){f.tree._applyFilterImpl.apply(f.tree,f.tree.lastFilterArgs);}});},nodeRenderStatus:function(h){var i,j=h.node,f=h.tree,g=d(j[f.statusClassPropName]);i=this._superApply(arguments);if(!g.length||!f.enableFilter){return i;}g.toggleClass("fancytree-match",!!j.match).toggleClass("fancytree-submatch",!!j.subMatch).toggleClass("fancytree-hide",!(j.match||j.subMatch));return i;}});}(jQuery,window,document));
/*!
 * jquery.fancytree.glyph.js
 *
 * Use glyph fonts as instead of icon sprites.
 * (Extension module for jquery.fancytree.js: https://github.com/mar10/fancytree/)
 *
 * Copyright (c) 2008-2015, Martin Wendt (http://wwWendt.de)
 *
 * Released under the MIT license
 * https://github.com/mar10/fancytree/wiki/LicenseInfo
 *
 * @version 2.8.0
 * @date 2015-02-08T17:56
 */
;(function(c,b,a,e){function d(g,f){return g.map[f];}c.ui.fancytree.registerExtension({name:"glyph",version:"0.2.0",options:{map:{checkbox:"icon-check-empty",checkboxSelected:"icon-check",checkboxUnknown:"icon-check icon-muted",error:"icon-exclamation-sign",expanderClosed:"icon-caret-right",expanderLazy:"icon-angle-right",expanderOpen:"icon-caret-down",doc:"icon-file-alt",noExpander:"",docOpen:"icon-file-alt",loading:"icon-refresh icon-spin",folder:"icon-folder-close-alt",folderOpen:"icon-folder-open-alt"}},treeInit:function(g){var f=g.tree;this._superApply(arguments);f.$container.addClass("fancytree-ext-glyph");},nodeRenderStatus:function(g){var i,h,k=g.node,f=c(k.span),j=g.options.glyph,l=j.map;this._superApply(arguments);if(k.isRoot()){return;}h=f.children("span.fancytree-expander").get(0);if(h){if(k.isLoading()){i="loading";}else{if(k.expanded){i="expanderOpen";}else{if(k.isUndefined()){i="expanderLazy";}else{if(k.hasChildren()){i="expanderClosed";}else{i="noExpander";}}}}h.className="fancytree-expander "+l[i];}if(k.tr){h=c("td",k.tr).children("span.fancytree-checkbox").get(0);}else{h=f.children("span.fancytree-checkbox").get(0);}if(h){i=k.selected?"checkboxSelected":(k.partsel?"checkboxUnknown":"checkbox");h.className="fancytree-checkbox "+l[i];}h=f.children("span.fancytree-icon").get(0);if(h){if(k.folder){i=k.expanded?d(j,"folderOpen"):d(j,"folder");}else{i=k.expanded?d(j,"docOpen"):d(j,"doc");}h.className="fancytree-icon "+i;}},nodeSetStatus:function(g,f,l,h){var i,k=g.options.glyph,j=g.node;this._superApply(arguments);if(j.parent){i=c("span.fancytree-expander",j.span).get(0);}else{i=c(".fancytree-statusnode-wait, .fancytree-statusnode-error",j[this.nodeContainerAttrName]).find("span.fancytree-expander").get(0);}if(f==="loading"){i.className="fancytree-expander "+d(k,"loading");}else{if(f==="error"){i.className="fancytree-expander "+d(k,"error");}}}});}(jQuery,window,document));
/*!
 * jquery.fancytree.gridnav.js
 *
 * Support keyboard navigation for trees with embedded input controls.
 * (Extension module for jquery.fancytree.js: https://github.com/mar10/fancytree/)
 *
 * Copyright (c) 2008-2015, Martin Wendt (http://wwWendt.de)
 *
 * Released under the MIT license
 * https://github.com/mar10/fancytree/wiki/LicenseInfo
 *
 * @version 2.8.0
 * @date 2015-02-08T17:56
 */
;(function(c,d,e,a){var i=c.ui.keyCode,b={text:[i.UP,i.DOWN],checkbox:[i.UP,i.DOWN,i.LEFT,i.RIGHT],radiobutton:[i.UP,i.DOWN,i.LEFT,i.RIGHT],"select-one":[i.LEFT,i.RIGHT],"select-multiple":[i.LEFT,i.RIGHT]};function h(k,l){var n,m=l.get(0),j=0;k.children().each(function(){if(this===m){return false;}n=c(this).prop("colspan");j+=n?n:1;});return j;}function g(l,n){var m,k=null,j=0;l.children().each(function(){if(j>=n){k=c(this);return false;}m=c(this).prop("colspan");j+=m?m:1;});return k;}function f(j,m){var k,o,n=j.closest("td"),l=null;switch(m){case i.LEFT:l=n.prev();break;case i.RIGHT:l=n.next();break;case i.UP:case i.DOWN:k=n.parent();o=h(k,n);while(true){k=(m===i.UP)?k.prev():k.next();if(!k.length){break;}if(k.is(":hidden")){continue;}l=g(k,o);if(l&&l.find(":input").length){break;}}break;}return l;}c.ui.fancytree.registerExtension({name:"gridnav",version:"0.0.1",options:{autofocusInput:false,handleCursorKeys:true},treeInit:function(j){this._requireExtension("table",true,true);this._superApply(arguments);this.$container.addClass("fancytree-ext-gridnav");this.$container.on("focusin",function(m){var k,l=c.ui.fancytree.getNode(m.target);if(l&&!l.isActive()){k=j.tree._makeHookContext(l,m);j.tree._callHook("nodeSetActive",k,true);}});},nodeSetActive:function(l,k){var j,p=l.options.gridnav,o=l.node,n=l.originalEvent||{},m=c(n.target).is(":input");k=(k!==false);this._superApply(arguments);if(k){if(l.options.titlesTabbable){if(!m){c(o.span).find("span.fancytree-title").focus();o.setFocus();}l.tree.$container.attr("tabindex","-1");}else{if(p.autofocusInput&&!m){j=c(o.tr||o.span);j.find(":input:enabled:first").focus();}}}},nodeKeydown:function(k){var m,l,p,o=k.options.gridnav,n=k.originalEvent,j=c(n.target);m=j.is(":input:enabled")?j.prop("type"):null;if(m&&o.handleCursorKeys){l=b[m];if(l&&c.inArray(n.which,l)>=0){p=f(j,n.which);if(p&&p.length){p.find(":input:enabled").focus();return false;}}return true;}return this._superApply(arguments);}});}(jQuery,window,document));
/*!
 * jquery.fancytree.persist.js
 *
 * Persist tree status in cookiesRemove or highlight tree nodes, based on a filter.
 * (Extension module for jquery.fancytree.js: https://github.com/mar10/fancytree/)
 *
 * @depends: jquery.cookie.js
 *
 * Copyright (c) 2008-2015, Martin Wendt (http://wwWendt.de)
 *
 * Released under the MIT license
 * https://github.com/mar10/fancytree/wiki/LicenseInfo
 *
 * @version 2.8.0
 * @date 2015-02-08T17:56
 */
;(function(c,f,i,b){var e=c.ui.fancytree.assert,j="active",g="expanded",h="focus",d="selected";function a(x,u,p,r,w){var q,v,n,m,t=false,o=[],k=[];p=p||[];w=w||c.Deferred();for(q=0,n=p.length;q<n;q++){v=p[q];m=x.getNodeByKey(v);if(m){if(r&&m.isUndefined()){t=true;x.debug("_loadLazyNodes: "+m+" is lazy: loading...");if(r==="expand"){o.push(m.setExpanded());}else{o.push(m.load());}}else{x.debug("_loadLazyNodes: "+m+" already loaded.");m.setExpanded();}}else{k.push(v);x.debug("_loadLazyNodes: "+m+" was not yet found.");}}c.when.apply(c,o).always(function(){if(t&&k.length>0){a(x,u,k,r,w);}else{if(k.length){x.warn("_loadLazyNodes: could not load those keys: ",k);for(q=0,n=k.length;q<n;q++){v=p[q];u._appendKey(g,p[q],false);}}w.resolve();}});return w;}c.ui.fancytree._FancytreeClass.prototype.clearCookies=function(l){var k=this.ext.persist,m=k.cookiePrefix;l=l||"active expanded focus selected";if(l.indexOf(j)>=0){k._data(m+j,null);}if(l.indexOf(g)>=0){k._data(m+g,null);}if(l.indexOf(h)>=0){k._data(m+h,null);}if(l.indexOf(d)>=0){k._data(m+d,null);}};c.ui.fancytree._FancytreeClass.prototype.getPersistData=function(){var l=this.ext.persist,m=l.cookiePrefix,n=l.cookieDelimiter,k={};k[j]=l._data(m+j);k[g]=(l._data(m+g)||"").split(n);k[d]=(l._data(m+d)||"").split(n);k[h]=l._data(m+h);return k;};c.ui.fancytree.registerExtension({name:"persist",version:"0.3.0",options:{cookieDelimiter:"~",cookiePrefix:b,cookie:{raw:false,expires:"",path:"",domain:"",secure:false},expandLazy:false,overrideSource:true,store:"auto",types:"active expanded focus selected"},_data:function(l,m){var k=this._local.localStorage;if(m===b){return k?k.getItem(l):c.cookie(l);}else{if(m===null){if(k){k.removeItem(l);}else{c.removeCookie(l);}}else{if(k){k.setItem(l,m);}else{c.cookie(l,m,this.options.persist.cookie);}}}},_appendKey:function(p,u,o){u=""+u;var r=this._local,n=this.options.persist,k=n.cookieDelimiter,q=r.cookiePrefix+p,m=r._data(q),l=m?m.split(k):[],t=c.inArray(u,l);if(t>=0){l.splice(t,1);}if(o){l.push(u);}r._data(q,l.join(k));},treeInit:function(m){var l=m.tree,o=m.options,n=this._local,k=this.options.persist;e(k.store==="localStore"||c.cookie,"Missing required plugin for 'persist' extension: jquery.cookie.js");n.cookiePrefix=k.cookiePrefix||("fancytree-"+l._id+"-");n.storeActive=k.types.indexOf(j)>=0;n.storeExpanded=k.types.indexOf(g)>=0;n.storeSelected=k.types.indexOf(d)>=0;n.storeFocus=k.types.indexOf(h)>=0;if(k.store==="cookie"||!f.localStorage){n.localStorage=null;}else{n.localStorage=(k.store==="local")?f.localStorage:f.sessionStorage;}l.$div.bind("fancytreeinit",function(v){var t,p,r,w,u,q=n._data(n.cookiePrefix+h);t=n._data(n.cookiePrefix+g);w=t&&t.split(k.cookieDelimiter);if(n.storeExpanded){p=a(l,n,w,k.expandLazy?"expand":false,null);}else{p=new c.Deferred().resolve();}p.done(function(){if(n.storeSelected){t=n._data(n.cookiePrefix+d);if(t){w=t.split(k.cookieDelimiter);for(r=0;r<w.length;r++){u=l.getNodeByKey(w[r]);if(u){if(u.selected===b||k.overrideSource&&(u.selected===false)){u.selected=true;u.renderStatus();}}else{n._appendKey(d,w[r],false);}}}if(l.options.selectMode===3){l.visit(function(x){if(x.selected){x.fixSelection3AfterClick();return"skip";}});}}if(n.storeActive){t=n._data(n.cookiePrefix+j);if(t&&(o.persist.overrideSource||!l.activeNode)){u=l.getNodeByKey(t);if(u){u.debug("persist: set active",t);u.setActive(true,{noFocus:true});}}}if(n.storeFocus&&q){u=l.getNodeByKey(q);if(u){if(l.options.titlesTabbable){c(u.span).find(".fancytree-title").focus();}else{c(l.$container).focus();}}}l._triggerTreeEvent("restore",null,{});});});return this._superApply(arguments);},nodeSetActive:function(l,k,o){var n,m=this._local;k=(k!==false);n=this._superApply(arguments);if(m.storeActive){m._data(m.cookiePrefix+j,this.activeNode?this.activeNode.key:null);}return n;},nodeSetExpanded:function(l,k,p){var n,o=l.node,m=this._local;k=(k!==false);n=this._superApply(arguments);if(m.storeExpanded){m._appendKey(g,o.key,k);}return n;},nodeSetFocus:function(l,k){var n,m=this._local;k=(k!==false);n=this._superApply(arguments);if(m.storeFocus){m._data(m.cookiePrefix+h,this.focusNode?this.focusNode.key:null);}return n;},nodeSetSelected:function(n,m){var p,l,k=n.tree,q=n.node,o=this._local;m=(m!==false);p=this._superApply(arguments);if(o.storeSelected){if(k.options.selectMode===3){l=c.map(k.getSelectedNodes(true),function(r){return r.key;});l=l.join(n.options.persist.cookieDelimiter);o._data(o.cookiePrefix+d,l);}else{o._appendKey(d,q.key,m);}}return p;}});}(jQuery,window,document));
/*!
 * jquery.fancytree.table.js
 *
 * Render tree as table (aka 'treegrid', 'tabletree').
 * (Extension module for jquery.fancytree.js: https://github.com/mar10/fancytree/)
 *
 * Copyright (c) 2008-2015, Martin Wendt (http://wwWendt.de)
 *
 * Released under the MIT license
 * https://github.com/mar10/fancytree/wiki/LicenseInfo
 *
 * @version 2.8.0
 * @date 2015-02-08T17:56
 */
;(function(g,e,a,h){function c(i,j){j=j||"";if(!i){g.error("Assertion failed "+j);}}function f(i,j){i.parentNode.insertBefore(j,i.nextSibling);}function b(j,i){j.visit(function(k){var l=k.tr;if(l){l.style.display=(k.hide||!i)?"none":"";}if(!k.expanded){return"skip";}});}function d(n){var j,m,l,k=n.parent,o=k?k.children:null;if(o&&o.length>1&&o[0]!==n){j=g.inArray(n,o);l=o[j-1];c(l.tr);while(l.children){m=l.children[l.children.length-1];if(!m.tr){break;}l=m;}}else{l=k;}return l;}g.ui.fancytree.registerExtension({name:"table",version:"0.2.0",options:{checkboxColumnIdx:null,customStatus:false,indentation:16,nodeColumnIdx:0},treeInit:function(l){var n,k,o,j=l.tree,m=j.widget.element;m.addClass("fancytree-container fancytree-ext-table");j.tbody=m.find("> tbody")[0];j.columnCount=g("thead >tr >th",m).length;g(j.tbody).empty();j.rowFragment=a.createDocumentFragment();k=g("<tr />");o="";if(l.options.aria){k.attr("role","row");o=" role='gridcell'";}for(n=0;n<j.columnCount;n++){if(l.options.table.nodeColumnIdx===n){k.append("<td"+o+"><span class='fancytree-node' /></td>");}else{k.append("<td"+o+" />");}}j.rowFragment.appendChild(k.get(0));j.statusClassPropName="tr";j.ariaPropName="tr";this.nodeContainerAttrName="tr";this._superApply(arguments);g(j.rootNode.ul).remove();j.rootNode.ul=null;j.$container=m;this.$container.attr("tabindex",this.options.tabbable?"0":"-1");if(this.options.aria){j.$container.attr("role","treegrid").attr("aria-readonly",true);}},nodeRemoveChildMarkup:function(i){var j=i.node;j.visit(function(k){if(k.tr){g(k.tr).remove();k.tr=null;}});},nodeRemoveMarkup:function(i){var j=i.node;if(j.tr){g(j.tr).remove();j.tr=null;}this.nodeRemoveChildMarkup(i);},nodeRender:function(A,m,x,r,o){var n,w,t,q,z,k,v,u,B=A.tree,p=A.node,j=A.options,y=!p.parent;if(!o){A.hasCollapsedParents=p.parent&&!p.parent.expanded;}if(!y){if(!p.tr){if(A.hasCollapsedParents){p.debug("nodeRender ignored due to unrendered parent");return;}z=B.rowFragment.firstChild.cloneNode(true);k=d(p);c(k);if(r===true&&o){z.style.display="none";}else{if(x&&A.hasCollapsedParents){z.style.display="none";}}if(!k.tr){c(!k.parent,"prev. row must have a tr, or is system root");B.tbody.appendChild(z);}else{f(k.tr,z);}p.tr=z;if(p.key&&j.generateIds){p.tr.id=j.idPrefix+p.key;}p.tr.ftnode=p;if(j.aria){g(p.tr).attr("aria-labelledby","ftal_"+p.key);}p.span=g("span.fancytree-node",p.tr).get(0);this.nodeRenderTitle(A);if(j.createNode){j.createNode.call(B,{type:"createNode"},A);}}else{if(m){this.nodeRenderTitle(A);}else{this.nodeRenderStatus(A);}}}if(j.renderNode){j.renderNode.call(B,{type:"renderNode"},A);}n=p.children;if(n&&(y||x||p.expanded)){for(t=0,q=n.length;t<q;t++){u=g.extend({},A,{node:n[t]});u.hasCollapsedParents=u.hasCollapsedParents||!p.expanded;this.nodeRender(u,m,x,r,true);}}if(n&&!o){v=p.tr||null;w=B.tbody.firstChild;p.visit(function(l){if(l.tr){if(!l.parent.expanded&&l.tr.style.display!=="none"){l.tr.style.display="none";b(l,false);}if(l.tr.previousSibling!==v){p.debug("_fixOrder: mismatch at node: "+l);var i=v?v.nextSibling:w;B.tbody.insertBefore(l.tr,i);}v=l.tr;}});}},nodeRenderTitle:function(i,l){var m,k=i.node,j=i.options;this._superApply(arguments);if(j.checkbox&&j.table.checkboxColumnIdx!=null){m=g("span.fancytree-checkbox",k.span).detach();g(k.tr).find("td:first").html(m);}if(!k.isRoot()){this.nodeRenderStatus(i);}if(!j.table.customStatus&&k.isStatusNode()){}else{if(j.renderColumns){j.renderColumns.call(i.tree,{type:"renderColumns"},i);}}},nodeRenderStatus:function(j){var i,l=j.node,k=j.options;this._superApply(arguments);g(l.tr).removeClass("fancytree-node");i=(l.getLevel()-1)*k.table.indentation;g(l.span).css({marginLeft:i+"px"});},nodeSetExpanded:function(k,j,m){var i=new g.Deferred(),n=g.extend({},m,{noEvents:true,noAnimation:true});m=m||{};function l(o){j=(j!==false);b(k.node,j);if(o){if(j&&k.options.autoScroll&&!m.noAnimation&&k.node.hasChildren()){k.node.getLastChild().scrollIntoView(true,{topNode:k.node}).always(function(){if(!m.noEvents){k.tree._triggerNodeEvent(j?"expand":"collapse",k);}i.resolveWith(k.node);});}else{if(!m.noEvents){k.tree._triggerNodeEvent(j?"expand":"collapse",k);}i.resolveWith(k.node);}}else{if(!m.noEvents){k.tree._triggerNodeEvent(j?"expand":"collapse",k);}i.rejectWith(k.node);}}this._super(k,j,n).done(function(){l(true);}).fail(function(){l(false);});return i.promise();},nodeSetStatus:function(j,i,m,k){if(i==="ok"){var l=j.node,n=(l.children?l.children[0]:null);if(n&&n.isStatusNode()){g(n.tr).remove();}}return this._superApply(arguments);},treeClear:function(i){this.nodeRemoveChildMarkup(this._makeHookContext(this.rootNode));return this._superApply(arguments);}});}(jQuery,window,document));
/*!
 * jquery.fancytree.themeroller.js
 *
 * Enable jQuery UI ThemeRoller styles.
 * (Extension module for jquery.fancytree.js: https://github.com/mar10/fancytree/)
 *
 * @see http://jqueryui.com/themeroller/
 *
 * Copyright (c) 2008-2015, Martin Wendt (http://wwWendt.de)
 *
 * Released under the MIT license
 * https://github.com/mar10/fancytree/wiki/LicenseInfo
 *
 * @version 2.8.0
 * @date 2015-02-08T17:56
 */
;(function(c,b,a,d){c.ui.fancytree.registerExtension({name:"themeroller",version:"0.0.1",options:{activeClass:"ui-state-active",foccusClass:"ui-state-focus",hoverClass:"ui-state-hover",selectedClass:"ui-state-highlight"},treeInit:function(e){this._superApply(arguments);var f=e.widget.element;if(f[0].nodeName==="TABLE"){f.addClass("ui-widget ui-corner-all");f.find(">thead tr").addClass("ui-widget-header");f.find(">tbody").addClass("ui-widget-conent");}else{f.addClass("ui-widget ui-widget-content ui-corner-all");}f.delegate(".fancytree-node","mouseenter mouseleave",function(i){var h=c.ui.fancytree.getNode(i.target),g=(i.type==="mouseenter");h.debug("hover: "+g);c(h.span).toggleClass("ui-state-hover ui-corner-all",g);});},treeDestroy:function(e){this._superApply(arguments);e.widget.element.removeClass("ui-widget ui-widget-content ui-corner-all");},nodeRenderStatus:function(e){var g=e.node,f=c(g.span);this._superApply(arguments);f.toggleClass("ui-state-active",g.isActive());f.toggleClass("ui-state-focus",g.hasFocus());f.toggleClass("ui-state-highlight",g.isSelected());}});}(jQuery,window,document));
/*!
 * jquery.fancytree.wide.js
 * Support for 100% wide selection bars.
 * (Extension module for jquery.fancytree.js: https://github.com/mar10/fancytree/)
 *
 * Copyright (c) 2008-2015, Martin Wendt (http://wwWendt.de)
 *
 * Released under the MIT license
 * https://github.com/mar10/fancytree/wiki/LicenseInfo
 *
 * @version 2.8.0
 * @date 2015-02-08T17:56
 */
;(function(d,c,a,f){var e=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function g(k,h){k="fancytree-style-"+k;var j=d("#"+k);if(!h){j.remove();return null;}if(!j.length){j=d("<style />").attr("id",k).addClass("fancytree-style").prop("type","text/css").appendTo("head");}try{j.html(h);}catch(i){j[0].styleSheet.cssText=h;}return j;}function b(h,p,m,j,o){var k,l="#"+h+" span.fancytree-level-",n=[];for(k=0;k<p;k++){n.push(l+(k+1)+" span.fancytree-title { padding-left: "+(k*m+j)+o+"; }");}n.push("#"+h+" div.ui-effects-wrapper ul li span.fancytree-title { padding-left: 3px; position: static; width: auto; }");return n.join("\n");}d.ui.fancytree.registerExtension({name:"wide",version:"0.0.3",options:{iconWidth:null,iconSpacing:null,levelOfs:null},treeCreate:function(t){this._superApply(arguments);this.$container.addClass("fancytree-ext-wide");var n,i,r,u,h,m=t.options.wide,p=d("<li id='fancytreeTemp'><span class='fancytree-node'><span class='fancytree-icon' /><span class='fancytree-title' /></span><ul />").appendTo(t.tree.$container),k=p.find(".fancytree-icon"),j=p.find("ul"),q=m.iconSpacing||k.css("margin-left"),o=m.iconWidth||k.css("width"),l=m.levelOfs||j.css("padding-left");p.remove();r=q.match(e)[2];q=parseFloat(q,10);u=o.match(e)[2];o=parseFloat(o,10);h=l.match(e)[2];if(r!==u||h!==u){d.error("iconWidth, iconSpacing, and levelOfs must have the same css measure unit");}this._local.measureUnit=u;this._local.levelOfs=parseFloat(l);this._local.lineOfs=(t.options.checkbox?3:2)*(o+q)+q;this._local.maxDepth=10;n=this.$container.uniqueId().attr("id");i=b(n,this._local.maxDepth,this._local.levelOfs,this._local.lineOfs,this._local.measureUnit);g(n,i);},treeDestroy:function(h){g(this.$container.attr("id"),null);return this._superApply(arguments);},nodeRenderStatus:function(i){var h,k,j,l=i.node,m=l.getLevel();j=this._superApply(arguments);if(m>this._local.maxDepth){h=this.$container.attr("id");this._local.maxDepth*=2;l.debug("Define global ext-wide css up to level "+this._local.maxDepth);k=b(h,this._local.maxDepth,this._local.levelOfs,this._local.lineOfs,this._local.measureUnit);g(h,k);}d(l.span).addClass("fancytree-level-"+m);return j;}});}(jQuery,window,document));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a);}else{if(typeof exports==="object"){a(require("jquery"));}else{a(window.jQuery);}}}(function(b){var a=0;b.ajaxTransport("iframe",function(d){if(d.async){var c=d.initialIframeSrc||"javascript:false;",f,e,g;return{send:function(h,i){f=b('<form style="display:none;"></form>');f.attr("accept-charset",d.formAcceptCharset);g=/\?/.test(d.url)?"&":"?";if(d.type==="DELETE"){d.url=d.url+g+"_method=DELETE";d.type="POST";}else{if(d.type==="PUT"){d.url=d.url+g+"_method=PUT";d.type="POST";}else{if(d.type==="PATCH"){d.url=d.url+g+"_method=PATCH";d.type="POST";}}}a+=1;e=b('<iframe src="'+c+'" name="iframe-transport-'+a+'"></iframe>').bind("load",function(){var j,k=b.isArray(d.paramName)?d.paramName:[d.paramName];e.unbind("load").bind("load",function(){var l;try{l=e.contents();if(!l.length||!l[0].firstChild){throw new Error();}}catch(m){l=undefined;}i(200,"success",{iframe:l});b('<iframe src="'+c+'"></iframe>').appendTo(f);window.setTimeout(function(){f.remove();},0);});f.prop("target",e.prop("name")).prop("action",d.url).prop("method",d.type);if(d.formData){b.each(d.formData,function(l,m){b('<input type="hidden"/>').prop("name",m.name).val(m.value).appendTo(f);});}if(d.fileInput&&d.fileInput.length&&d.type==="POST"){j=d.fileInput.clone();d.fileInput.after(function(l){return j[l];});if(d.paramName){d.fileInput.each(function(l){b(this).prop("name",k[l]||d.paramName);});}f.append(d.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data");d.fileInput.removeAttr("form");}f.submit();if(j&&j.length){d.fileInput.each(function(m,l){var n=b(j[m]);b(l).prop("name",n.prop("name")).attr("form",n.attr("form"));n.replaceWith(l);});}});f.append(e).appendTo(document.body);},abort:function(){if(e){e.unbind("load").prop("src",c);}if(f){f.remove();}}};}});b.ajaxSetup({converters:{"iframe text":function(c){return c&&b(c[0].body).text();},"iframe json":function(c){return c&&b.parseJSON(b(c[0].body).text());},"iframe html":function(c){return c&&b(c[0].body).html();},"iframe xml":function(c){var d=c&&c[0];return d&&b.isXMLDoc(d)?d:b.parseXML((d.XMLDocument&&d.XMLDocument.xml)||b(d.body).html());},"iframe script":function(c){return c&&b.globalEval(b(c[0].body).text());}}});}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","jquery.ui.widget"],a);}else{if(typeof exports==="object"){a(require("jquery"),require("./vendor/jquery.ui.widget"));}else{a(window.jQuery);}}}(function(b){b.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||b('<input type="file">').prop("disabled"));b.support.xhrFileUpload=!!(window.ProgressEvent&&window.FileReader);b.support.xhrFormDataFileUpload=!!window.FormData;b.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);function a(c){var d=c==="dragover";return function(g){g.dataTransfer=g.originalEvent&&g.originalEvent.dataTransfer;var f=g.dataTransfer;if(f&&b.inArray("Files",f.types)!==-1&&this._trigger(c,b.Event(c,{delegatedEvent:g}))!==false){g.preventDefault();if(d){f.dropEffect="copy";}}};}b.widget("blueimp.fileupload",{options:{dropZone:b(document),pasteZone:undefined,fileInput:undefined,replaceFileInput:true,paramName:undefined,singleFileUploads:true,limitMultiFileUploads:undefined,limitMultiFileUploadSize:undefined,limitMultiFileUploadSizeOverhead:512,sequentialUploads:false,limitConcurrentUploads:undefined,forceIframeTransport:false,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:true,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:true,progressInterval:100,bitrateInterval:500,autoUpload:true,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(d,c){d=this.messages[d]||d.toString();if(c){b.each(c,function(e,f){d=d.replace("{"+e+"}",f);});}return d;},formData:function(c){return c.serializeArray();},add:function(d,c){if(d.isDefaultPrevented()){return false;}if(c.autoUpload||(c.autoUpload!==false&&b(this).fileupload("option","autoUpload"))){c.process().done(function(){c.submit();});}},processData:false,contentType:false,cache:false},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:b.support.blobSlice&&function(){var c=this.slice||this.webkitSlice||this.mozSlice;return c.apply(this,arguments);},_BitrateTimer:function(){this.timestamp=((Date.now)?Date.now():(new Date()).getTime());this.loaded=0;this.bitrate=0;this.getBitrate=function(e,d,c){var f=e-this.timestamp;if(!this.bitrate||!c||f>c){this.bitrate=(d-this.loaded)*(1000/f)*8;this.loaded=d;this.timestamp=e;}return this.bitrate;};},_isXHRUpload:function(c){return !c.forceIframeTransport&&((!c.multipart&&b.support.xhrFileUpload)||b.support.xhrFormDataFileUpload);},_getFormData:function(c){var d;if(b.type(c.formData)==="function"){return c.formData(c.form);}if(b.isArray(c.formData)){return c.formData;}if(b.type(c.formData)==="object"){d=[];b.each(c.formData,function(e,f){d.push({name:e,value:f});});return d;}return[];},_getTotal:function(d){var c=0;b.each(d,function(e,f){c+=f.size||1;});return c;},_initProgressObject:function(d){var c={loaded:0,total:0,bitrate:0};if(d._progress){b.extend(d._progress,c);}else{d._progress=c;}},_initResponseObject:function(c){var d;if(c._response){for(d in c._response){if(c._response.hasOwnProperty(d)){delete c._response[d];}}}else{c._response={};}},_onProgress:function(g,f){if(g.lengthComputable){var d=((Date.now)?Date.now():(new Date()).getTime()),c;if(f._time&&f.progressInterval&&(d-f._time<f.progressInterval)&&g.loaded!==g.total){return;}f._time=d;c=Math.floor(g.loaded/g.total*(f.chunkSize||f._progress.total))+(f.uploadedBytes||0);this._progress.loaded+=(c-f._progress.loaded);this._progress.bitrate=this._bitrateTimer.getBitrate(d,this._progress.loaded,f.bitrateInterval);f._progress.loaded=f.loaded=c;f._progress.bitrate=f.bitrate=f._bitrateTimer.getBitrate(d,c,f.bitrateInterval);this._trigger("progress",b.Event("progress",{delegatedEvent:g}),f);this._trigger("progressall",b.Event("progressall",{delegatedEvent:g}),this._progress);}},_initProgressListener:function(c){var d=this,e=c.xhr?c.xhr():b.ajaxSettings.xhr();if(e.upload){b(e.upload).bind("progress",function(f){var g=f.originalEvent;f.lengthComputable=g.lengthComputable;f.loaded=g.loaded;f.total=g.total;d._onProgress(f,c);});c.xhr=function(){return e;};}},_isInstanceOf:function(c,d){return Object.prototype.toString.call(d)==="[object "+c+"]";},_initXHRData:function(d){var f=this,h,e=d.files[0],c=d.multipart||!b.support.xhrFileUpload,g=b.type(d.paramName)==="array"?d.paramName[0]:d.paramName;d.headers=b.extend({},d.headers);if(d.contentRange){d.headers["Content-Range"]=d.contentRange;}if(!c||d.blob||!this._isInstanceOf("File",e)){d.headers["Content-Disposition"]='attachment; filename="'+encodeURI(e.name)+'"';}if(!c){d.contentType=e.type||"application/octet-stream";d.data=d.blob||e;}else{if(b.support.xhrFormDataFileUpload){if(d.postMessage){h=this._getFormData(d);if(d.blob){h.push({name:g,value:d.blob});}else{b.each(d.files,function(i,j){h.push({name:(b.type(d.paramName)==="array"&&d.paramName[i])||g,value:j});});}}else{if(f._isInstanceOf("FormData",d.formData)){h=d.formData;}else{h=new FormData();b.each(this._getFormData(d),function(i,j){h.append(j.name,j.value);});}if(d.blob){h.append(g,d.blob,e.name);}else{b.each(d.files,function(i,j){if(f._isInstanceOf("File",j)||f._isInstanceOf("Blob",j)){h.append((b.type(d.paramName)==="array"&&d.paramName[i])||g,j,j.uploadName||j.name);}});}}d.data=h;}}d.blob=null;},_initIframeSettings:function(c){var d=b("<a></a>").prop("href",c.url).prop("host");c.dataType="iframe "+(c.dataType||"");c.formData=this._getFormData(c);if(c.redirect&&d&&d!==location.host){c.formData.push({name:c.redirectParamName||"redirect",value:c.redirect});}},_initDataSettings:function(c){if(this._isXHRUpload(c)){if(!this._chunkedUpload(c,true)){if(!c.data){this._initXHRData(c);}this._initProgressListener(c);}if(c.postMessage){c.dataType="postmessage "+(c.dataType||"");}}else{this._initIframeSettings(c);}},_getParamName:function(c){var d=b(c.fileInput),e=c.paramName;if(!e){e=[];d.each(function(){var f=b(this),g=f.prop("name")||"files[]",h=(f.prop("files")||[1]).length;while(h){e.push(g);h-=1;}});if(!e.length){e=[d.prop("name")||"files[]"];}}else{if(!b.isArray(e)){e=[e];}}return e;},_initFormSettings:function(c){if(!c.form||!c.form.length){c.form=b(c.fileInput.prop("form"));if(!c.form.length){c.form=b(this.options.fileInput.prop("form"));}}c.paramName=this._getParamName(c);if(!c.url){c.url=c.form.prop("action")||location.href;}c.type=(c.type||(b.type(c.form.prop("method"))==="string"&&c.form.prop("method"))||"").toUpperCase();if(c.type!=="POST"&&c.type!=="PUT"&&c.type!=="PATCH"){c.type="POST";}if(!c.formAcceptCharset){c.formAcceptCharset=c.form.attr("accept-charset");}},_getAJAXSettings:function(d){var c=b.extend({},this.options,d);this._initFormSettings(c);this._initDataSettings(c);return c;},_getDeferredState:function(c){if(c.state){return c.state();}if(c.isResolved()){return"resolved";}if(c.isRejected()){return"rejected";}return"pending";},_enhancePromise:function(c){c.success=c.done;c.error=c.fail;c.complete=c.always;return c;},_getXHRPromise:function(f,e,d){var c=b.Deferred(),g=c.promise();e=e||this.options.context||g;if(f===true){c.resolveWith(e,d);}else{if(f===false){c.rejectWith(e,d);}}g.abort=c.promise;return this._enhancePromise(g);},_addConvenienceMethods:function(g,f){var d=this,c=function(e){return b.Deferred().resolveWith(d,e).promise();};f.process=function(h,e){if(h||e){f._processQueue=this._processQueue=(this._processQueue||c([this])).pipe(function(){if(f.errorThrown){return b.Deferred().rejectWith(d,[f]).promise();}return c(arguments);}).pipe(h,e);}return this._processQueue||c([this]);};f.submit=function(){if(this.state()!=="pending"){f.jqXHR=this.jqXHR=(d._trigger("submit",b.Event("submit",{delegatedEvent:g}),this)!==false)&&d._onSend(g,this);}return this.jqXHR||d._getXHRPromise();};f.abort=function(){if(this.jqXHR){return this.jqXHR.abort();}this.errorThrown="abort";d._trigger("fail",null,this);return d._getXHRPromise(false);};f.state=function(){if(this.jqXHR){return d._getDeferredState(this.jqXHR);}if(this._processQueue){return d._getDeferredState(this._processQueue);}};f.processing=function(){return !this.jqXHR&&this._processQueue&&d._getDeferredState(this._processQueue)==="pending";};f.progress=function(){return this._progress;};f.response=function(){return this._response;};},_getUploadedBytes:function(e){var c=e.getResponseHeader("Range"),f=c&&c.split("-"),d=f&&f.length>1&&parseInt(f[1],10);return d&&d+1;},_chunkedUpload:function(n,h){n.uploadedBytes=n.uploadedBytes||0;var g=this,e=n.files[0],f=e.size,c=n.uploadedBytes,d=n.maxChunkSize||f,j=this._blobSlice,k=b.Deferred(),m=k.promise(),i,l;if(!(this._isXHRUpload(n)&&j&&(c||d<f))||n.data){return false;}if(h){return true;}if(c>=f){e.error=n.i18n("uploadedBytes");return this._getXHRPromise(false,n.context,[null,"error",e.error]);}l=function(){var q=b.extend({},n),p=q._progress.loaded;q.blob=j.call(e,c,c+d,e.type);q.chunkSize=q.blob.size;q.contentRange="bytes "+c+"-"+(c+q.chunkSize-1)+"/"+f;g._initXHRData(q);g._initProgressListener(q);i=((g._trigger("chunksend",null,q)!==false&&b.ajax(q))||g._getXHRPromise(false,q.context)).done(function(o,t,r){c=g._getUploadedBytes(r)||(c+q.chunkSize);if(p+q.chunkSize-q._progress.loaded){g._onProgress(b.Event("progress",{lengthComputable:true,loaded:c-q.uploadedBytes,total:c-q.uploadedBytes}),q);}n.uploadedBytes=q.uploadedBytes=c;q.result=o;q.textStatus=t;q.jqXHR=r;g._trigger("chunkdone",null,q);g._trigger("chunkalways",null,q);if(c<f){l();}else{k.resolveWith(q.context,[o,t,r]);}}).fail(function(o,t,r){q.jqXHR=o;q.textStatus=t;q.errorThrown=r;g._trigger("chunkfail",null,q);g._trigger("chunkalways",null,q);k.rejectWith(q.context,[o,t,r]);});};this._enhancePromise(m);m.abort=function(){return i.abort();};l();return m;},_beforeSend:function(d,c){if(this._active===0){this._trigger("start");this._bitrateTimer=new this._BitrateTimer();this._progress.loaded=this._progress.total=0;this._progress.bitrate=0;}this._initResponseObject(c);this._initProgressObject(c);c._progress.loaded=c.loaded=c.uploadedBytes||0;c._progress.total=c.total=this._getTotal(c.files)||1;c._progress.bitrate=c.bitrate=0;this._active+=1;this._progress.loaded+=c.loaded;this._progress.total+=c.total;},_onDone:function(c,h,g,e){var f=e._progress.total,d=e._response;if(e._progress.loaded<f){this._onProgress(b.Event("progress",{lengthComputable:true,loaded:f,total:f}),e);}d.result=e.result=c;d.textStatus=e.textStatus=h;d.jqXHR=e.jqXHR=g;this._trigger("done",null,e);},_onFail:function(e,g,f,d){var c=d._response;if(d.recalculateProgress){this._progress.loaded-=d._progress.loaded;this._progress.total-=d._progress.total;}c.jqXHR=d.jqXHR=e;c.textStatus=d.textStatus=g;c.errorThrown=d.errorThrown=f;this._trigger("fail",null,d);},_onAlways:function(e,f,d,c){this._trigger("always",null,c);},_onSend:function(i,g){if(!g.submit){this._addConvenienceMethods(i,g);}var h=this,k,c,j,d,l=h._getAJAXSettings(g),f=function(){h._sending+=1;l._bitrateTimer=new h._BitrateTimer();k=k||(((c||h._trigger("send",b.Event("send",{delegatedEvent:i}),l)===false)&&h._getXHRPromise(false,l.context,c))||h._chunkedUpload(l)||b.ajax(l)).done(function(e,n,m){h._onDone(e,n,m,l);}).fail(function(e,n,m){h._onFail(e,n,m,l);}).always(function(n,o,m){h._onAlways(n,o,m,l);h._sending-=1;h._active-=1;if(l.limitConcurrentUploads&&l.limitConcurrentUploads>h._sending){var e=h._slots.shift();while(e){if(h._getDeferredState(e)==="pending"){e.resolve();break;}e=h._slots.shift();}}if(h._active===0){h._trigger("stop");}});return k;};this._beforeSend(i,l);if(this.options.sequentialUploads||(this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending)){if(this.options.limitConcurrentUploads>1){j=b.Deferred();this._slots.push(j);d=j.pipe(f);}else{this._sequence=this._sequence.pipe(f,f);d=this._sequence;}d.abort=function(){c=[undefined,"abort","abort"];if(!k){if(j){j.rejectWith(l.context,c);}return f();}return k.abort();};return this._enhancePromise(d);}return f();},_onAdd:function(q,m){var p=this,w=true,v=b.extend({},this.options,m),f=m.files,t=f.length,g=v.limitMultiFileUploads,k=v.limitMultiFileUploadSize,u=v.limitMultiFileUploadSizeOverhead,o=0,n=this._getParamName(v),d,c,r,l,h=0;if(k&&(!t||f[0].size===undefined)){k=undefined;}if(!(v.singleFileUploads||g||k)||!this._isXHRUpload(v)){r=[f];d=[n];}else{if(!(v.singleFileUploads||k)&&g){r=[];d=[];for(l=0;l<t;l+=g){r.push(f.slice(l,l+g));c=n.slice(l,l+g);if(!c.length){c=n;}d.push(c);}}else{if(!v.singleFileUploads&&k){r=[];d=[];for(l=0;l<t;l=l+1){o+=f[l].size+u;if(l+1===t||((o+f[l+1].size+u)>k)||(g&&l+1-h>=g)){r.push(f.slice(h,l+1));c=n.slice(h,l+1);if(!c.length){c=n;}d.push(c);h=l+1;o=0;}}}else{d=n;}}}m.originalFiles=f;b.each(r||f,function(e,i){var j=b.extend({},m);j.files=r?i:[i];j.paramName=d[e];p._initResponseObject(j);p._initProgressObject(j);p._addConvenienceMethods(q,j);w=p._trigger("add",b.Event("add",{delegatedEvent:q}),j);return w;});return w;},_replaceFileInput:function(e){var c=e.fileInput,d=c.clone(true);e.fileInputClone=d;b("<form></form>").append(d)[0].reset();c.after(d).detach();b.cleanData(c.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(f,g){if(g===c[0]){return d[0];}return g;});if(c[0]===this.element[0]){this.element=d;}},_handleFileTreeEntry:function(h,j){var e=this,i=b.Deferred(),d=function(l){if(l&&!l.entry){l.entry=h;}i.resolve([l]);},f=function(l){e._handleFileTreeEntries(l,j+h.name+"/").done(function(m){i.resolve(m);}).fail(d);},g=function(){k.readEntries(function(l){if(!l.length){f(c);}else{c=c.concat(l);g();}},d);},k,c=[];j=j||"";if(h.isFile){if(h._file){h._file.relativePath=j;i.resolve(h._file);}else{h.file(function(l){l.relativePath=j;i.resolve(l);},d);}}else{if(h.isDirectory){k=h.createReader();g();}else{i.resolve([]);}}return i.promise();},_handleFileTreeEntries:function(c,e){var d=this;return b.when.apply(b,b.map(c,function(f){return d._handleFileTreeEntry(f,e);})).pipe(function(){return Array.prototype.concat.apply([],arguments);});},_getDroppedFiles:function(d){d=d||{};var c=d.items;if(c&&c.length&&(c[0].webkitGetAsEntry||c[0].getAsEntry)){return this._handleFileTreeEntries(b.map(c,function(f){var e;if(f.webkitGetAsEntry){e=f.webkitGetAsEntry();if(e){e._file=f.getAsFile();}return e;}return f.getAsEntry();}));}return b.Deferred().resolve(b.makeArray(d.files)).promise();},_getSingleFileInputFiles:function(e){e=b(e);var c=e.prop("webkitEntries")||e.prop("entries"),d,f;if(c&&c.length){return this._handleFileTreeEntries(c);}d=b.makeArray(e.prop("files"));if(!d.length){f=e.prop("value");if(!f){return b.Deferred().resolve([]).promise();}d=[{name:f.replace(/^.*\\/,"")}];}else{if(d[0].name===undefined&&d[0].fileName){b.each(d,function(g,h){h.name=h.fileName;h.size=h.fileSize;});}}return b.Deferred().resolve(d).promise();},_getFileInputFiles:function(c){if(!(c instanceof b)||c.length===1){return this._getSingleFileInputFiles(c);}return b.when.apply(b,b.map(c,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments);});},_onChange:function(f){var c=this,d={fileInput:b(f.target),form:b(f.target.form)};this._getFileInputFiles(d.fileInput).always(function(e){d.files=e;if(c.options.replaceFileInput){c._replaceFileInput(d);}if(c._trigger("change",b.Event("change",{delegatedEvent:f}),d)!==false){c._onAdd(f,d);}});},_onPaste:function(f){var c=f.originalEvent&&f.originalEvent.clipboardData&&f.originalEvent.clipboardData.items,d={files:[]};if(c&&c.length){b.each(c,function(e,h){var g=h.getAsFile&&h.getAsFile();if(g){d.files.push(g);}});if(this._trigger("paste",b.Event("paste",{delegatedEvent:f}),d)!==false){this._onAdd(f,d);}}},_onDrop:function(g){g.dataTransfer=g.originalEvent&&g.originalEvent.dataTransfer;var c=this,f=g.dataTransfer,d={};if(f&&f.files&&f.files.length){g.preventDefault();this._getDroppedFiles(f).always(function(e){d.files=e;if(c._trigger("drop",b.Event("drop",{delegatedEvent:g}),d)!==false){c._onAdd(g,d);}});}},_onDragOver:a("dragover"),_onDragEnter:a("dragenter"),_onDragLeave:a("dragleave"),_initEventHandlers:function(){if(this._isXHRUpload(this.options)){this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave});this._on(this.options.pasteZone,{paste:this._onPaste});}if(b.support.fileInput){this._on(this.options.fileInput,{change:this._onChange});}},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change");},_setOption:function(c,d){var e=b.inArray(c,this._specialOptions)!==-1;if(e){this._destroyEventHandlers();}this._super(c,d);if(e){this._initSpecialOptions();this._initEventHandlers();}},_initSpecialOptions:function(){var c=this.options;if(c.fileInput===undefined){c.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]');}else{if(!(c.fileInput instanceof b)){c.fileInput=b(c.fileInput);}}if(!(c.dropZone instanceof b)){c.dropZone=b(c.dropZone);}if(!(c.pasteZone instanceof b)){c.pasteZone=b(c.pasteZone);}},_getRegExp:function(e){var d=e.split("/"),c=d.pop();d.shift();return new RegExp(d.join("/"),c);},_isRegExpOption:function(c,d){return c!=="url"&&b.type(d)==="string"&&/^\/.*\/[igm]{0,3}$/.test(d);},_initDataAttributes:function(){var d=this,c=this.options,f=b(this.element[0].cloneNode(false)),e=f.data();f.remove();b.each(e,function(g,h){var i="data-"+g.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();if(f.attr(i)){if(d._isRegExpOption(g,h)){h=d._getRegExp(h);}c[g]=h;}});},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(true);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers();},active:function(){return this._active;},progress:function(){return this._progress;},add:function(d){var c=this;if(!d||this.options.disabled){return;}if(d.fileInput&&!d.files){this._getFileInputFiles(d.fileInput).always(function(e){d.files=e;c._onAdd(null,d);});}else{d.files=b.makeArray(d.files);this._onAdd(null,d);}},send:function(g){if(g&&!this.options.disabled){if(g.fileInput&&!g.files){var e=this,c=b.Deferred(),h=c.promise(),d,f;h.abort=function(){f=true;if(d){return d.abort();}c.reject(null,"abort","abort");return h;};this._getFileInputFiles(g.fileInput).always(function(i){if(f){return;}if(!i.length){c.reject();return;}g.files=i;d=e._onSend(null,g);d.then(function(j,l,k){c.resolve(j,l,k);},function(j,l,k){c.reject(j,l,k);});});return this._enhancePromise(h);}g.files=b.makeArray(g.files);if(g.files.length){return this._onSend(null,g);}}return this._getXHRPromise(false,g&&g.context);}});}));