<style>
.ui-dialog-content .aprv_party_info {
	position: relative;
	height: 100%;
	width: 100%;
	border-width: 2px 0 1px 0;
	border-color: #333 #000 #bfbfbf #000;
	border-style: solid;
	box-sizing: border-box;
	overflow-y:auto;
} 
.ui-dialog-content .aprv_party_info dl {

}
.ui-dialog-content .aprv_party_info dt {
	float:clear;
	float:left;
	width : 70px;
	font-size: 13px;
	padding:8px 0 0 8px;
}
.ui-dialog-content .aprv_party_info dd {
	padding:7px 0 7px 80px;
	border-bottom: 1px solid #f2f2f2;
}
.ui-dialog-content .aprv_party_info dd ul { padding:0; margin:0; }
.ui-dialog-content .aprv_party_info dd li {list-style: none; margin-top: 7px;}
.ui-dialog-content .aprv_party_info dd li:first-child {margin-top: 0;}
.ui-dialog-content .aprv_party_info dd li input[type="checkbox"],
.ui-dialog-content .aprv_party_info dd li .ep-epawareness { margin-right: 10px;}
.ui-dialog-content .aprv_party_info dd li input[type="checkbox"] { position: relative; vertical-align: middle; }
  
</style>
<div class="frm_wrap frm_page_scroll">
	<div class="formpage ">
		<form class="">			
			<fieldset class="aprv_partyinfo">
				<legend>blockui</legend>
				<table class="table-form">
				<colgroup><col width="150px"/><col width="150px" /><co /></colgroup>
				<tr>
					<th class="first">결재관련자</th>
					<td><span class="btn_1" /></td>
					<td>...</td>
				</tr>							
				</table>
				<span class="source">source</span>
				<pre id="src"></pre>
<script>
	$ep
	.wait(function() {
		$("fieldset.aprv_partyinfo .btn_1").epbutton({
			title : "결재관련자"
			,click : function(){
				aprv_comm.partyInfo([
					{
						title : "수신"
						,dataset : [
						    {
								code: "shbang",ename: "Bang SangHyuk"
								,eorgname: "Business Partner",lang: "ko"
								,name: "방상혁",notesid: "CN=Sanghyuk Bang/OU=shbang/O=APG"
								,orgcode: "90000001",orgname: "협력업체",type: "P"
							}
							,{
								code: "hgyeo"
								,ename: "Yeo HyungGoo"
								,eorgname: "Business Partner"
								,lang: "ko"
								,name: "여형구"
								,notesid: "CN=Yeo HyungGoo/OU=hgyeo/O=APG"
								,orgcode: "90000001"
								,orgname: "협력업체"
								,type: "P"
							}
							,{
								empno: "AC912188"
								,ename: "Lee DongGeol"
								,eorgname: "Business Partner"
								,lang: "ko"
								,name: "이동걸"
								,notesid: "CN=Lee DongGeol/OU=dongglee/O=APG"
								,orgcode: "90000001"
								,orgname: "협력업체"
								,type: "P"
							}
						]
					}
					,{
						title : "참조"
						,dataset : [
						    {
								empno: "AC912795"
								,ename: "Moon HoSung"
								,eorgname: "Business Partner"
								,lang: "ko"
								,name: "문호성"
								,notesid: "CN=Moon HoSung/OU=moonhs/O=APG"
								,orgcode: "90000001"
								,orgname: "협력업체"
								,type: "P"
							}							
						]
					}
					                
				],"devaphqapp");
			}
		});
		
		
		function aprv_comm() {}
		$ep.loadLangPack("approval").wait(function() {$ep.inheritStatic(aprv_comm, "APPROVAL", "approval");});
		
		
		aprv_comm.partyInfo = function(info,server) {
			var _info = info,_server = server;
			$ep.ui.dialog({
				title : "결재관련자"
				,height : 500,width: 500
				,content : {html : '<div class="aprv_party_info" />'}
				,buttons : [
				   	{ 
				   		text : "다자간채팅"	
				   		,click : function() {
				   			var _arr = [];
				   			$("input[name=notesid]:checkbox:checked",this).each(function() {$.inArray($(this).val(),_arr) == -1  && _arr.push($(this).val());	});
				   			$ep.util.stproxy.chat(_arr);				   			
				   		}
					}
				   	,{
				   		text : "전자회의"
				   		,click : function() {
				   			var _arr = [];
				   			$("input[name=notesid]:checkbox:checked",this).each(function() {$.inArray($(this).val(),_arr) == -1  && _arr.push($(this).val());	});
				   			if(_arr.length == 0) {return;} 
				   			var _uri = $.CURI((_server ? "/"+_server : "") +"/ngw/core/lib.nsf/invitemeet?readform",{
				   				userlist : _arr.join(";")
				   			}).encode();
				   			$.winOpen(_uri.url,"",{width:450,height: 550});				   			
				   		}
				   	}
				   	,{	text : "닫기",highlight : true	,click : function() {$(this).epdialog("close")}}
				]
				,complete : function() {
					var _content = $(".aprv_party_info",this);
					var _dd = '<dl>';
					$.each(_info,function(idx,d) {
						d.title && (_dd += ('<dt>' + d.title + '</dt>'));
						d.dataset && (_dd += '<dd><ul>') && $.each(d.dataset, function(_idx,_d) {
							_dd += '<li>'
								+ '<input type="checkbox" name="notesid" value="'+_d.notesid + '" /><span class="awareness" uid="'+ _d.notesid +'" />'
								+ '<span>'
								+ $ep.util.patternCompletion($ep.lang() == _d.lang || !_d.lang || !_d.ename ? "{name}[ / {orgname}]" : "{ename}[ / {eorgname}]",_d) 
								+ '</span></li>';							
						});
						d.dataset && (_dd += '</ul></dd>');
					});
					_dd += '</dl>';
					$(_dd).appendTo(_content);
					$(".awareness",_content).epawareness({
						hidemail : true
						,classes : "organlist"
					});
				}
			},aprv_comm);	
		};
		
	});
</script>
			</fieldset>
		</form>
	</div>
	

</div>
 <script>
(function(){
	$("fieldset .source").on("click", function(e) {
		var _fieldset = $(e.target).closest("fieldset")
			,_src = $("#src",_fieldset);
		if($(e.target).hasClass("open")) {_src.empty();$(e.target).removeClass("open");return;}
		_src.html($("script",_fieldset).html().replace(/</g,"&lt;").replace(/>/g,"&gt;"));
		$(e.target).addClass("open");
	});
})();
</script> 
 