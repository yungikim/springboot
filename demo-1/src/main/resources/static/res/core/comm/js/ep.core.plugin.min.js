(function(){var a=typeof $ep==="undefined"||function(){};(function(){$.widget("ep.epviewlist",{version:"1.11.1",widgetEventPrefix:"epviewlist",options:{column:null,dataset:null,level:0},_destroy:function(){this.widget().empty().removeClass(this.widgetFullName);this.elements=null;delete this.elements;},elements:{wrap:null,head:null,body:null,data:null},_setOption:function(b,c){$.Widget.prototype._setOption.apply(this,arguments);return this;},_setOptions:function(b){$.Widget.prototype._setOption.apply(this,b);return this;},_create:function(){this.element.addClass("ep-widget "+this.widgetFullName);this._makeElement();if(this.options.hideheader!==true){this._initHeader();}if(this.options.dataset){this.addData(this.options.dataset);}this.element.has(".viewlist-wrap").size()==0&&this.element.html(this.elements.warp);},_makeElement:function(){var d=$(".viewlist-wrap",this.element).size()>0?$(".viewlist-wrap",this.element):$('<div class="viewlist-wrap" />'),b=this.options.hideheader===true?null:$('<div class="viewlist-head"><table class="viewlist-head-table" /></div>').appendTo(d),e=$('<div class="viewlist-body"><table class="viewlist-body-table"><tbody /></table></div>').appendTo(d),c=$(".viewlist-body-table tbody",e);this.elements={warp:d,head:b,body:e,data:c};},_selectable:function(f,e,d){var b=this,c="<span />";switch(d.type){case"checkbox":e.addClass("selectable");d.css=d.css||{width:"20px"};c=$('<input type="checkbox" name="'+(f?"checkall":"check")+'">');c.on("click",function(g){g.stopPropagation();if(f===true){b.selectall($(this).prop("checked"));}});break;case"radio":e.addClass("selectable");d.css=d.css||{width:"20px"};if(f===false){c=$('<input type="radio" name="check">');c.on("click",function(g){g.stopPropagation();});}break;}return $(c);},_initHeader:function(){var g=this,i=this.options.column,e=this.elements.head,b=$(".viewlist-head-table",e),h=$('<thead><tr class="viewlist-head-tr" /></thead>').appendTo(b),c=$("tr",h),j=g.options.query,f=j?j.sortcolumn:"",d=j?j.sortorder:"";if(!i){return;}$.each(i,function(m,q){var n=$('<th class="column header" id="'+m+'"/>'),p=q,l=m=="selectable"?g._selectable(true,n,typeof p==="string"?(p={type:q}):p):q.title?(typeof p.title==="function"?p.title.call(g.element,n,p):p.title):"";n.html(l);if(p.sortable){var k=n.wrapInner('<span class="sortable" />').children(".sortable");if(typeof k==="object"){if(p.sortable===true){p.sortable={ascending:true,descending:true};}if(p.sortable.ascending===true){k.append('<span class="ep-icon arrow-up'+(f==m&&d=="ascending"?" on":" off")+'"/>');}if(p.sortable.descending===true){k.append('<span class="ep-icon arrow-down'+(f==m&&d=="descending"?" on":" off")+'"/>');}if(p.sortable.descending&&p.sortable.ascending){k.addClass("both");}}}n.on("click",function(t){var o=$(t.target),r=o.closest("th.column.header");if(r.size()==0){return;}if(r.is(".selectable")){return;}var s=r.attr("id"),u=o.is(".arrow-up")?"ascending":o.is(".arrow-down")?"descending":"header";g._trigger("clickheader",null,[s,u,r]);});p.hidewidth===true&&n.addClass("dsp_none");if(p.hcss){n.css(p.hcss);}else{if(p.css){n.css(p.css);}}if(p.hclasses){n.addClass(p.hclasses);}else{if(p.classes){n.addClass(p.classes);}}n.appendTo(c);});$(".column.data:last",c).addClass("last");},_formatter:function(j,l,e,g,m){var h=e.type||"normal";switch(h){case"normal":return g;break;case"isodate":if(!g){return;}var n=typeof g==="string"&&g?g.isoToDate():new Date(),i=new Date(),k=i.getDate()==n.getDate()&&i.getMonth()==n.getMonth()&&i.getFullYear()==n.getFullYear(),b=e.dateformat=="fullDateTime"?k?"today":"beforeDayTime":e.dateformat=="fullDate"?k?"today":"beforeDay":e.dateformat;return n.format(b);break;case"multilevel":var f=parseInt(m["@indent"],10),c=g,d=this.options.level;if(f<=d){return g;}if(!isNaN(f)){l.addClass("rescol");c='<span class="multilevel" style="margin-left:'+(20*(f-1)-(20*d))+'px;" />'+c;}return c;break;case"date":break;case"userinfo":if(!g.trim()){return;}if(!$ep.ui||!$ep.ui.makeUserInfo){return g;}$ep.ui.makeUserInfo(l,g,this.options.server,false,e.userinfo?e.userinfo:null).click(function(o){o.stopPropagation();});return;break;}},_getPathData:function(d,e){if(!e){return d;}var c=e.split("."),b=d;$.each(c,function(f,g){if(!b[g]){return false;}b=b[g];});return b;},_addData:function(f){var b=this,d=this.options.column,c=this.elements.data,g=$('<tr class="viewlist-data-tr"/>'),e=b.options.datapath?b._getPathData(f,b.options.datapath):f;if(!d){return;}if(parseInt(e["@indent"],10)>0){g.addClass("response");}g.data("view-list-data",f);$.each(d,function(j,i){var l=$('<td class="column data" id="'+j+'"/>'),m=i,k="",h=j=="selectable"?b._selectable(false,l,typeof m==="string"?(m={type:i}):m):b._formatter(g,l,m,e[j],f);if(typeof m.render==="function"){h=m.render(g,l,e,m,h);if(h===false){return true;}if(h!==undefined&&h!==true){l.html(h);k=l.text();}}else{if(typeof h!=="undefined"){l.html(h);k=l.text();}}l.attr("title",k);m.hidewidth===true&&l.addClass("dsp_none");if(m.css){l.css(m.css);}if(m.classes){l.addClass(m.classes);}if(l){l.appendTo(g);}});$(".column.data:first",g).addClass("first");$(".column.data:last",g).addClass("last");if(this._trigger("rowrender",null,[g,e])===false){return;}g.off("click").on("click",function(i){if($(i.target).closest(".column.data").is(".selectable")){return;}var h=f;b._trigger("click",i,[g,$(i.target),h]);});g.appendTo(c);},refreshHeaderByQuery:function(f){var b=this.elements.head,c=f?f.sortcolumn:"",e=f?f.sortorder:"";$(".sortable .ep-icon.on").removeClass("on").addClass("off");if(!c||!e){return;}var d=$("#"+c,b).has(".sortable");if(d.size()==0){return;}switch(e){case"ascending":$(".ep-icon.arrow-up",d).removeClass("off").addClass("on");break;case"descending":$(".ep-icon.arrow-down",d).removeClass("off").addClass("on");break;}},addData:function(e){var c=this,d=$.isArray(e)?"array":$.isFunction(e)?"function":typeof e==="string"?"":"object";if(!d){return;}switch(d){case"object":if(!$.isEmptyObject(e)){c._addData(e);}break;case"array":$.each(e,function(f,g){c._addData(g);});break;case"function":var b=function(f){return c.addData(f);};e.call(c,b);break;}},selectall:function(b){var c=b===false?false:true;$(".viewlist-body .column.data.selectable input:checkbox",this.element).prop("checked",c);},getSelected:function(){var c=[],b=this.options.column.selectable=="checkbox"?"input:checkbox:checked":this.options.column.selectable=="radio"?"input:radio:checked":"";if(!b){return[];}$(".viewlist-body .viewlist-data-tr .column.data.selectable "+b,this.element).closest(".viewlist-data-tr").each(function(){c.push({element:$(this),data:$(this).data("view-list-data")});});return c;},clearData:function(){$(".viewlist-data-tr",this.widget()).remove();$(".errormessage",this.widget()).remove();},errorShow:function(c,b){this.clearData();$(this.elements.body).append($('<div class="errormessage" />').html("<P"+(b?' class="'+b+'"':"")+">"+c+"</P>"));}});})();(function(){$.widget("ep.eppagenavigator",{version:"1.11.1",options:{pageSize:10,page:0,maxPage:0,hideTotal:false,total:"( Total: %s )",title:{prev:"이전",next:"다음",prevpage:"이전페이지",nextpage:"다음페이지"},tag:{prev:" &lt; ",next:" &gt; ",prevpage:" &lt;&lt; ",nextpage:" &gt;&gt; "}},_destroy:function(){this.widget().removeClass(this.widgetFullName).empty();},_create:function(){this.widget().addClass("ep-widget "+this.widgetFullName);if(this.options.maxPage==0){return;}if(this.options.page==0){return;}this._drawNavigator();},_drawNavigator:function(){this.widget().empty();var b='<table cellpadding="0" cellspacing="0 border="0"><tbody><tr>';b+=this._prevpghtml();b+=this._prevhtml();b+=this._makePage(this._getStart(this.options.page));b+=this._nexthtml();b+=this._nextpghtml();b+=this._totalhtml();b+="</tr></tbody></table>";this.widget().html(b);this._bindEvent();},_bindEvent:function(){var b=this;$(".navigator",this.element).off("click").on("click",function(d){d.preventDefault();d.stopPropagation();var c=$(d.target).attr("page");switch(c){case"prev":b._prev();break;case"next":b._next();break;case"prevpage":b._prevPage();break;case"nextpage":b._nextPage();break;case"total":return;break;default:b.setPage(parseInt(c,10));break;}b._trigger("change",null,[b.options.page]);});},_getStart:function(d){var c=d>this.options.maxPage?this.options.maxPage:d;var b=(Math.ceil((c?c:this.options.page)/this.options.pageSize)*this.options.pageSize)-this.options.pageSize+1;return b;},_makePage:function(e){var b="",d=0;while(true){var c=(d+e);if(d>=this.options.pageSize){break;}if(c>this.options.maxPage){break;}b+='<td class="navigator page'+(c==this.options.page?" selected":"")+'" title="'+c+'" page="'+c+'">'+c+"</td>";d++;}return b;},_totalhtml:function(){if(this.options.hideTotal){return"";}if(parseInt(this.options.maxPage,10)==0){return"";}return'<td class="navigator total" page="total">'+sprintf(this.options.total,parseInt(this.options.maxPage,10).toCurrency())+"</td>";},_prevhtml:function(){var c=this.option("title.prev"),b='<td class="navigator prev"'+(c?' title="'+c+'"':"")+' page="prev">'+this.option("tag.prev")+"</td>";return this._getStart()>1?b:"";},_nexthtml:function(){var c=this.option("title.next"),b='<td class="navigator next"'+(c?' title="'+c+'"':"")+' page="next">'+this.option("tag.next")+"</td>";return this._getStart(this.options.maxPage)>this.options.page?b:"";},_prevpghtml:function(){var c=this.option("title.prevpage"),b='<td class="navigator prevpage"'+(c?' title="'+c+'"':"")+' page="prevpage">'+this.option("tag.prevpage")+"</td>";return this._getStart()>1?b:"";},_nextpghtml:function(){var c=this.option("title.nextpage"),b='<td class="navigator nextpage"'+(c?' title="'+c+'"':"")+' page="nextpage">'+this.option("tag.nextpage")+"</td>";return this._getStart(this.options.maxPage)>this.options.page?b:"";},_setOption:function(b,c){if(b=="page"){this.setPage(c);return;}if(b=="maxPage"){this.setMaxPage(c);return;}$.Widget.prototype._setOption.apply(this,arguments);},setPage:function(b){if(parseInt(b,10)<=0){return;}this.options.page=parseInt(b,10);this._drawNavigator();},setMaxPage:function(b,c){this.options.maxPage=b;if(c===true){this._drawNavigator();}},_prev:function(){var b=this._getStart(this.options.page-this.options.pageSize);return this.setPage(b<1?1:b);},_next:function(){var b=this._getStart(this.options.page+this.options.pageSize);return this.setPage(b<1?1:b);},_prevPage:function(){var b=1;return this.setPage(b<1?1:b);},_nextPage:function(){var b=this.options.maxPage;return this.setPage(b<1?1:b);}});})();(function(){var e=new (function d(h){this.data=h||{};this.curr_uid="";this.unique_id=(new Date()).getTime().toString(16);this.req_queue=[];this.req_count=0;this.req_id=0;this.req_status_id=0;this._started=false;this._req_loop_started=false;this.init=function(){};this.reqStatus=function(m,l){var k=this;k.req_queue.push(m);if(k.delay_req){k.delay_req.clear();}k.delay_req=$ep.util.delay();k.delay_req.run(function(){k._reqStatus(l);},500);};this._reqStatus=function(l){var k=this;if(k._req_loop_started){k.req_status_id++;return k.getStatus(k.unique_id,l||k.data.callback,k.req_id,k.req_status_id);}else{k.req_id++;k.start(l,k.req_id);}};this.reset=function(l){var k=this;k.stop();k.req_queue=[];k.req_count=0;$ep.util.cleanAwareness();$.each($ep.cache.awareness,function(m,n){k.req_queue.push(m);n.localUpdateStatus({status:-1,ipt:14});});this.start(l,this.req_id);};this.stop=function(){this.req_id++;this._started=false;this._req_loop_started=false;};this.start=function(m,l){this._started=true;var k=this;if(k.req_id!=l){return;}if(this.delay_retry){this.delay_retry.clear();}return k.getUID(m).then(function(){if(k.req_id==l){k._req_loop_started=true;k.req_status_id++;return k.getStatus(k.unique_id,m||k.data.callback,l,k.req_status_id);}else{return $.Deferred().reject("req_id");}},function(){if(k.delay_retry){k.delay_retry.clear();}if(k.req_id==l){k.delay_retry=$ep.util.delay();k.delay_retry.run(function(){k.start(m,l);},k.data.repeattime);}});};this.request=function f(l,m){var k=this;return $.ajax({url:$ep._CONST.ABC.REQUESTURL,dataType:"jsonp",timeout:(l.subType=="getStatus"?k.data.repeattime:1500),cache:false,async:true,data:l}).then(function(n,r,q){var p={};try{p=(typeof n=="object"?n:$.parseSJON(n));}catch(o){p=n;}return p;},function(o,p,n){});};this.removeAll=function g(m){var k=this;var l={reqType:"typeAW",subType:"removeAll"};return k.request(l,m);};this.getUID=function j(m){var k=this;var l={reqType:"typeAW",subType:"getUID"};return k.request(l,m).then(function(n){k.curr_uid=n.loginID[0].uid;$ep.util.abc.status=1;$ep.util.abc.abc_login_user=n.loginID[0].uid;$ep.util.abc.abc_login_id=n.loginID[0].userid;},function(){$ep.util.abc.status=0;$ep.util.abc.abc_login_user="";$ep.util.abc.abc_login_id="";});};this.getStatus=function(o,p,n,k){var l=[];for(var m=0;m<50;m++){if(this.req_queue.length==0){break;}l.push(this.req_queue.shift().replace(/,/g,"/"));}this.req_count+=l.length;return this._getStatus(l,o,p,n,k);};this._getStatus=function i(m,p,q,n,l){var k=this;var o={reqType:"typeAW",subType:"getStatus",param0:p,param1:m.join("|")};return this.request(o,q).then(function(s){if(!s||!s.buddyState){return s;}var r=$ep.cache.awareness;$.each(s.buddyState,function(u,v){var t=r[v.uid];if(!t){return;}t.localUpdateStatus(v);});return s;}).then(function(r){if(r&&r.buddyCnt!=null&&r.buddyCnt===0){return $.Deferred().reject("nothing");}return r;},function(){return k.getUID();}).then(function(r){if(k.req_id==n&&k.req_status_id==l){if(k.delay_get_status){k.delay_get_status.clear();}k.delay_get_status=$ep.util.delay();k.delay_get_status.run(function(){k.getStatus(p,q,n,l);},k.data.delaytime);}else{return $.Deferred().reject("req_status_id");}},function(){if(k.req_status_id==l){k.reset();}else{return $.Deferred().reject("req_status_id");}});};})({interval:30000,repeattime:35000,delaytime:1500,callback:null});function c(m,f){var o=this,h=[],j=null,g=0,q=f||{ipt:""};this.id=m;this.info=function(r){r&&$.extend(true,q,r);return q;};this.refCount=function(){return h.length;};this.stproxy={model:null,status:-1,statusMsg:"",className:"",isReady:false,isChat:false};this.awareness_type={AVAILABLE:1,AVAILABLE_MOBILE:6,AWAY:2,AWAY_MOBILE:7,DND:3,DND_MOBILE:8,IN_MEETING:5,IN_MEETING_MOBILE:10,NOT_USING:4,OFFLINE:0,UNKNOWN:-1};this.ipt={status:14,statusMsg:"",className:"tel_noStay"};this.unusedtime=function(){return this.refCount()==0?((new Date().getTime()-g)/1000/60):0;};this.destroy=function(){o=null;this.stproxy=null;this.ipt=null;$ep.cache.awareness[this.id]=null;delete $ep.cache.awareness[this.id];};this.abcStatus=function(){return $ep.util.abc.status;};this.abc=function(){return $ep.util.abc;};this.bindUpdate=function(t,s){var u=t,r=s;var v={parent:u,event:r};h.push(v);g=new Date().getTime();};this.unbindUpdate=function(r){h=$.grep(h,function(s){return !(s.event==r);});g=new Date().getTime();};this.phone=function(){if(!q.ipt){a("empty phone number!!");return;}this.abc().phone(q.ipt).fail(function(){a("abc phone error!");});return;};this.login=function(){};this.update=function(){l.call(o,o.stproxy.status,o.ipt.status);};this.iptUpdateStatus=function(r){return;};this.chat=function(){var s=this.stproxy.status,r=this.awareness_type;if(s==r.UNKNOWN||s==r.OFFLINE||s==r.DND||s==r.NOT_USING||s==r.IN_MEETING||s==r.IN_MEETING_MOBILE){a("not available");return;}this.abc().chat(this.id).fail(function(){});return;};this.localUpdateStatus=function(r){var t=r.status;var s=r.ipt;l.call(this,t,s);};function i(){$.each(h,function(r,s){s.event.apply(s.parent,[o]);});}function l(s,t){var r=this.awareness_type,v=o.stproxy,u=o.ipt;v.status=s;u.status=t;switch(v.status){case 0:v.statusMsg="offline";v.className="pc_offLine";break;case 1:v.statusMsg="available";v.className="pc_onLine";break;case 2:v.statusMsg="away";v.className="pc_noStay";break;case 3:v.statusMsg="dnd";v.className="pc_noRecive";break;case 8:v.statusMsg="inmetting";v.className="pc_meeting";break;case 544:v.statusMsg="availablemobile";v.className="mobile_online";break;case 608:v.statusMsg="awaymobile";v.className="mobile_noStay";break;case 640:v.statusMsg="dndmobile";v.className="mobile_noRecive";break;case 520:v.statusMsg="inmeetingmobile";v.className="mobile_meting";break;default:v.statusMsg="unknown";v.className="pc_offLine";break;}switch(u.status){case 0:u.statusMsg="busy";u.className="tel_calling";break;case 7:u.statusMsg="available";u.className="tel_callPossible";break;case 14:u.statusMsg="unknown";u.className="tel_noStay";break;case 21:u.statusMsg="incoming";u.className="tel_receipt";break;}i();}function n(){}function p(v){var u=v.status,r=o.ipt.status;o.stproxy.isReady=true;if(v.statusMessage){var s=null;if((s=v.statusMessage.match(/[\x0d]([0-2])/g))!==null){var t=parseInt(s[0],10);r=(t==0?7:t==1?0:t==2?21:14);}}l.call(o,u,r);}function k(){a("loginFailed");}g=new Date().getTime();this.login();e.reqStatus(this.id);return;}function b(g,h){var f;$ep.util.cleanAwareness();if($ep.cache.awareness[g]){f=$ep.cache.awareness[g];h&&f.info(h);return f;}return $ep.cache.awareness[g]=new c(g,h);}$.widget("ep.epawareness",{version:"1.11.1",options:{id:"",message:{mail:"Send mail",status:{offline:"Offline",available:"Available",away:"Away",dnd:"Do Not Disturb",inmetting:"Meeting",availablemobile:"Available(Mobile)",awaymobile:"Away(Mobile)",dndmobile:"Do Not Disturb(Mobile)",inmeetingmobile:"Meeting(Mobile)",unknown:"Unknown"},iptstatus:{available:"Available",busy:"Busy",incoming:"Incoming",unknown:"Unknown"}},server:"",mail:function(){},sametime:function(){},iptel:function(){},info:{ipt:""}},listener:null,elements:{mail:null,sametime:null,iptel:null},_create:function(){this.elements={};this.listener=null;this.widget().addClass("ep-widget "+this.widgetFullName);this.options.classes&&this.widget().addClass(this.options.classes);!this.options.id&&this.widget().attr("uid")&&(this.options.id=this.widget().attr("uid"));!this.options.info.ipt&&this.widget().attr("ipt")&&(this.options.info.ipt=this.widget().attr("ipt"));},_init:function(){this._initSTProxy();},_initSTProxy:function(){var f=this;this.options.id&&(this.options.id=this.options.id.replace(/\//g,","));this.options.id&&(this.listener=b(this.options.id,this.options.info));this.elements.mail=this.widget().hasClass("awareness_mail")?$(".awareness_mail").removeAttr("class").addClass("icon mailC"):$('<span class="awareness_mail icon mailC" />').appendTo(this.widget());this.elements.mail.attr("title",this.options.message.mail);this.options.hidemail===true&&this.elements.mail.hide();this.elements.sametime=this.widget().hasClass("awareness_sametime")?$(".awareness_sametime").removeAttr("class").addClass("icon pc_offLine"):$('<span class="awareness_sametime icon pc_offLine" />').appendTo(this.widget());this.options.hidesametime===true&&this.elements.sametime.hide();this.elements.iptel=this.widget().hasClass("awareness_iptel")?$(".awareness_iptel").removeAttr("class").addClass("icon tel_noStay"):$('<span class="awareness_iptel icon tel_noStay" />').appendTo(this.widget());this.options.hideiptel===true&&this.elements.iptel.hide();if(this.listener){this.listener.bindUpdate(this,this._bindSTUpdate=function(g){this.updateStatus(g);});}this.elements.mail.size()>0&&this.elements.mail.off("click").on("click",function(g){g.stopPropagation();if(f._trigger("mail")===false){return;}$.winOpen((f.options.server?"/"+f.options.server:"")+$ep._CONST.PATH.LIB+"/redirect_mail?readform&action=newmail&id="+f.options.id.replace(/\,/g,"/"));});this.elements.sametime.size()>0&&this.elements.sametime.off("click").on("click",function(g){g.stopPropagation();if(f._trigger("sametime")===false){return;}f.listener&&f.listener.chat();});this.elements.iptel.size()>0&&this.elements.iptel.off("click").on("click",function(g){g.stopPropagation();if(f._trigger("iptel")===false){return;}f.listener&&f.listener.phone();});this.listener&&this.listener.update();},updateStatus:function(f){var g=f.stproxy.className;this.elements.sametime.removeClass(function(h,i){return i.replace(/(\W|^)icon(\W|$)/g," ").replace(/(\W|^)awareness_\w+(\W|$)/g,"").trim();}).addClass(g).attr("title",this.options.message.status[f.stproxy.statusMsg]);g=f.ipt.className;this.elements.iptel.removeClass(function(h,i){return i.replace(/(\W|^)icon(\W|$)/g," ").replace(/(\W|^)awareness_\w+(\W|$)/g,"").trim();}).addClass(g).attr("title",this.options.message.iptstatus[f.ipt.statusMsg]);},destroy:function(){this._super("destroy");this.listener&&this.listener.unbindUpdate(this._bindSTUpdate);}});})();(function(){$.widget("ep.epbutton",{version:"1.11.1",locked:false,options:{dblock:300,defshow:true},_destroy:function(){this.widget().qtip("destroy",true);this.widget().off("showbutton hidebutton click").empty();},_create:function(){var b=this,c=this.widget();c.addClass("ep-widget "+b.widgetFullName);if(typeof this.options.show==="undefined"){this.options.show=this.options.defshow;}this.options.classes&&c.addClass(this.options.classes);this.options.highlight===true&&c.addClass("highlight");this.options.css&&c.css(this.options.css);this.options.show!==true&&c.removeClass("show")&&c.addClass("hide");this.options.show==true&&c.removeClass("hide")&&c.addClass("show");this.options.id&&c.attr("id",this.options.id);if(!this.options.id&&c.attr("id")){this.options.id=c.attr("id");}b._makebutton();b._bindbutton();b._makesecondary();this.widget().on("showbutton",function(f,d){$.each(d,function(e,g){b.show(g);});});this.widget().on("hidebutton",function(f,d){$.each(d,function(e,g){b.hide(g);});});},_makebutton:function(){this.buttonElement=$('<span class="epbutton">'+(this.options.text||"button")+"</span>").appendTo(this.widget());!$.isEmptyObject(this.options.children)&&this.buttonElement.addClass("haschildren");this.options.children&&$('<span class="secondary ep-icon"></span>').appendTo(this.widget());},_bindbutton:function(){var b=this,c=b.buttonElement.hasClass("haschildren")?b.buttonElement:b.widget();$(c).on("click",function(f){var d=b.options.bindchild?b.options.id+"."+b.options.bindchild:b.options.id;b._click(f,d);});},_getButton:function(d,c){var b=d?d.split("."):[];return b.length>1?this.options.children[b[1]]:this.options;},_click:function(d,f){var b=this,c=this._getButton(f,$(d.target).closest(".ep-epbutton"));if(c.lockclick){return b._lockclick(d,f);}if(this.locked){return;}this.options.dblock&&(this.locked=true);this.options.dblock&&setTimeout(function(){b.locked=false;},this.options.dblock);if(this.options.hook){if($.isFunction(this.options.hook.click)){this.options.hook.click.apply(this.widget(),[d,f,c]);return;}}return c.click?c.click.apply(b.widget(),[d,f,c]):undefined;},_lockclick:function(d,f){var b=this,c=b._getButton(f,$(d.target).closest(".ep-epbutton"));if(this.alreadyClicked||this.locked){a("locked");return;}this.locked=true;if(this.options.hook){if($.isFunction(this.options.hook.click)){return this.options.hook.lockclick.apply(this.widget(),[d,f,c,function(){b.unlock();}]);}}return c.lockclick?c.lockclick.apply(b.widget(),[d,f,c,function(){b.unlock();}]):undefined;},_makeQtip:function(){var c=this,d=c.options,e=c.widget();var b=null;$(e).qtip({overwrite:true,content:function(k,i){var f=$(this),j=i,h=$('<div class="epbutton"><ul class="epbutton-item" /></div>'),l=h.find(".epbutton-item"),g=[];j.tooltip.css("min-width",f.outerWidth()-2);$.each(d.children,function(m,n){if(n.fixed==true){g.push($.extend(true,{id:m},n));return true;}if(n.show!==true){return true;}$('<li class="epbutton-item" id="'+c.options.id+"."+m+'"><span title="'+n.text+'">'+n.text+"</span></li>").appendTo(l).click(function(p){var q=n,o=$(p.target).closest("li").attr("id");c._click(p,o);});});l=$('<ul class="epbutton-item fixed" />').appendTo(h);$.each(g,function(m,n){if(n.show!==true){return true;}$('<li class="epbutton-item" id="'+c.options.id+"."+n.id+'"><span title="'+n.text+'">'+n.text+"</span></li>").appendTo(l).click(function(p){var q=n,o=$(p.target).closest("li").attr("id");c._click(p,o);});});return h;},position:$.extend({at:"bottom left",my:"top left",adjust:{method:"shift flip",x:0,y:0,screen:true},viewport:true},c.options.position),hide:{event:"unfocus mouseleave click",target:!(d.bindchild||d.click||d.lockclick)?e:$(".secondary",e),delay:200,fixed:true,effect:true},show:{delay:50,event:"click",target:!(d.bindchild||d.click||d.lockclick)?e:$(".secondary",e),solo:true,effect:true},style:{tip:false,classes:c.widgetFullName+"-qtip"},events:{show:function(g,f){var h=c.children>0;if(h&&$ep.util.browser.msie){b&&b.clear()&&(b=null);b=$ep.util.keepObject();b.hide();}return h;},hide:function(g,f){b&&b.show();}}});},_makesecondary:function(){if(!this.options.children){return;}var b=this;this._updateChild();this._makeQtip();},_updateChild:function(){var b=this;this.children=(function(){var c=0;$.each(b.options.children,function(d,e){if(typeof e.show==="undefined"){e.show=b.options.defshow;}e.show==true&&(c++);});return c;})();},hide:function(c){var b=this;if(!c){this.widget().removeClass("show").addClass("hide");this.options.show=false;return;}var d=c.split(".");if(d[0]!==this.options.id){return;}if(d.length==1){b.hide();return;}if(!b.options.children){return;}if(!b.options.children[d[1]]){return;}b.options.children[d[1]].show=false;b._updateChild();this.children==0&&this.hide();},show:function(c){var b=this;if(!c){this.widget().removeClass("hide").addClass("show");this.options.show=true;return;}var d=c.split(".");if(d[0]!==this.options.id){return;}if(d.length>=1){b.show();}if(d.length==1){return;}if(!b.options.children){return;}if(!b.options.children[d[1]]){return;}b.options.children[d[1]].show=true;b._updateChild();this.children==1&&this.show();},disable:function(){this.widget().prop("disabled",true);},enable:function(){this.widget().prop("disabled",false);},unlock:function(){this.locked=false;}});})();(function(){if(!$.ui){return;}$.widget("ep.epdialog",$.ui.dialog,{options:{modal:true,iframe:false,resizable:false,content:{},lang:{script:typeof $ep!=="undefined"?$ep:null,prefix:""},complete:function(){}},content:null,_create:function(){if(this.options.lang.script){this.options.lang.script.LangConvertObject(this.options,"title,text");}this._super("_create");this.content=$(this.element);this.widget().addClass("ep-widget "+this.widgetFullName);this._content();},_content:function(){var b=this,d=b.options,c=d.content?d.content.url?$.CURI(d.content.url):typeof d.content=="string"?$.CURI(d.content):null:null;try{if(top.mailserver!=undefined||top.LINKURL!=undefined){if(top.LINKURL!=""||top.mailserver!=""){d.position.at="top";}}}catch(g){}c&&c.setArgv({dialogid:d.dialogid});if(d.iframe!==true&&c){var h=$.CURI();if(h.host().toLowerCase()!=c.host().toLowerCase()){d.iframe=true;}}if(d.iframe===true){$(b.content).css("overflow","hidden");b.content=$('<iframe src="'+(c?c.url:"about:blank")+'" frameborder="0" style="display:inline-block;height:100%;width:100%;" />').load(function(){d.content.html&&$(this).contents().find("body").html(d.content.html);b._trigger("complete");}).appendTo(b.content);return;}$ep&&$ep.ui&&((b.options.active=$ep.ui.activeId())&&$ep.ui.active(b.options.dialogid));if(!c&&d.content.html){$(b.content).html(d.content.html);}if(!c){b._trigger("complete");return;}var f=d.lang;if(f.langpack&&f.prefix){$ep.ui.loadPageLangPack(b.content,c.url,f.langpack,f.prefix).done(function(){b._trigger("complete");});}else{$ep.ui.loadPageLang(b.content,c.url,f.script||$ep).done(function(){b._trigger("complete");});}},_createOverlay:function(){if(!this.options.modal){return;}this.overlayIframe=$('<iframe src="about:blank" class="ui-widget-overlay-iframe" frameborder="0" style="z-index:99;"/>').appendTo(this._appendTo());this._super("_createOverlay");},close:function(c){var b=this.options.beforeClose;if(!this._isOpen||this._trigger("beforeClose",c)===false){return;}this.overlayIframe&&this.overlayIframe.size()>0&&this.overlayIframe.remove();this.options.beforeClose=null;this._super("close");this.options.beforeClose=b;this.options.active&&($ep&&$ep.ui&&$ep.ui.active(this.options.active));this.destroy();},destroy:function(){$(this.element).empty();this._super("destroy");$(this.element).remove();}});})();(function(){$.widget("ep.epSideMenu",{version:"1.11.1",options:{speed:150,mode:"multi"},dataKey:function(){return this.widgetName+".data";},elements:{wrap:null,top:null,title:null},_create:function(){this.widget().addClass("ep-widget "+this.widgetFullName);this.elements.wrap=this.widget().wrapInner('<div class="side-wrap" />').children(":first").disableSelection();this.elements.top=$(this.elements.wrap).has("ul").size()>0?$("ul:first",this.elements.wrap).addClass("side-ul"):$('<ul class="side-ul" />').appendTo(this.elements.wrap);this.elements.items=$(".side-ul.menu-wrapper",this.elements.wrap).size()>0?$(".side-ul.menu-wrapper",this.elements.wrap):$('<ul class="side-ul menu-wrapper" />').appendTo(this.elements.wrap);(typeof this.options.positionTop!=="undefined")&&this.elements.items.css("top",this.options.positionTop);(typeof this.options.positionBottom!=="undefined")&&this.elements.items.css("bottom",this.options.positionBottom);this._draw();},_closeAll:function(d,c){var b=this;$(c).children("li.open").each(function(){var e=$(this);$("ul.side-ul:first",e).slideToggle({duration:b.options.speed,start:function(){return b._eventTrigger("close",d,e);},complete:function(){$(e).removeClass("open");$(this).css("display","");}});});},_eventTrigger:function(c,f,d){var b=$(d).data(this.dataKey());if(!$(d).hasClass("haschild")){switch(c){case"click":$("li.active",this.widget()).removeClass("active");$(d).addClass("active");break;}}if($.isFunction(this.options.eventListener)){return this.options.eventListener.apply(this.element,[c,f,d,b].concat(Array.prototype.slice.call(arguments,3)));}switch(c){default:return b&&b[c]&&b[c].apply(this.widget(),[f,d,b].concat(Array.prototype.slice.call(arguments,3)));break;}},_toggleMenu:function(f,c){var b=this,d=c;$("ul.side-ul:first",d).slideToggle({duration:b.options.speed,start:function(){return d.hasClass("open")?b._eventTrigger.call(b,"close",f,d):b._eventTrigger.call(b,"open",f,d);},complete:function(){if(d.hasClass("open")){d.removeClass("open");}else{if(b.options.mode=="single"){b._closeAll(f,d.closest("ul"));}d.addClass("open");}$(this).css("display","");}});},_draw:function(){var b=this;this._drawTitle();this._drawButton();this._drawMenu(this.elements.items,this.options.items,0);$("li.item > span",this.widget()).click(function(d){var c=$(this).closest("li.item");c.hasClass("haschild")&&b._toggleMenu(d,c);b._eventTrigger("click",d,c);});},_drawTitle:function(){var b=this.options,c=$("li.title",this.elements.top);if(!b.title){return;}var c=c.size()>0?$("li.title",this.elements.top):$('<li class="side-li title" />').prependTo(this.elements.top);this.elements.title=c;switch(typeof b.title){case"string":c.html(b.title);break;case"function":c.html(b.title.apply(this,c));break;}c.wrapInner('<span class="side-item item-label" />');return;},_drawButton:function(){var d=this.options;if(!d.button){!(d.positionTop)&&this.elements.items.css({top:"87px"});return;}var b=$("li.side-li.button",this.elements.top);b=b.size()>0?b:$('<li class="side-li button" />').insertAfter(this.elements.title||this.elements.top);var c=this.elements.button=$('<span class="side-button" />').appendTo(b.empty());var e=$("<table><tbody><tr /></tbody></table>").appendTo(c).find("tr");$.each(d.button,function(f,g){var h=$("<td></td>").appendTo(e);if(g.width&&h.css({width:g.width})){delete g.width;}$('<span id="'+($.isNumeric(f)?"side"+f:f)+'" />').appendTo(h).epbutton(g);});},_drawMenu:function(d,c,g){var b=this,e=c,f=d;if(!e){return;}$.each(e,function(h,j){var l=$('<li class="side-li item" />').appendTo(f),k=$(j.tag?j.tag:'<span class="side-item item-label" />').appendTo(l);l.data(b.dataKey(),j);var m=j.text?$.isFunction(j.text)?j.text.apply(b,[k]):j.text:"";m instanceof jQuery?k.append(m):k.html(m);j.classes&&l.addClass(j.classes);j.isactive===true&&l.addClass("active");j.ishide===true&&l.hide();if(j.items){l.addClass("haschild");j.isopen===true&&l.addClass("open");$('<span class="side-item holder" />').appendTo(l);l.wrapInner('<span class="side-item item-wrap" />');var i=$('<ul class="side-ul depth'+(g+1)+'" />').appendTo(l);b._drawMenu(i,j.items,g+1);}});},destroy:function(){this._super("destroy");}});})();(function(){if(!$.ui){return;}if(!$.ui.fancytree){return;}$.widget("ep.eptree",$.ui.fancytree,{_create:function(){this._super("_create");this.tree._triggerNodeEvent=function(f,g,c,b){var d=this._makeHookContext(g,c,b),e=this.widget.options.hooking?this.widget.options.hooking.apply(this.widget.element,[f,c,d]):this.widget._trigger(f,c,d);if(e!==false&&d.result!==undefined){return d.result;}return e;};this.tree._triggerTreeEvent=function(e,b){var c=this._makeHookContext(this,b),d=this.widget._trigger(e,b,c);if(d!==false&&c.result!==undefined){return c.result;}return d;};}});$.ui.fancytree.registerExtension({name:"mail.extension",version:"0.2.0",treeInit:function(c){var b=c.tree;this._super(c);},treeRegisterNode:function(b,d,c){if(c.isFolder()){return;}this.options.dataRender&&this.options.dataRender.call(this,b,d,c);this._super(b);}});})();(function(){if(!$.ui){return;}$.widget("ep.eptabs",$.ui.tabs,{tabselect:function(c){var b=this;b._activate(c);return;},getActivePanel:function(){var b=this,c=b.panels.filter(".ui-tabs-panel[aria-hidden=false]");return c;},getPanel:function(b){return this.panels.filter("#tabid");}});})();(function(){var b=function(){return(function(){var d=0;var c={clear:function(){clearTimeout(d);return this;},run:function(f,e){this.clear();d=setTimeout(f,e);}};return c;})();};$.widget("ep.epgrid",{version:"1.11.2",options:{draggable:true,isduplicate:false,keycode:"key",reverse:false,numbering:false,duplicate:{message:"",type:""},hideheader:false,headers:null,itemRender:undefined,selectType:"",dataset:null,rowclick:null,dragstop:null,offresize:false,className:"",height:null,width:null},_create:function(){if(!this.options.className){this.options.className=this.widgetFullName;}this.element.addClass("ep-widget "+this.options.className);this.options.classes&&this.element.addClass(this.options.classes);this.options.width!==null&&this.element.css("width",this.options.width);this.options.height!==null&&this.element.css("height",this.options.height);this.options.hideheader===true&&this.element.addClass("hideheader");this._delay=b();this._initGrid();if(this.options.draggable==true){this._initSortable();return;}},_destroy:function(){this.element.removeClass("ep-widget "+this.options.className);return this;},_setOption:function(c,d){$.Widget.prototype._setOption.apply(this,arguments);return this;},_setOptions:function(c){$.Widget.prototype._setOptions.apply(this,arguments);return this;},_initSortable:function(){var c=this;if(!($.ui&&$.ui.sortable)){return;}$("table tbody",this.element).sortable({axis:"y",revert:100,delay:200,items:"tr:not(."+c.options.className+"-disabled)",helper:function(g,f){var d=f.children(),h=f.clone();h.children().each(function(e){$(this).width(d.eq(e).width());$("select",this).val($("select",d.eq(e)).val());});return h;},stop:function(){if(c.options.numbering){c._refreshNumber();return;}c._trigger("dragstop");}});},_initGrid:function(){this._Elements={};var k=this,o=k.element,e=this.options,g=this._Elements;if(!e.headers){return;}var h=e.headers,f=$('<div class="'+this.options.className+'-header-div" />').appendTo(o),c=$('<table class="'+this.options.className+'-header-table" border="0" cellpadding="0" cellspacing="0" />').appendTo(f);k._draw_colgroup(c);var m=$("<thead />").appendTo(c);g.htbl=c;var i=$("<tr />").appendTo(m);if(e.numbering){k._drawNumber(i,true);}k._selectTypeHandle(null,true,i);for(var l=0;h.length>l;l++){var n=$('<th id="'+h[l].id+'">'+(h[l].label?h[l].label:"")+"</th>").appendTo(i);if(h[l].hcss){n.css(h[l].hcss);}h[l].hclasses&&n.addClass(h[l].hclasses);}var j=$('<div class="'+this.options.className+'-data-div" />').appendTo(o),d=$('<table class="'+this.options.className+'-data-table" border="0" cellpadding="0" cellspacing="0" />').appendTo(j);g.dtbl=d;k._draw_colgroup(g.dtbl);g.databody=$('<tbody class="'+this.options.className+'-data" />').appendTo(d);$(o).bind("epgridresize",function(){k._resizeHandle();});this.options.offresize!==true&&$(window).on("resize",function(){k._delay.run(function(){k._resizeHandle();},200);});if(e.selectType=="checkbox"){$("#checkall input",g.htbl).click(function(p){if($(this).is(":checked")){k.allChecked(true);}else{k.allChecked(false);}});}k.addData(typeof e.dataset==="function"?e.dataset.call(this.element):e.dataset);},_resizeHandle:function(){this.options.offresize!==true&&$(this._Elements.htbl).css({width:this._Elements.dtbl.width()-1});},_draw_colgroup:function(h){var e=this,i=e.element,g=this.options,f=g.headers,d=$("<colgroup />").appendTo(h);if(g.numbering){$('<col width="'+(typeof g.numbering==="object"?g.numbering.width?g.numbering.width:"40px":"40px")+'" />').appendTo(d);}if(g.selectType!="rowselect"&&g.selectType){$('<col width="26px" />').appendTo(d);}for(var c=0;g.headers.length>c;c++){$('<col width="'+(f[c].width?f[c].width:"*")+'" />').appendTo(d);}},_drawNumber:function(e,f){if(!this.options.numbering){return;}var c=f===true?"th":"td",d=$("<"+c+' id="num">'+(f===true?"No.":"")+"</"+c+">").appendTo(e);if(f===true){return;}return;},_refreshNumber:function(){var c=this,e=c.options;if(!e.numbering){return;}var g=c.getAllNodes();if(g.size()==0){return;}var d=g.size(),f=e.reverse?d+1:0;g.each(function(){var h=$("#num",this);f=e.reverse?f-1:f+1;if(typeof e.numbering==="object"){h.text(f==1?e.numbering.start?e.numbering.start:f:f==d?e.numbering.end?e.numbering.end:f:f);}else{h.text(f);}});},_selectTypeHandle:function(g,h,f){var c=this,e=this.options;var d="";switch(e.selectType){case"checkbox":d="<"+(h===true?"th":"td")+(h===true?' id="checkall" class="checkbox"':' class="checkbox"')+'><input type="checkbox" name="grid_check"'+(g&&g.hidecheckbox?' style="display:none"':"")+"></"+(h===true?"th":"td")+">";if(h===true){$(d).appendTo(f);}break;case"radio":d="<"+(h===true?"th":"td")+' width="26px">'+(h===true?"":'<input type="radio" name="grid_check"'+(g&&g.hideradio?' style="display:none"':"")+">")+"</"+(h===true?"th":"td")+">";if(h===true){$(d).appendTo(f);}break;}return d;},_makeInputType:function(d,h){var g=d,c=g.inputType,f=h,e=null;switch(c.type){case"selectbox":e=$('<select class="organ_item_select" />');$.each(c.itemset,function(i,j){e.append('<option value="'+i+'">'+j+"</option>");});e.val(f[g.id]?f[g.id]:c.def?c.def:"");f[g.id]=e.val();e.on("change",function(i){i.stopPropagation();f[g.id]=$(this).val();});break;}return e;},_makeDataColumn:function(g,d,f){var e=$("<td />"),c=(d.inputType?this._makeInputType(d,f):d.format?$ep.util.patternCompletion(d.format,f):d.expression?d.expression.apply(this.element,[e,d,f]):(f[d.id]?f[d.id]:""));if(!e.attr("title")){if(typeof c=="string"){e.attr("title",c);}}d.id&&e.attr("id",d.id);d.classes&&e.addClass(d.classes);e.append(c).appendTo(g);if(d.css){e.css(d.css);}},_throwMessage:function(){var c=this.options;if(c.duplicate.message){c.duplicate.type&&c.duplicate.type=="alert"&&alert(c.duplicate.message);c.duplicate.type&&c.duplicate.type=="toast"&&$ep.util.toast(c.duplicate.message,c.duplicate.delay?c.duplicate.delay:1000);}},_addData:function(f){var j=this,c=this.options,l=f;var g=$('<tr class="'+this.options.className+'-item" />');if(typeof c.itemRender==="function"){var k=c.itemRender.call(j.element,l,g);if(k===false){return;}if(k){l=k;}}if(c.isduplicate===true){if(j.getDataByKey(l[c.keycode]).length>0){j._throwMessage();return;}}if(c.reverse===true){$(this._Elements.databody).prepend(g);}else{g.appendTo(this._Elements.databody);}if(c.numbering){j._drawNumber(g);}g.append(j._selectTypeHandle(l));l.selected==true&&g.find("input:radio,input:checkbox").prop("checked",true)&&(delete l.selected);if(l.disabled===true){g.addClass(j.options.className+"-disabled");}for(var h=0;c.headers.length>h;h++){j._makeDataColumn(g,c.headers[h],l);}$(g).data("data",l);if($(g).hasClass(j.options.className+"-disabled")){$("select,input",g).attr("disabled",true);}var d=false;function e(m,i){switch(c.selectType){case"rowselect":if(i===true){$(m).addClass(j.options.className+"-selected");}else{$(m).toggleClass(j.options.className+"-selected");}break;case"checkbox":if(i===true){$("input[name=grid_check]",m).prop("checked",true);return;}if($("input[name=grid_check]",m).prop("checked")){$("input[name=grid_check]",m).prop("checked",false);}else{$("input[name=grid_check]",m).prop("checked",true);}break;case"radio":if(i===true){$("input[name=grid_check]",m).prop("checked",true);return;}if($("input[name=grid_check]",m).prop("checked")){$("input[name=grid_check]",m).prop("checked",false);}else{$("input[name=grid_check]",m).prop("checked",true);}break;}}$(g).click(function(n){var i=n,m=c,p=this,o=l;if(!$(i.target).parent().is("tr")){i.stopPropagation();return;}setTimeout(function(){if(d===true){return;}if(!$(p).hasClass(j.options.className+"-item")){return;}if($(p).hasClass(j.options.className+"-disabled")){return;}j._trigger("rowclick",i,o);e(p);},200);}).dblclick(function(m){d=true;setTimeout(function(){d=false;},300);var i=m,o=l,n=this;if(!$(i.target).parent().is("tr")){i.stopPropagation();i.preventDefault();return;}if(!$(n).hasClass(j.options.className+"-item")){return;}if($(n).hasClass(j.options.className+"-disabled")){return;}e(n,true);j._trigger("rowdblclick",i,o);});j._refreshNumber();j._fireResize();j._trigger("afterItemRender",null,g);},_fireResize:function(){var c=this;setTimeout(function(){c._trigger("resize");},200);},allChecked:function(c){if(c===true){$("."+this.options.className+"-item:not(."+this.options.className+"-disabled) input[name=grid_check]",this._Elements.databody).prop("checked",true);}else{$("."+this.options.className+"-item:not(."+this.options.className+"-disabled) input[name=grid_check]",this._Elements.databody).prop("checked",false);}},addData:function(d){var c=this;if(!d){return;}if($.isArray(d)){$.each(d,function(e,f){c._addData(f);});}else{this._addData(d);}c._trigger("afterAddData");},getAllData:function(){var d=this.getAllNodes(),c=[];d.each(function(e,f){c.push($(this).data("data"));});return this.options.reverse===true?c.reverse():c;},getSelectedData:function(){var d=this.getSelectedNodes(),c=[];d.each(function(e,f){c.push($(this).data("data"));});return this.options.reverse===true?c.reverse():c;},getDataByKey:function(d){if(!d){return[];}var c=this,e=[],f=this.getAllData();if(f.length==0){return e;}e=$ep.Array(f).filter(function(g,h){return h[c.options.keycode]===d;});return e;},removeAll:function(){var c=this.getAllNodes(":not(."+this.options.className+"-disabled)").remove();this._refreshNumber();this._fireResize();return c;},removeSelected:function(){var c=this.getSelectedNodes();if(c){c.remove();}this._refreshNumber();this._fireResize();},getSelectedNodes:function(){var c=this,e=c.options,f=c._Elements.databody,d=null;switch(e.selectType){case"checkbox":d=$("."+this.options.className+"-item input[name=grid_check]:checked",f).closest("."+this.options.className+"-item");break;case"radio":d=$("."+this.options.className+"-item input[name=grid_check]:checked",f).closest("."+this.options.className+"-item");break;default:d=$("."+this.options.className+"-item."+this.options.className+"-selected",f);break;}return d;},getColumnById:function(e,d){var c=d;if(!c){c=this.getSelectedNodes();}if(c.size()==0){return[];}return c.find("td[id="+e+"]");},getAllColumnById:function(c){return this.getColumnById(c,this.getAllNodes());},deSelectedAll:function(){var c=this,d=c.options,e=c._Elements.databody;switch(d.selectType){case"checkbox":$("."+this.options.className+"-item input[name=grid_check]:checked",e).prop("checked",false);break;case"radio":$("."+this.options.className+"-item input[name=grid_check]:checked",e).prop("checked",false);break;default:$("."+this.options.className+"-item."+this.options.className+"-selected",e).removeClass(this.options.className+"-selected");break;}},getAllNodes:function(c){var d=$("."+this.options.className+"-item",this._Elements.databody);return c?d.filter(c):d;},selectedUp:function(f){var c=this,e=f?f:this.getSelectedNodes();var d=null,g={done:function(h){d=h;}};e.each(function(){var h=$(this).prev();while(h.hasClass(c.options.className+"-disabled")){h=$(h).prev();}if(h.size()==0){return g;}$(this).effect("transfer",{to:h,className:"ep-epgrid-transfer"},300,function(){$(this).insertBefore(h);c._refreshNumber();d&&d.call(c,this);});});return g;},selectedDown:function(h){var d=this,g=h?h:this.getSelectedNodes(),e=g.size();var f=null,j={done:function(k){f=k;}};for(var c=e-1;c>=0;c--){var i=$(g.eq(c)).next();while(i.hasClass(d.options.className+"-disabled")){i=$(i).next();}if(i.size()==0){continue;}$(g.eq(c)).effect("transfer",{to:i,className:"ep-epgrid-transfer"},300,function(){$(this).insertAfter(i);d._refreshNumber();f&&f.call(d,this);});}return j;}});})();(function(b){b(window.jQuery);}(function(c){var b=c.fileext={bmp:"img",jpg:"img",png:"img",psd:"img",gif:"img",tiff:"img",doc:"doc",docx:"doc",ppt:"ppt",pptx:"ppt",xls:"xls",xlsx:"xls",hwp:"hwp",pdf:"pdf",exe:"exe",html:"html",htm:"html",txt:"txt",text:"txt",zip:"zip",etc:"etc",getExt:function(d){(/\.(\w+)$/g).test(d);var e=RegExp.$1.toLowerCase();return this[e]||"etc";}};c.widget("ep.epupload",c.ep.epgrid,{widgetEventPrefix:"epgrid",options:{draggable:false,hideheader:false,numbering:false,keycode:"name",i18n:{filename:"Name",filesize:"Size",filestatus:"Status",Attached:"Attached",AttachmentFiles:"Attachment Files",AttachmentTooltip:"Please select if you have a file attachment.",Failed:"Failed",Completed:"Completed"},isduplicate:true,duplicate:{message:"파일명이 중복입니다.",type:"toast",delay:1000},headers:null,itemRender:function(e,d){if(!e.upload){return;}e.upload.context=d;},className:"ep-epgrid",url:"",formData:{}},widgetName:"epgrid",_setHeader:function(){var e=this.options.i18n;var d=[{id:"name",label:e.filename,width:"*",hcss:{textAlign:"left",paddingLeft:"5px"},css:{padding:"0 5px"},expression:function(g,i,h){var f=b.getExt(h.name);return h.name?c('<span class="file_icon '+f+'" /><span class="file_name">'+(h.name||"")+"</span>"):"";}},{id:"size",label:e.filesize,width:"100px",css:{"text-align":"center",padding:"0 5px"},expression:function(h,i,g){return g.size?g.size.toSize():"";}},{id:"progress",label:e.filestatus,width:"150px",css:{"text-align":"center",padding:"0 5px"},expression:function(i,g,h){if(h.isnew!==true){return e.Attached;}var f='<div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><div class="bar" style="width:0%;"></div></div>';return c(f);}},{id:"process",label:"",width:"25px",css:{"text-align":"center"},classes:"nostrike",expression:function(j,g,i){var l=this,h=i,k=j,f=c('<span class="ep-icobutton"><span class="ep-icon cancel" /></span>').on("click",function(){c(l).epupload(h.isnew?"removeElement":"strikeElement",k,h);});return f;}}];this.options.headers=d;},_create:function(){!this.options.headers&&this._setHeader();this._super("create");this.widget().addClass("ep-widget "+this.widgetFullName);this._createUI();this._initUploader();},_createUI:function(){c(this.element).wrapInner('<div class="epuploader-files" />');c(this.element).prepend('<div class="epuploader-header"><span class="epuploader-input"><span class="epuploader-button" id="attach"></span><input id="attach" type="file" name="%%File" multiple title="'+this.options.i18n.AttachmentTooltip+'"></span></div>');c("#attach.epuploader-button",this.element).epbutton({text:this.options.i18n.AttachmentFiles});},_setOptions:function(d){c.extend(true,this.options,d);},_initUploader:function(){var d=this;c(".epuploader-input",d.element).fileupload({add:function(h,g){var f=g;d.addData({upload:f,name:f.files[0].name,size:f.files[0].size,isnew:true});},dataType:"json",progress:d._onProgress,fail:function(g,f){d._onFail(g,f);},done:function(g,f){d._onDone(g,f);},formData:function(g){var h=c.extend(true,{},d.options.formData,{idx:this.files[0].idx}),e=[];c.each(h,function(f,i){e.push({name:f,value:i});});return e;},url:d.options.url?d.options.url:"/Upload?OpenForm"});},_onFail:function(h,g){var i=this,d=g;var f=i.getColumnById("progress",g.context);f.html(this.options.i18n.Failed);},_onDone:function(h,g){var i=this,d=g;var f=i.getColumnById("progress",g.context);f.html(this.options.i18n.Completed);},_onProgress:function(g,f){if(f.context){var d=Math.floor(f.loaded/f.total*100);f.context.find(".progress").attr("aria-valuenow",d).find(".bar").css("width",d+"%");}},getAllStrike:function(){return this.getAllNodes().filter(".strike");},getAllFileNodes:function(){return this.getAllNodes().filter(":not(.strike)");},getAllFileNames:function(){var e=this.getAllFileNodes(),d=e&&$ep.Array(e).datafilter(function(f,h){var g=c(this).data("data");return g?g.name?g.name:null:null;});return d;},getDelFileName:function(){var e=this.getAllStrike(),d=[];c.each(e,function(){d.push(c(this).data("data").name);});return d;},getDataByKey:function(e){if(!e){return[];}var d=this,g=d.getAllFileNodes(),f=$ep.Array(g).datafilter(function(){var h=c(this).data("data");return typeof h[d.options.keycode]==="string"?h[d.options.keycode].match(new RegExp("^[\\s]*"+e+"[\\s]*$","gi"))?h:null:h[d.options.keycode]===e?h:null;});if(!f){return[];}return f;},submit:function(){var h=this.options.keycode;this.options.keycode="isnew";var d=this,f=0,g=this.getDataByKey(true),i=new c.Deferred();this.options.keycode=h;var e=this.getDelFileName();c.when.apply(this,$ep.Array(g).datafilter(function(){this.upload.files[0]["idx"]=f;f++;return this.upload.submit.apply(this.upload);})).done(function(k){var j=null;d._trigger("completed",k,e);j=c.isArray(k)?k[0]:k;i.resolve(j,e);}).fail(function(){d._trigger("failed");i.reject("");});return i.promise();},strikeElement:function(g){var d=this,h=g,e=h.closest("tr.ep-epgrid-item");if(e.hasClass("strike")){var f=e.data("data");if(d.getDataByKey(f[d.options.keycode]).length>0){d._throwMessage();return;}}e.toggleClass("strike");},removeElement:function(e){var d=this,f=e;f.closest("tr.ep-epgrid-item").fadeOut(150,function(){c(this).remove();d._fireResize();});}});c.widget("ep.xamupload",c.ep.epgrid,{widgetEventPrefix:"epgrid",widgetName:"epgrid",_create:function(){this._super("create");this.widget().addClass("ep-widget "+this.widgetFullName);this.widget().removeClass("ep-epgrid");c(this.element).wrapInner('<div class="epuploader-files" id="xamuploader-files" />');this._initUploader();},_getDateFormat:function(){var e=this;var f=new Date();var k=f.getFullYear().toString();var j=e._getPad(f.getMonth()+1,2);var d=e._getPad(f.getDate(),2);var h=e._getPad(f.getHours(),2);var i=e._getPad(f.getMinutes(),2);var g=e._getPad(f.getSeconds(),2);return k+j+d+h+i+g;},_getPad:function(e,d){var f=""+e;while(f.length<d){f="0"+f;}return f;},_getRandomChar:function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)+Math.floor((1+Math.random())*65536).toString(16).substring(1)+Math.floor((1+Math.random())*65536).toString(16).substring(1)+Math.floor((1+Math.random())*65536).toString(16).substring(1);},_setOptions:function(e){var d=this;c.extend(true,this.options,e);},_attachunid:"",_attachunique:"",_initUploader:function(){var d=this,f=c.Deferred();d._attachunid=((d.options.formData&&d.options.formData.unid)?d.options.formData.unid:d._getDateFormat());d._attachunique=((d.options.formData&&d.options.formData.unique)?d.options.formData.unique:d._getRandomChar());var e=(d.options.mode==="edit"?true:false);d.am=new XAM({disp_id:c(this.element).attr("id"),parent_ele:this.element,config_url:"/config/app_xam_config"+($ep.lang()=="ko"?"":"_eng")+".xml?open",isEdit:e,save_path:d.options.url?d.options.url:"/Upload?OpenForm",serverzip_path:d.options.url.replace(/Upload/g,"xam_zipdownload"),attachunid:d._attachunid,attachunique:d._attachunique,deleteCallback:"read_v3",OnMoveBefore:function(h,i,g){if(e){if(h.status=="complete"){c(i).removeClass("click-on");return false;}else{var j=(g=="up"?c(i).prev():c(i).next());var k=j.find(".upload-status");if(k.hasClass("complete")){return false;}}}return true;},OnRemoveBefore:function(g,h){},OnError:function(g){f.reject();},OnInitCompleted:function(l){var k=d.options.dataset;var g=[];if(k.length!=0){for(var j=0;j<k.length;j++){var h={type:(e?"edit":"read"),name:k[j].name,origname:k[j].name,size:k[j].size,downloadpath:k[j].url};g.push(h);}d.am.g.setFileList(g,e);}f.resolve();}});},getDelFileName:function(){var e=this.am.g.getFileList();var d=[];c.each(e,function(f,g){if(g.status=="remove"){d.push(g.name);}});return d;},getAllFileNames:function(){var e=this.am.g.getFileList();var d=[];c.each(e,function(f,g){if(g.status!="remove"){d.push(g.name);}});return d;},submit:function(){var g=this.options.keycode;this.options.keycode="isnew";var d=this,i=new c.Deferred();this.options.keycode=g;var e=d.getDelFileName();if(d.am.g.getIESupport()){var j=c("#"+d.am.g.iframe_id)[0].contentWindow;var f={id:j._XAM.uploaderid,unique:d._attachunique,unid:d._attachunid};i.resolve(f,e);}else{var h=c("#"+d.am.g.iframe_id).contents().find("form");h.find('input[name="unid"]').val(d._attachunid);h.find('input[name="unique"]').val(d._attachunique);c("#"+d.am.g.iframe_id)[0].contentWindow.OnUploadComplete=function(l,k){i.resolve(k,e);};if(d.am.g.upload()){}else{i.resolve([],e);}}return i.promise();}});}));})();